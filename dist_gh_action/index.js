module.exports=function(e,t){"use strict";var n={};function __webpack_require__(t){if(n[t]){return n[t].exports}var r=n[t]={i:t,l:false,exports:{}};var i=true;try{e[t].call(r.exports,r,r.exports,__webpack_require__);i=false}finally{if(i)delete n[t]}r.l=true;return r.exports}__webpack_require__.ab=__dirname+"/";function startup(){return __webpack_require__(860)}return startup()}({4:function(e,t,n){e.exports=function(e){var t=n(761);var r={chunkSize:(parseInt(e.length/1024)+1)*1024};return{deflate:function(){return t.deflateRawSync(e,r)},deflateAsync:function(n){var i=t.createDeflateRaw(r),o=[],s=0;i.on("data",function(e){o.push(e);s+=e.length});i.on("end",function(){var e=Buffer.alloc(s),t=0;e.fill(0);for(var r=0;r<o.length;r++){var i=o[r];i.copy(e,t);t+=i.length}n&&n(e)});i.end(e)}}}},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(367);var i=n(243);var o=[];var s={10:r.SeverityLevel.Verbose,20:r.SeverityLevel.Verbose,30:r.SeverityLevel.Information,40:r.SeverityLevel.Warning,50:r.SeverityLevel.Error,60:r.SeverityLevel.Critical};var a=function(e){var t=e.data.result;o.forEach(function(n){var r=s[e.data.level];if(t instanceof Error){n.trackException({exception:t})}else{n.trackTrace({message:t,severity:r})}})};function enable(e,t){if(e){if(o.length===0){i.channel.subscribe("bunyan",a)}o.push(t)}else{o=o.filter(function(e){return e!=t});if(o.length===0){i.channel.unsubscribe("bunyan",a)}}}t.enable=enable;function dispose(){i.channel.unsubscribe("bunyan",a);o=[]}t.dispose=dispose},8:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};var i=n(87);var o=n(367);var s=n(701);var a=n(179);var c=n(970);var u=a.w3cTraceId();var f=function(){function QuickPulseEnvelopeFactory(){}QuickPulseEnvelopeFactory.createQuickPulseEnvelope=function(e,t,n,r){var o=i&&typeof i.hostname==="function"&&i.hostname()||"Unknown";var s=r.tags&&r.keys&&r.keys.cloudRoleInstance&&r.tags[r.keys.cloudRoleInstance]||o;var a={Documents:t.length>0?t:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:r.tags[r.keys.internalSdkVersion],StreamId:u,MachineName:o,Instance:s};return a};QuickPulseEnvelopeFactory.createQuickPulseMetric=function(e){var t;t={Name:e.name,Value:e.value,Weight:e.count||1};return t};QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case o.TelemetryTypeString.Event:return QuickPulseEnvelopeFactory.createQuickPulseEventDocument(e);case o.TelemetryTypeString.Exception:return QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument(e);case o.TelemetryTypeString.Trace:return QuickPulseEnvelopeFactory.createQuickPulseTraceDocument(e);case o.TelemetryTypeString.Dependency:return QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument(e);case o.TelemetryTypeString.Request:return QuickPulseEnvelopeFactory.createQuickPulseRequestDocument(e)}return null};QuickPulseEnvelopeFactory.createQuickPulseEventDocument=function(e){var t=QuickPulseEnvelopeFactory.createQuickPulseDocument(e);var n=e.data.baseData.name;var i=r({},t,{Name:n});return i};QuickPulseEnvelopeFactory.createQuickPulseTraceDocument=function(e){var t=QuickPulseEnvelopeFactory.createQuickPulseDocument(e);var n=e.data.baseData.severityLevel||0;var i=r({},t,{Message:e.data.baseData.message,SeverityLevel:o.SeverityLevel[n]});return i};QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument=function(e){var t=QuickPulseEnvelopeFactory.createQuickPulseDocument(e);var n=e.data.baseData.exceptions;var i="";var o="";var s="";if(n&&n.length>0){if(n[0].parsedStack&&n[0].parsedStack.length>0){n[0].parsedStack.forEach(function(e){i+=e.assembly+"\n"})}else if(n[0].stack&&n[0].stack.length>0){i=n[0].stack}o=n[0].message;s=n[0].typeName}var a=r({},t,{Exception:i,ExceptionMessage:o,ExceptionType:s});return a};QuickPulseEnvelopeFactory.createQuickPulseRequestDocument=function(e){var t=QuickPulseEnvelopeFactory.createQuickPulseDocument(e);var n=e.data.baseData;var i=r({},t,{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i};QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument=function(e){var t=QuickPulseEnvelopeFactory.createQuickPulseDocument(e);var n=e.data.baseData;var i=r({},t,{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:t.OperationId,DependencyTypeName:n.type});return i};QuickPulseEnvelopeFactory.createQuickPulseDocument=function(e){var t;var n;var r,i;if(e.data.baseType){n=s.TelemetryTypeStringToQuickPulseType[e.data.baseType];t=s.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]}else{c.warn("Document type invalid; not sending live metric document",e.data.baseType)}r=e.tags[QuickPulseEnvelopeFactory.keys.operationId];i=QuickPulseEnvelopeFactory.aggregateProperties(e);var o={DocumentType:t,__type:n,OperationId:r,Version:"1.0",Properties:i};return o};QuickPulseEnvelopeFactory.aggregateProperties=function(e){var t=[];var n=e.data.baseData.measurements||{};for(var r in n){if(n.hasOwnProperty(r)){var i=n[r];var o={key:r,value:i};t.push(o)}}var s=e.data.baseData.properties||{};for(var r in s){if(s.hasOwnProperty(r)){var i=s[r];var o={key:r,value:i};t.push(o)}}return t};QuickPulseEnvelopeFactory.keys=new o.ContextTagKeys;return QuickPulseEnvelopeFactory}();e.exports=f},14:function(e,t,n){"use strict";var r=n(179);var i=n(769);var o=function(){function Traceparent(e,t){this.traceFlag=Traceparent.DEFAULT_TRACE_FLAG;this.version=Traceparent.DEFAULT_VERSION;if(e&&typeof e==="string"){if(e.split(",").length>1){this.traceId=r.w3cTraceId();this.spanId=r.w3cTraceId().substr(0,16)}else{var n=e.trim().split("-");var o=n.length;if(o>=4){this.version=n[0];this.traceId=n[1];this.spanId=n[2];this.traceFlag=n[3]}else{this.traceId=r.w3cTraceId();this.spanId=r.w3cTraceId().substr(0,16)}if(!this.version.match(/^[0-9a-f]{2}$/g)){this.version=Traceparent.DEFAULT_VERSION;this.traceId=r.w3cTraceId()}if(this.version==="00"&&o!==4){this.traceId=r.w3cTraceId();this.spanId=r.w3cTraceId().substr(0,16)}if(this.version==="ff"){this.version=Traceparent.DEFAULT_VERSION;this.traceId=r.w3cTraceId();this.spanId=r.w3cTraceId().substr(0,16)}if(!this.version.match(/^0[0-9a-f]$/g)){this.version=Traceparent.DEFAULT_VERSION}if(!this.traceFlag.match(/^[0-9a-f]{2}$/g)){this.traceFlag=Traceparent.DEFAULT_TRACE_FLAG;this.traceId=r.w3cTraceId()}if(!Traceparent.isValidTraceId(this.traceId)){this.traceId=r.w3cTraceId()}if(!Traceparent.isValidSpanId(this.spanId)){this.spanId=r.w3cTraceId().substr(0,16);this.traceId=r.w3cTraceId()}this.parentId=this.getBackCompatRequestId()}}else if(t){this.parentId=t.slice();var s=i.getRootId(t);if(!Traceparent.isValidTraceId(s)){this.legacyRootId=s;s=r.w3cTraceId()}if(t.indexOf("|")!==-1){t=t.substring(1+t.substring(0,t.length-1).lastIndexOf("."),t.length-1)}this.traceId=s;this.spanId=t}else{this.traceId=r.w3cTraceId();this.spanId=r.w3cTraceId().substr(0,16)}}Traceparent.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"};Traceparent.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"};Traceparent.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."};Traceparent.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag};Traceparent.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)};Traceparent.DEFAULT_TRACE_FLAG="01";Traceparent.DEFAULT_VERSION="00";return Traceparent}();e.exports=o},26:function(e,t,n){var r=n(519).require(),i=n(622);r.existsSync=r.existsSync||i.existsSync;e.exports=function(){var e=[],t=n(589),o=n(799),s=i.sep;function mkdirSync(e){var t=e.split(s)[0];e.split(s).forEach(function(e){if(!e||e.substr(-1,1)===":")return;t+=s+e;var n;try{n=r.statSync(t)}catch(e){r.mkdirSync(t)}if(n&&n.isFile())throw o.FILE_IN_THE_WAY.replace("%s",t)})}function findSync(e,t,n){if(typeof t==="boolean"){n=t;t=undefined}var o=[];r.readdirSync(e).forEach(function(a){var c=i.join(e,a);if(r.statSync(c).isDirectory()&&n)o=o.concat(findSync(c,t,n));if(!t||t.test(c)){o.push(i.normalize(c)+(r.statSync(c).isDirectory()?s:""))}});return o}return{makeDir:function(e){mkdirSync(e)},crc32:function(t){if(typeof t==="string"){t=Buffer.alloc(t.length,t)}var n=Buffer.alloc(4);if(!e.length){for(var r=0;r<256;r++){var i=r;for(var o=8;--o>=0;)if((i&1)!==0){i=3988292384^i>>>1}else{i=i>>>1}if(i<0){n.writeInt32LE(i,0);i=n.readUInt32LE(0)}e[r]=i}}var s=0,a=0,c=t.length,u=~s;while(--c>=0)u=e[(u^t[a++])&255]^u>>>8;s=~u;n.writeInt32LE(s&4294967295,0);return n.readUInt32LE(0)},methodToString:function(e){switch(e){case t.STORED:return"STORED ("+e+")";case t.DEFLATED:return"DEFLATED ("+e+")";default:return"UNSUPPORTED ("+e+")"}},writeFileTo:function(e,t,n,o){if(r.existsSync(e)){if(!n)return false;var s=r.statSync(e);if(s.isDirectory()){return false}}var a=i.dirname(e);if(!r.existsSync(a)){mkdirSync(a)}var c;try{c=r.openSync(e,"w",438)}catch(t){r.chmodSync(e,438);c=r.openSync(e,"w",438)}if(c){try{r.writeSync(c,t,0,t.length,0)}catch(e){throw e}finally{r.closeSync(c)}}r.chmodSync(e,o||438);return true},writeFileToAsync:function(e,t,n,o,s){if(typeof o==="function"){s=o;o=undefined}r.exists(e,function(a){if(a&&!n)return s(false);r.stat(e,function(n,c){if(a&&c.isDirectory()){return s(false)}var u=i.dirname(e);r.exists(u,function(n){if(!n)mkdirSync(u);r.open(e,"w",438,function(n,i){if(n){r.chmod(e,438,function(){r.open(e,"w",438,function(n,i){r.write(i,t,0,t.length,0,function(){r.close(i,function(){r.chmod(e,o||438,function(){s(true)})})})})})}else{if(i){r.write(i,t,0,t.length,0,function(){r.close(i,function(){r.chmod(e,o||438,function(){s(true)})})})}else{r.chmod(e,o||438,function(){s(true)})}}})})})})},findFiles:function(e){return findSync(e,true)},getAttributes:function(e){},setAttributes:function(e){},toBuffer:function(e){if(Buffer.isBuffer(e)){return e}else{if(e.length===0){return Buffer.alloc(0)}return Buffer.from(e,"utf8")}},Constants:t,Errors:o}}()},29:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(287);var i=n(716);var o=n(513);var s=n(466);var a=n(366);var c=n(459);var u=n(769);var f=n(970);var l=n(733);var p=n(111);t.TelemetryClient=n(503);t.Contracts=n(367);var d;(function(e){e[e["AI"]=0]="AI";e[e["AI_AND_W3C"]=1]="AI_AND_W3C"})(d=t.DistributedTracingModes||(t.DistributedTracingModes={}));var h=true;var v=false;var y=true;var g=true;var m=true;var C=true;var E=true;var _=true;var T;var I=false;var w=true;var S;var A=undefined;var b=undefined;var N;var D;var x;var R;var P;var O;var L=false;var k;function setup(e){if(!t.defaultClient){t.defaultClient=new t.TelemetryClient(e);N=new i(t.defaultClient);D=new o(t.defaultClient);x=new s(t.defaultClient);P=new c(t.defaultClient);O=new a(t.defaultClient);if(!R){R=new p.AutoCollectNativePerformance(t.defaultClient)}}else{f.info("The default client is already setup")}if(t.defaultClient&&t.defaultClient.channel){t.defaultClient.channel.setUseDiskRetryCaching(E,A,b)}return F}t.setup=setup;function start(){if(!!t.defaultClient){L=true;N.enable(h,v);D.enable(y);x.enable(g);R.enable(w,S);P.useAutoCorrelation(_,T);P.enable(m);O.enable(C);if(t.liveMetricsClient&&I){t.liveMetricsClient.enable(I)}}else{f.warn("Start cannot be called before setup")}return F}t.start=start;function getCorrelationContext(){if(_){return r.CorrelationContextManager.getCurrentContext()}return null}t.getCorrelationContext=getCorrelationContext;function wrapWithCorrelationContext(e){return r.CorrelationContextManager.wrapCallback(e)}t.wrapWithCorrelationContext=wrapWithCorrelationContext;var F=function(){function Configuration(){}Configuration.setDistributedTracingMode=function(e){u.w3cEnabled=e===d.AI_AND_W3C;return Configuration};Configuration.setAutoCollectConsole=function(e,t){if(t===void 0){t=false}h=e;v=t;if(L){N.enable(e,t)}return Configuration};Configuration.setAutoCollectExceptions=function(e){y=e;if(L){D.enable(e)}return Configuration};Configuration.setAutoCollectPerformance=function(e,t){if(t===void 0){t=true}g=e;var n=p.AutoCollectNativePerformance.parseEnabled(t);w=n.isEnabled;S=n.disabledMetrics;if(L){x.enable(e);R.enable(n.isEnabled,n.disabledMetrics)}return Configuration};Configuration.setAutoCollectRequests=function(e){m=e;if(L){P.enable(e)}return Configuration};Configuration.setAutoCollectDependencies=function(e){C=e;if(L){O.enable(e)}return Configuration};Configuration.setAutoDependencyCorrelation=function(e,t){_=e;T=t;if(L){P.useAutoCorrelation(e,t)}return Configuration};Configuration.setUseDiskRetryCaching=function(e,n,r){E=e;A=n;b=r;if(t.defaultClient&&t.defaultClient.channel){t.defaultClient.channel.setUseDiskRetryCaching(e,n,r)}return Configuration};Configuration.setInternalLogging=function(e,t){if(e===void 0){e=false}if(t===void 0){t=true}f.enableDebug=e;f.disableWarnings=!t;return Configuration};Configuration.setSendLiveMetrics=function(e){if(e===void 0){e=false}if(!t.defaultClient){f.warn("Live metrics client cannot be setup without the default client");return Configuration}if(!t.liveMetricsClient){t.liveMetricsClient=new l(t.defaultClient.config.instrumentationKey);k=new s(t.liveMetricsClient,1e3,true);t.liveMetricsClient.addCollector(k);t.defaultClient.quickPulseClient=t.liveMetricsClient;I=e}else{t.liveMetricsClient.enable(e)}return Configuration};Configuration.start=start;return Configuration}();t.Configuration=F;function dispose(){t.defaultClient=null;L=false;if(N){N.dispose()}if(D){D.dispose()}if(x){x.dispose()}if(R){R.dispose()}if(P){P.dispose()}if(O){O.dispose()}}t.dispose=dispose},33:function(e){"use strict";var t;(function(e){e[e["Verbose"]=0]="Verbose";e[e["Information"]=1]="Information";e[e["Warning"]=2]="Warning";e[e["Error"]=3]="Error";e[e["Critical"]=4]="Critical"})(t||(t={}));e.exports=t},36:function(e){"use strict";e.exports=((e,t)=>{return class WrappedPromise extends e{constructor(e){var n,r;super(wrappedExecutor);var i=this;try{e.apply(n,r)}catch(e){r[1](e)}return i;function wrappedExecutor(e,o){n=this;r=[wrappedResolve,wrappedReject];function wrappedResolve(n){t(i,false);return e(n)}function wrappedReject(e){t(i,false);return o(e)}}}}})},37:function(e){"use strict";function PromiseWrap(){}e.exports=function patchPromise(){const e=this._hooks;const t=this._state;const n=global.Promise;const r=n.prototype.then;n.prototype.then=wrappedThen;function makeWrappedHandler(t,n,r,i){if("function"!==typeof t){return i?makeUnhandledResolutionHandler(r):makeUnhandledRejectionHandler(r)}return function wrappedHandler(){e.pre.call(n,r);try{return t.apply(this,arguments)}finally{e.post.call(n,r,false);e.destroy.call(null,r)}}}function makeUnhandledResolutionHandler(t){return function unhandledResolutionHandler(n){e.destroy.call(null,t);return n}}function makeUnhandledRejectionHandler(t){return function unhandledRejectedHandler(n){e.destroy.call(null,t);throw n}}function wrappedThen(n,i){if(!t.enabled)return r.call(this,n,i);const o=new PromiseWrap;const s=--t.counter;e.init.call(o,s,0,null,null);return r.call(this,makeWrappedHandler(n,o,s,true),makeWrappedHandler(i,o,s,false))}}},39:function(e,t,n){"use strict";var r=n(769);var i=n(753);var o=n(701);var s=n(835);var a=function(){function Config(e){var t=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var n=process.env[Config.ENV_connectionString];var r=i.parse(e);var a=i.parse(n);var c=!r.instrumentationkey&&Object.keys(r).length>0?null:e;this.instrumentationKey=r.instrumentationkey||c||a.instrumentationkey||Config._getInstrumentationKey();this.endpointUrl=(r.ingestionendpoint||a.ingestionendpoint||this.endpointBase)+"/v2/track";this.maxBatchSize=250;this.maxBatchIntervalMs=15e3;this.disableAppInsights=false;this.samplingPercentage=100;this.correlationIdRetryIntervalMs=30*1e3;this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net"];this.setCorrelationId=function(e){return t.correlationId=e};this.profileQueryEndpoint=r.ingestionendpoint||a.ingestionendpoint||process.env[Config.ENV_profileQueryEndpoint]||this.endpointBase;this.proxyHttpUrl=process.env[Config.ENV_http_proxy]||undefined;this.proxyHttpsUrl=process.env[Config.ENV_https_proxy]||undefined;this.httpAgent=undefined;this.httpsAgent=undefined;this._quickPulseHost=r.liveendpoint||a.liveendpoint||process.env[Config.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST;if(this._quickPulseHost.match(/^https?:\/\//)){this._quickPulseHost=s.parse(this._quickPulseHost).host}}Object.defineProperty(Config.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){r.cancelCorrelationIdQuery(this,this.setCorrelationId);this._profileQueryEndpoint=e;this.correlationId=r.correlationIdPrefix;r.queryCorrelationId(this,this.setCorrelationId)},enumerable:true,configurable:true});Object.defineProperty(Config.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:true,configurable:true});Config._getInstrumentationKey=function(){var e=process.env[Config.ENV_iKey]||process.env[Config.ENV_azurePrefix+Config.ENV_iKey]||process.env[Config.legacy_ENV_iKey]||process.env[Config.ENV_azurePrefix+Config.legacy_ENV_iKey];if(!e||e==""){throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server")}return e};Config.ENV_azurePrefix="APPSETTING_";Config.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY";Config.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY";Config.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT";Config.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST";Config.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING";Config.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC";Config.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS";Config.ENV_http_proxy="http_proxy";Config.ENV_https_proxy="https_proxy";return Config}();e.exports=a},54:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(953);"use strict";var o=function(e){r(PageViewData,e);function PageViewData(){var t=e.call(this)||this;t.ver=2;t.properties={};t.measurements={};return t}return PageViewData}(i);e.exports=o},82:function(e){e.exports=require("console")},87:function(e){e.exports=require("os")},105:function(e,t){t=e.exports=SemVer;var n;if(typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)){n=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER");console.log.apply(console,e)}}else{n=function(){}}t.SEMVER_SPEC_VERSION="2.0.0";var r=256;var i=Number.MAX_SAFE_INTEGER||9007199254740991;var o=16;var s=t.re=[];var a=t.src=[];var c=0;var u=c++;a[u]="0|[1-9]\\d*";var f=c++;a[f]="[0-9]+";var l=c++;a[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;a[p]="("+a[u]+")\\."+"("+a[u]+")\\."+"("+a[u]+")";var d=c++;a[d]="("+a[f]+")\\."+"("+a[f]+")\\."+"("+a[f]+")";var h=c++;a[h]="(?:"+a[u]+"|"+a[l]+")";var v=c++;a[v]="(?:"+a[f]+"|"+a[l]+")";var y=c++;a[y]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var g=c++;a[g]="(?:-?("+a[v]+"(?:\\."+a[v]+")*))";var m=c++;a[m]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[m]+"(?:\\."+a[m]+")*))";var E=c++;var _="v?"+a[p]+a[y]+"?"+a[C]+"?";a[E]="^"+_+"$";var T="[v=\\s]*"+a[d]+a[g]+"?"+a[C]+"?";var I=c++;a[I]="^"+T+"$";var w=c++;a[w]="((?:<|>)?=?)";var S=c++;a[S]=a[f]+"|x|X|\\*";var A=c++;a[A]=a[u]+"|x|X|\\*";var b=c++;a[b]="[v=\\s]*("+a[A]+")"+"(?:\\.("+a[A]+")"+"(?:\\.("+a[A]+")"+"(?:"+a[y]+")?"+a[C]+"?"+")?)?";var N=c++;a[N]="[v=\\s]*("+a[S]+")"+"(?:\\.("+a[S]+")"+"(?:\\.("+a[S]+")"+"(?:"+a[g]+")?"+a[C]+"?"+")?)?";var D=c++;a[D]="^"+a[w]+"\\s*"+a[b]+"$";var x=c++;a[x]="^"+a[w]+"\\s*"+a[N]+"$";var R=c++;a[R]="(?:^|[^\\d])"+"(\\d{1,"+o+"})"+"(?:\\.(\\d{1,"+o+"}))?"+"(?:\\.(\\d{1,"+o+"}))?"+"(?:$|[^\\d])";var P=c++;a[P]="(?:~>?)";var O=c++;a[O]="(\\s*)"+a[P]+"\\s+";s[O]=new RegExp(a[O],"g");var L="$1~";var k=c++;a[k]="^"+a[P]+a[b]+"$";var F=c++;a[F]="^"+a[P]+a[N]+"$";var q=c++;a[q]="(?:\\^)";var H=c++;a[H]="(\\s*)"+a[q]+"\\s+";s[H]=new RegExp(a[H],"g");var j="$1^";var M=c++;a[M]="^"+a[q]+a[b]+"$";var U=c++;a[U]="^"+a[q]+a[N]+"$";var V=c++;a[V]="^"+a[w]+"\\s*("+T+")$|^$";var B=c++;a[B]="^"+a[w]+"\\s*("+_+")$|^$";var $=c++;a[$]="(\\s*)"+a[w]+"\\s*("+T+"|"+a[b]+")";s[$]=new RegExp(a[$],"g");var Q="$1$2$3";var G=c++;a[G]="^\\s*("+a[b]+")"+"\\s+-\\s+"+"("+a[b]+")"+"\\s*$";var W=c++;a[W]="^\\s*("+a[N]+")"+"\\s+-\\s+"+"("+a[N]+")"+"\\s*$";var X=c++;a[X]="(<|>)?=?\\s*\\*";for(var z=0;z<c;z++){n(z,a[z]);if(!s[z]){s[z]=new RegExp(a[z])}}t.parse=parse;function parse(e,t){if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}if(e instanceof SemVer){return e}if(typeof e!=="string"){return null}if(e.length>r){return null}var n=t.loose?s[I]:s[E];if(!n.test(e)){return null}try{return new SemVer(e,t)}catch(e){return null}}t.valid=valid;function valid(e,t){var n=parse(e,t);return n?n.version:null}t.clean=clean;function clean(e,t){var n=parse(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}t.SemVer=SemVer;function SemVer(e,t){if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}if(e instanceof SemVer){if(e.loose===t.loose){return e}else{e=e.version}}else if(typeof e!=="string"){throw new TypeError("Invalid Version: "+e)}if(e.length>r){throw new TypeError("version is longer than "+r+" characters")}if(!(this instanceof SemVer)){return new SemVer(e,t)}n("SemVer",e,t);this.options=t;this.loose=!!t.loose;var o=e.trim().match(t.loose?s[I]:s[E]);if(!o){throw new TypeError("Invalid Version: "+e)}this.raw=e;this.major=+o[1];this.minor=+o[2];this.patch=+o[3];if(this.major>i||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>i||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>i||this.patch<0){throw new TypeError("Invalid patch version")}if(!o[4]){this.prerelease=[]}else{this.prerelease=o[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i){return t}}return e})}this.build=o[5]?o[5].split("."):[];this.format()}SemVer.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;if(this.prerelease.length){this.version+="-"+this.prerelease.join(".")}return this.version};SemVer.prototype.toString=function(){return this.version};SemVer.prototype.compare=function(e){n("SemVer.compare",this.version,this.options,e);if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}return this.compareMain(e)||this.comparePre(e)};SemVer.prototype.compareMain=function(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}return compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)};SemVer.prototype.comparePre=function(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}if(this.prerelease.length&&!e.prerelease.length){return-1}else if(!this.prerelease.length&&e.prerelease.length){return 1}else if(!this.prerelease.length&&!e.prerelease.length){return 0}var t=0;do{var r=this.prerelease[t];var i=e.prerelease[t];n("prerelease compare",t,r,i);if(r===undefined&&i===undefined){return 0}else if(i===undefined){return 1}else if(r===undefined){return-1}else if(r===i){continue}else{return compareIdentifiers(r,i)}}while(++t)};SemVer.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",t);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",t);break;case"prepatch":this.prerelease.length=0;this.inc("patch",t);this.inc("pre",t);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",t)}this.inc("pre",t);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0]}else{var n=this.prerelease.length;while(--n>=0){if(typeof this.prerelease[n]==="number"){this.prerelease[n]++;n=-2}}if(n===-1){this.prerelease.push(0)}}if(t){if(this.prerelease[0]===t){if(isNaN(this.prerelease[1])){this.prerelease=[t,0]}}else{this.prerelease=[t,0]}}break;default:throw new Error("invalid increment argument: "+e)}this.format();this.raw=this.version;return this};t.inc=inc;function inc(e,t,n,r){if(typeof n==="string"){r=n;n=undefined}try{return new SemVer(e,n).inc(t,r).version}catch(e){return null}}t.diff=diff;function diff(e,t){if(eq(e,t)){return null}else{var n=parse(e);var r=parse(t);var i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n){if(s==="major"||s==="minor"||s==="patch"){if(n[s]!==r[s]){return i+s}}}return o}}t.compareIdentifiers=compareIdentifiers;var Y=/^[0-9]+$/;function compareIdentifiers(e,t){var n=Y.test(e);var r=Y.test(t);if(n&&r){e=+e;t=+t}return e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}t.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(e,t){return compareIdentifiers(t,e)}t.major=major;function major(e,t){return new SemVer(e,t).major}t.minor=minor;function minor(e,t){return new SemVer(e,t).minor}t.patch=patch;function patch(e,t){return new SemVer(e,t).patch}t.compare=compare;function compare(e,t,n){return new SemVer(e,n).compare(new SemVer(t,n))}t.compareLoose=compareLoose;function compareLoose(e,t){return compare(e,t,true)}t.rcompare=rcompare;function rcompare(e,t,n){return compare(t,e,n)}t.sort=sort;function sort(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})}t.rsort=rsort;function rsort(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})}t.gt=gt;function gt(e,t,n){return compare(e,t,n)>0}t.lt=lt;function lt(e,t,n){return compare(e,t,n)<0}t.eq=eq;function eq(e,t,n){return compare(e,t,n)===0}t.neq=neq;function neq(e,t,n){return compare(e,t,n)!==0}t.gte=gte;function gte(e,t,n){return compare(e,t,n)>=0}t.lte=lte;function lte(e,t,n){return compare(e,t,n)<=0}t.cmp=cmp;function cmp(e,t,n,r){switch(t){case"===":if(typeof e==="object")e=e.version;if(typeof n==="object")n=n.version;return e===n;case"!==":if(typeof e==="object")e=e.version;if(typeof n==="object")n=n.version;return e!==n;case"":case"=":case"==":return eq(e,n,r);case"!=":return neq(e,n,r);case">":return gt(e,n,r);case">=":return gte(e,n,r);case"<":return lt(e,n,r);case"<=":return lte(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}t.Comparator=Comparator;function Comparator(e,t){if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}if(e instanceof Comparator){if(e.loose===!!t.loose){return e}else{e=e.value}}if(!(this instanceof Comparator)){return new Comparator(e,t)}n("comparator",e,t);this.options=t;this.loose=!!t.loose;this.parse(e);if(this.semver===K){this.value=""}else{this.value=this.operator+this.semver.version}n("comp",this)}var K={};Comparator.prototype.parse=function(e){var t=this.options.loose?s[V]:s[B];var n=e.match(t);if(!n){throw new TypeError("Invalid comparator: "+e)}this.operator=n[1];if(this.operator==="="){this.operator=""}if(!n[2]){this.semver=K}else{this.semver=new SemVer(n[2],this.options.loose)}};Comparator.prototype.toString=function(){return this.value};Comparator.prototype.test=function(e){n("Comparator.test",e,this.options.loose);if(this.semver===K){return true}if(typeof e==="string"){e=new SemVer(e,this.options)}return cmp(e,this.operator,this.semver,this.options)};Comparator.prototype.intersects=function(e,t){if(!(e instanceof Comparator)){throw new TypeError("a Comparator is required")}if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}var n;if(this.operator===""){n=new Range(e.value,t);return satisfies(this.value,n,t)}else if(e.operator===""){n=new Range(this.value,t);return satisfies(e.semver,n,t)}var r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">");var i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<");var o=this.semver.version===e.semver.version;var s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<=");var a=cmp(this.semver,"<",e.semver,t)&&((this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"));var c=cmp(this.semver,">",e.semver,t)&&((this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">"));return r||i||o&&s||a||c};t.Range=Range;function Range(e,t){if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}if(e instanceof Range){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{return new Range(e.raw,t)}}if(e instanceof Comparator){return new Range(e.value,t)}if(!(this instanceof Range)){return new Range(e,t)}this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;this.raw=e;this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length});if(!this.set.length){throw new TypeError("Invalid SemVer Range: "+e)}this.format()}Range.prototype.format=function(){this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim();return this.range};Range.prototype.toString=function(){return this.range};Range.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?s[W]:s[G];e=e.replace(r,hyphenReplace);n("hyphen replace",e);e=e.replace(s[$],Q);n("comparator trim",e,s[$]);e=e.replace(s[O],L);e=e.replace(s[H],j);e=e.split(/\s+/).join(" ");var i=t?s[V]:s[B];var o=e.split(" ").map(function(e){return parseComparator(e,this.options)},this).join(" ").split(/\s+/);if(this.options.loose){o=o.filter(function(e){return!!e.match(i)})}o=o.map(function(e){return new Comparator(e,this.options)},this);return o};Range.prototype.intersects=function(e,t){if(!(e instanceof Range)){throw new TypeError("a Range is required")}return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})};t.toComparators=toComparators;function toComparators(e,t){return new Range(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})}function parseComparator(e,t){n("comp",e,t);e=replaceCarets(e,t);n("caret",e);e=replaceTildes(e,t);n("tildes",e);e=replaceXRanges(e,t);n("xrange",e);e=replaceStars(e,t);n("stars",e);return e}function isX(e){return!e||e.toLowerCase()==="x"||e==="*"}function replaceTildes(e,t){return e.trim().split(/\s+/).map(function(e){return replaceTilde(e,t)}).join(" ")}function replaceTilde(e,t){var r=t.loose?s[F]:s[k];return e.replace(r,function(t,r,i,o,s){n("tilde",e,t,r,i,o,s);var a;if(isX(r)){a=""}else if(isX(i)){a=">="+r+".0.0 <"+(+r+1)+".0.0"}else if(isX(o)){a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0"}else if(s){n("replaceTilde pr",s);a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"}else{a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0"}n("tilde return",a);return a})}function replaceCarets(e,t){return e.trim().split(/\s+/).map(function(e){return replaceCaret(e,t)}).join(" ")}function replaceCaret(e,t){n("caret",e,t);var r=t.loose?s[U]:s[M];return e.replace(r,function(t,r,i,o,s){n("caret",e,t,r,i,o,s);var a;if(isX(r)){a=""}else if(isX(i)){a=">="+r+".0.0 <"+(+r+1)+".0.0"}else if(isX(o)){if(r==="0"){a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0"}else{a=">="+r+"."+i+".0 <"+(+r+1)+".0.0"}}else if(s){n("replaceCaret pr",s);if(r==="0"){if(i==="0"){a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1)}else{a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"}}else{a=">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"}}else{n("no pr");if(r==="0"){if(i==="0"){a=">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1)}else{a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0"}}else{a=">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"}}n("caret return",a);return a})}function replaceXRanges(e,t){n("replaceXRanges",e,t);return e.split(/\s+/).map(function(e){return replaceXRange(e,t)}).join(" ")}function replaceXRange(e,t){e=e.trim();var r=t.loose?s[x]:s[D];return e.replace(r,function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=isX(i);var u=c||isX(o);var f=u||isX(s);var l=f;if(r==="="&&l){r=""}if(c){if(r===">"||r==="<"){t="<0.0.0"}else{t="*"}}else if(r&&l){if(u){o=0}s=0;if(r===">"){r=">=";if(u){i=+i+1;o=0;s=0}else{o=+o+1;s=0}}else if(r==="<="){r="<";if(u){i=+i+1}else{o=+o+1}}t=r+i+"."+o+"."+s}else if(u){t=">="+i+".0.0 <"+(+i+1)+".0.0"}else if(f){t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"}n("xRange return",t);return t})}function replaceStars(e,t){n("replaceStars",e,t);return e.trim().replace(s[X],"")}function hyphenReplace(e,t,n,r,i,o,s,a,c,u,f,l,p){if(isX(n)){t=""}else if(isX(r)){t=">="+n+".0.0"}else if(isX(i)){t=">="+n+"."+r+".0"}else{t=">="+t}if(isX(c)){a=""}else if(isX(u)){a="<"+(+c+1)+".0.0"}else if(isX(f)){a="<"+c+"."+(+u+1)+".0"}else if(l){a="<="+c+"."+u+"."+f+"-"+l}else{a="<="+a}return(t+" "+a).trim()}Range.prototype.test=function(e){if(!e){return false}if(typeof e==="string"){e=new SemVer(e,this.options)}for(var t=0;t<this.set.length;t++){if(testSet(this.set[t],e,this.options)){return true}}return false};function testSet(e,t,r){for(var i=0;i<e.length;i++){if(!e[i].test(t)){return false}}if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++){n(e[i].semver);if(e[i].semver===K){continue}if(e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch){return true}}}return false}return true}t.satisfies=satisfies;function satisfies(e,t,n){try{t=new Range(t,n)}catch(e){return false}return t.test(e)}t.maxSatisfying=maxSatisfying;function maxSatisfying(e,t,n){var r=null;var i=null;try{var o=new Range(t,n)}catch(e){return null}e.forEach(function(e){if(o.test(e)){if(!r||i.compare(e)===-1){r=e;i=new SemVer(r,n)}}});return r}t.minSatisfying=minSatisfying;function minSatisfying(e,t,n){var r=null;var i=null;try{var o=new Range(t,n)}catch(e){return null}e.forEach(function(e){if(o.test(e)){if(!r||i.compare(e)===1){r=e;i=new SemVer(r,n)}}});return r}t.minVersion=minVersion;function minVersion(e,t){e=new Range(e,t);var n=new SemVer("0.0.0");if(e.test(n)){return n}n=new SemVer("0.0.0-0");if(e.test(n)){return n}n=null;for(var r=0;r<e.set.length;++r){var i=e.set[r];i.forEach(function(e){var t=new SemVer(e.semver.version);switch(e.operator){case">":if(t.prerelease.length===0){t.patch++}else{t.prerelease.push(0)}t.raw=t.format();case"":case">=":if(!n||gt(n,t)){n=t}break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}if(n&&e.test(n)){return n}return null}t.validRange=validRange;function validRange(e,t){try{return new Range(e,t).range||"*"}catch(e){return null}}t.ltr=ltr;function ltr(e,t,n){return outside(e,t,"<",n)}t.gtr=gtr;function gtr(e,t,n){return outside(e,t,">",n)}t.outside=outside;function outside(e,t,n,r){e=new SemVer(e,r);t=new Range(t,r);var i,o,s,a,c;switch(n){case">":i=gt;o=lte;s=lt;a=">";c=">=";break;case"<":i=lt;o=gte;s=gt;a="<";c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(e,t,r)){return false}for(var u=0;u<t.set.length;++u){var f=t.set[u];var l=null;var p=null;f.forEach(function(e){if(e.semver===K){e=new Comparator(">=0.0.0")}l=l||e;p=p||e;if(i(e.semver,l.semver,r)){l=e}else if(s(e.semver,p.semver,r)){p=e}});if(l.operator===a||l.operator===c){return false}if((!p.operator||p.operator===a)&&o(e,p.semver)){return false}else if(p.operator===c&&s(e,p.semver)){return false}}return true}t.prerelease=prerelease;function prerelease(e,t){var n=parse(e,t);return n&&n.prerelease.length?n.prerelease:null}t.intersects=intersects;function intersects(e,t,n){e=new Range(e,n);t=new Range(t,n);return e.intersects(t)}t.coerce=coerce;function coerce(e){if(e instanceof SemVer){return e}if(typeof e!=="string"){return null}var t=e.match(s[R]);if(t==null){return null}return parse(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},111:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};Object.defineProperty(t,"__esModule",{value:true});var i=n(39);var o=n(485);var s=n(970);var a=function(){function AutoCollectNativePerformance(e){this._disabledMetrics={};if(AutoCollectNativePerformance.INSTANCE){AutoCollectNativePerformance.INSTANCE.dispose()}AutoCollectNativePerformance.INSTANCE=this;this._client=e}AutoCollectNativePerformance.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6};AutoCollectNativePerformance.prototype.enable=function(e,t,r){var i=this;if(t===void 0){t={}}if(r===void 0){r=6e4}if(!AutoCollectNativePerformance.isNodeVersionCompatible()){return}if(AutoCollectNativePerformance._metricsAvailable==undefined&&e&&!this._isInitialized){try{var o=n(660);AutoCollectNativePerformance._emitter=new o;AutoCollectNativePerformance._metricsAvailable=true;s.info("Native metrics module successfully loaded!")}catch(e){AutoCollectNativePerformance._metricsAvailable=false;return}}this._isEnabled=e;this._disabledMetrics=t;if(this._isEnabled&&!this._isInitialized){this._isInitialized=true}if(this._isEnabled&&AutoCollectNativePerformance._emitter){AutoCollectNativePerformance._emitter.enable(true,r);this._handle=setInterval(function(){return i._trackNativeMetrics()},r);this._handle.unref()}else if(AutoCollectNativePerformance._emitter){AutoCollectNativePerformance._emitter.enable(false);if(this._handle){clearInterval(this._handle);this._handle=undefined}}};AutoCollectNativePerformance.prototype.dispose=function(){this.enable(false)};AutoCollectNativePerformance.parseEnabled=function(e){var t=process.env[i.ENV_nativeMetricsDisableAll];var n=process.env[i.ENV_nativeMetricsDisablers];if(t){return{isEnabled:false,disabledMetrics:{}}}if(n){var o=n.split(",");var s={};if(o.length>0){for(var a=0,c=o;a<c.length;a++){var u=c[a];s[u]=true}}if(typeof e==="object"){return{isEnabled:true,disabledMetrics:r({},e,s)}}return{isEnabled:e,disabledMetrics:s}}if(typeof e==="boolean"){return{isEnabled:e,disabledMetrics:{}}}else{return{isEnabled:true,disabledMetrics:e}}};AutoCollectNativePerformance.prototype._trackNativeMetrics=function(){var e=true;if(typeof this._isEnabled!=="object"){e=this._isEnabled}if(e){this._trackGarbageCollection();this._trackEventLoop();this._trackHeapUsage()}};AutoCollectNativePerformance.prototype._trackGarbageCollection=function(){if(this._disabledMetrics.gc){return}var e=AutoCollectNativePerformance._emitter.getGCData();for(var t in e){var n=e[t].metrics;var r=t+" Garbage Collection Duration";var i=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:r,value:n.total,count:n.count,max:n.max,min:n.min,stdDev:i,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,s)})}var s};AutoCollectNativePerformance.prototype._trackEventLoop=function(){if(this._disabledMetrics.loop){return}var e=AutoCollectNativePerformance._emitter.getLoopData();var t=e.loopUsage;if(t.count==0){return}var n="Event Loop CPU Time";var r=Math.sqrt(t.sumSquares/t.count-Math.pow(t.total/t.count,2))||0;this._client.trackMetric({name:n,value:t.total,count:t.count,min:t.min,max:t.max,stdDev:r,tagOverrides:(i={},i[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,i)});var i};AutoCollectNativePerformance.prototype._trackHeapUsage=function(){if(this._disabledMetrics.heap){return}var e=process.memoryUsage();var t=e.heapUsed,n=e.heapTotal,r=e.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:t,count:1,tagOverrides:(i={},i[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,i)});this._client.trackMetric({name:"Memory Total (Heap)",value:n,count:1,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,s)});this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:r-n,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,a)});var i,s,a};return AutoCollectNativePerformance}();t.AutoCollectNativePerformance=a},122:function(e){"use strict";var t=function(){function Envelope(){this.ver=1;this.sampleRate=100;this.tags={}}return Envelope}();e.exports=t},129:function(e){e.exports=require("child_process")},151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(367);var i=n(243);var o=[];var s={syslog:function(e){var t={emerg:r.SeverityLevel.Critical,alert:r.SeverityLevel.Critical,crit:r.SeverityLevel.Critical,error:r.SeverityLevel.Error,warning:r.SeverityLevel.Warning,notice:r.SeverityLevel.Information,info:r.SeverityLevel.Information,debug:r.SeverityLevel.Verbose};return t[e]===undefined?r.SeverityLevel.Information:t[e]},npm:function(e){var t={error:r.SeverityLevel.Error,warn:r.SeverityLevel.Warning,info:r.SeverityLevel.Information,verbose:r.SeverityLevel.Verbose,debug:r.SeverityLevel.Verbose,silly:r.SeverityLevel.Verbose};return t[e]===undefined?r.SeverityLevel.Information:t[e]},unknown:function(e){return r.SeverityLevel.Information}};var a=function(e){var t=e.data.message;o.forEach(function(n){if(t instanceof Error){n.trackException({exception:t,properties:e.data.meta})}else{var r=s[e.data.levelKind](e.data.level);n.trackTrace({message:t,severity:r,properties:e.data.meta})}})};function enable(e,t){if(e){if(o.length===0){i.channel.subscribe("winston",a)}o.push(t)}else{o=o.filter(function(e){return e!=t});if(o.length===0){i.channel.unsubscribe("winston",a)}}}t.enable=enable;function dispose(){i.channel.unsubscribe("winston",a);o=[]}t.dispose=dispose},164:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(472);"use strict";var o=function(e){r(MessageData,e);function MessageData(){var t=e.call(this)||this;t.ver=2;t.properties={};return t}return MessageData}(i);e.exports=o},167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AvailabilityData=n(191);t.Base=n(645);t.ContextTagKeys=n(603);t.Data=n(930);t.DataPoint=n(941);t.DataPointType=n(221);t.Domain=n(472);t.Envelope=n(122);t.EventData=n(953);t.ExceptionData=n(790);t.ExceptionDetails=n(919);t.MessageData=n(164);t.MetricData=n(989);t.PageViewData=n(54);t.RemoteDependencyData=n(671);t.RequestData=n(950);t.SeverityLevel=n(33);t.StackFrame=n(280)},175:function(e,t,n){"use strict";var r=n(835);var i=n(39);var o=n(485);var s=n(367);var a=n(528);var c=n(414);var u=n(287);var f=n(686);var l=n(179);var p=n(970);var d=n(555);var h=function(){function TelemetryClient(e){this._telemetryProcessors=[];var t=new i(e);this.config=t;this.context=new o;this.commonProperties={};var n=new f(this.config);this.channel=new a(function(){return t.disableAppInsights},function(){return t.maxBatchSize},function(){return t.maxBatchIntervalMs},n)}TelemetryClient.prototype.trackAvailability=function(e){this.track(e,s.TelemetryType.Availability)};TelemetryClient.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)};TelemetryClient.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)};TelemetryClient.prototype.trackException=function(e){if(e&&e.exception&&!l.isError(e.exception)){e.exception=new Error(e.exception.toString())}this.track(e,s.TelemetryType.Exception)};TelemetryClient.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)};TelemetryClient.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)};TelemetryClient.prototype.trackDependency=function(e){if(e&&!e.target&&e.data){e.target=r.parse(e.data).host}this.track(e,s.TelemetryType.Dependency)};TelemetryClient.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:false,e?e.callback:undefined)};TelemetryClient.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var n=d.createEnvelope(e,t,this.commonProperties,this.context,this.config);if(e.time){n.time=e.time.toISOString()}var r=this.runTelemetryProcessors(n,e.contextObjects);r=r&&c.samplingTelemetryProcessor(n,{correlationContext:u.CorrelationContextManager.getCurrentContext()});c.performanceMetricsTelemetryProcessor(n,this.quickPulseClient);if(r){this.channel.send(n)}}else{p.warn("track() requires telemetry object and telemetryType to be specified.")}};TelemetryClient.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)};TelemetryClient.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]};TelemetryClient.prototype.runTelemetryProcessors=function(e,t){var n=true;var r=this._telemetryProcessors.length;if(r===0){return n}t=t||{};t["correlationContext"]=u.CorrelationContextManager.getCurrentContext();for(var i=0;i<r;++i){try{var o=this._telemetryProcessors[i];if(o){if(o.apply(null,[e,t])===false){n=false;break}}}catch(t){n=true;p.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}}return n};return TelemetryClient}();e.exports=h},179:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};var i=n(605);var o=n(211);var s=n(835);var a=n(619);var c=n(970);var u=n(328);var f=function(){function Util(){}Util.getCookie=function(e,t){var n="";if(e&&e.length&&typeof t==="string"){var r=e+"=";var i=t.split(";");for(var o=0;o<i.length;o++){var t=i[o];t=Util.trim(t);if(t&&t.indexOf(r)===0){n=t.substring(r.length,i[o].length);break}}}return n};Util.trim=function(e){if(typeof e==="string"){return e.replace(/^\s+|\s+$/g,"")}else{return""}};Util.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)};var n=function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)};var r=e.map(n).join("");var i=Buffer.from?Buffer.from(r,"binary"):new Buffer(r,"binary");var o=i.toString("base64");return o.substr(0,o.indexOf("="))};Util.random32=function(){return 4294967296*Math.random()|0};Util.randomu32=function(){return Util.random32()+2147483648};Util.w3cTraceId=function(){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];var t="",n;for(var r=0;r<4;r++){n=Util.random32();t+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15]}var i=e[8+Math.random()*4|0];return t.substr(0,8)+t.substr(9,4)+"4"+t.substr(13,3)+i+t.substr(16,3)+t.substr(19,12)};Util.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"};Util.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"};Util.isError=function(e){return e instanceof Error};Util.isPrimitive=function(e){var t=typeof e;return t==="string"||t==="number"||t==="boolean"};Util.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"};Util.msToTimeSpan=function(e){if(isNaN(e)||e<0){e=0}var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,"");var n=""+Math.floor(e/(1e3*60))%60;var r=""+Math.floor(e/(1e3*60*60))%24;var i=Math.floor(e/(1e3*60*60*24));t=t.indexOf(".")<2?"0"+t:t;n=n.length<2?"0"+n:n;r=r.length<2?"0"+r:r;var o=i>0?i+".":"";return o+r+":"+n+":"+t};Util.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}};Util.extractObject=function(e){if(e instanceof Error){return Util.extractError(e)}if(typeof e.toJSON==="function"){return e.toJSON()}return e};Util.validateStringMap=function(e){if(typeof e!=="object"){c.info("Invalid properties dropped from payload");return}var t={};for(var n in e){var r="";var i=e[n];var o=typeof i;if(Util.isPrimitive(i)){r=i.toString()}else if(i===null||o==="undefined"){r=""}else if(o==="function"){c.info("key: "+n+" was function; will not serialize");continue}else{var s=Util.isArray(i)?i:Util.extractObject(i);try{if(Util.isPrimitive(s)){r=s}else{r=JSON.stringify(s)}}catch(e){r=i.constructor.name.toString()+" (Error: "+e.message+")";c.info("key: "+n+", could not be serialized")}}t[n]=r.substring(0,Util.MAX_PROPERTY_LENGTH)}return t};Util.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!t){return true}for(var r=0;r<n.length;r++){var i=new RegExp(n[r].replace(/\./g,".").replace(/\*/g,".*"));if(i.test(s.parse(t).hostname)){return false}}return true};Util.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[u.requestContextHeader];if(n){var r=n.split(",");for(var i=0;i<r.length;++i){var o=r[i].split("=");if(o.length==2&&o[0]==t){return o[1]}}}};Util.makeRequest=function(e,t,n,a){if(t&&t.indexOf("//")===0){t="https:"+t}var u=s.parse(t);var f=r({},n,{host:u.hostname,port:u.port,path:u.pathname});var l=undefined;if(u.protocol==="https:"){l=e.proxyHttpsUrl||undefined}if(u.protocol==="http:"){l=e.proxyHttpUrl||undefined}if(l){if(l.indexOf("//")===0){l="http:"+l}var p=s.parse(l);if(p.protocol==="https:"){c.info("Proxies that use HTTPS are not supported");l=undefined}else{f=r({},f,{host:p.hostname,port:p.port||"80",path:t,headers:r({},f.headers,{Host:u.hostname})})}}var d=u.protocol==="https:"&&!l;if(d&&e.httpsAgent!==undefined){f.agent=e.httpsAgent}else if(!d&&e.httpAgent!==undefined){f.agent=e.httpAgent}else if(d){f.agent=Util.tlsRestrictedAgent}if(d){return o.request(f,a)}else{return i.request(f,a)}};Util.safeIncludeCorrelationHeader=function(e,t,n){var r;if(typeof n==="string"){r=n}else if(n instanceof Array){r=n.join(",")}else if(n&&typeof n.toString==="function"){try{r=n.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,n)}}if(r){Util.addCorrelationIdHeaderFromString(e,t,r)}else{t.setHeader(u.requestContextHeader,u.requestContextSourceKey+"="+e.config.correlationId)}};Util.addCorrelationIdHeaderFromString=function(e,t,n){var r=n.split(",");var i=u.requestContextSourceKey+"=";var o=r.some(function(e){return e.substring(0,i.length)===i});if(!o){t.setHeader(u.requestContextHeader,n+","+u.requestContextSourceKey+"="+e.config.correlationId)}};Util.MAX_PROPERTY_LENGTH=8192;Util.tlsRestrictedAgent=new o.Agent({secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1});return Util}();e.exports=f},191:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(472);"use strict";var o=function(e){r(AvailabilityData,e);function AvailabilityData(){var t=e.call(this)||this;t.ver=2;t.properties={};t.measurements={};return t}return AvailabilityData}(i);e.exports=o},203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=[];t.subscriber=function(e){i.forEach(function(t){var n=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:n,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})})};function enable(e,n){if(e){if(i.length===0){r.channel.subscribe("mongodb",t.subscriber)}i.push(n)}else{i=i.filter(function(e){return e!=n});if(i.length===0){r.channel.unsubscribe("mongodb",t.subscriber)}}}t.enable=enable},208:function(e,t,n){var r=n(402);var i=r.FileSystem.require(),o=n(622);i.existsSync=i.existsSync||o.existsSync;var s=n(967),a=n(802);var c=/^win/.test(process.platform);e.exports=function(e){var t=undefined,n="";if(e&&typeof e==="string"){if(i.existsSync(e)){n=e;t=new a(e,r.Constants.FILE)}else{throw r.Errors.INVALID_FILENAME}}else if(e&&Buffer.isBuffer(e)){t=new a(e,r.Constants.BUFFER)}else{t=new a(null,r.Constants.NONE)}function sanitize(e,t){e=o.resolve(o.normalize(e));var n=t.split("/");for(var r=0,i=n.length;r<i;r++){var s=o.normalize(o.join(e,n.slice(r,i).join(o.sep)));if(s.indexOf(e)===0){return s}}return o.normalize(o.join(e,o.basename(t)))}function getEntry(e){if(e&&t){var n;if(typeof e==="string")n=t.getEntry(e);if(typeof e==="object"&&typeof e.entryName!=="undefined"&&typeof e.header!=="undefined")n=t.getEntry(e.entryName);if(n){return n}}return null}return{readFile:function(e){var t=getEntry(e);return t&&t.getData()||null},readFileAsync:function(e,t){var n=getEntry(e);if(n){n.getDataAsync(t)}else{t(null,"getEntry failed for:"+e)}},readAsText:function(e,t){var n=getEntry(e);if(n){var r=n.getData();if(r&&r.length){return r.toString(t||"utf8")}}return""},readAsTextAsync:function(e,t,n){var r=getEntry(e);if(r){r.getDataAsync(function(e,r){if(r){t(e,r);return}if(e&&e.length){t(e.toString(n||"utf8"))}else{t("")}})}else{t("")}},deleteFile:function(e){var n=getEntry(e);if(n){t.deleteEntry(n.entryName)}},addZipComment:function(e){t.comment=e},getZipComment:function(){return t.comment||""},addZipEntryComment:function(e,t){var n=getEntry(e);if(n){n.comment=t}},getZipEntryComment:function(e){var t=getEntry(e);if(t){return t.comment||""}return""},updateFile:function(e,t){var n=getEntry(e);if(n){n.setData(t)}},addLocalFile:function(e,t,n){if(i.existsSync(e)){if(t){t=t.split("\\").join("/");if(t.charAt(t.length-1)!=="/"){t+="/"}}else{t=""}var o=e.split("\\").join("/").split("/").pop();if(n){this.addFile(t+n,i.readFileSync(e),"",0)}else{this.addFile(t+o,i.readFileSync(e),"",0)}}else{throw r.Errors.FILE_NOT_FOUND.replace("%s",e)}},addLocalFolder:function(e,t,n){if(n===undefined){n=function(){return true}}else if(n instanceof RegExp){n=function(e){return function(t){return e.test(t)}}(n)}if(t){t=t.split("\\").join("/");if(t.charAt(t.length-1)!=="/"){t+="/"}}else{t=""}e=o.normalize(e);e=e.split("\\").join("/");if(e.charAt(e.length-1)!=="/")e+="/";if(i.existsSync(e)){var s=r.findFiles(e),a=this;if(s.length){s.forEach(function(r){var o=r.split("\\").join("/").replace(new RegExp(e.replace(/(\(|\))/g,"\\$1"),"i"),"");if(n(o)){if(o.charAt(o.length-1)!=="/"){a.addFile(t+o,i.readFileSync(r),"",0)}else{a.addFile(t+o,Buffer.alloc(0),"",0)}}})}}else{throw r.Errors.FILE_NOT_FOUND.replace("%s",e)}},addFile:function(e,n,r,i){var o=new s;o.entryName=e;o.comment=r||"";if(!i){if(o.isDirectory){i=16877<<16|16}else{i=420<<16}}o.attr=i;o.setData(n);t.setEntry(o)},getEntries:function(){if(t){return t.entries}else{return[]}},getEntry:function(e){return getEntry(e)},extractEntryTo:function(e,n,s,a){a=a||false;s=typeof s==="undefined"?true:s;var c=getEntry(e);if(!c){throw r.Errors.NO_ENTRY}var u=c.entryName;var f=sanitize(n,s?u:o.basename(u));if(c.isDirectory){f=o.resolve(f,"..");var l=t.getEntryChildren(c);l.forEach(function(e){if(e.isDirectory)return;var t=e.getData();if(!t){throw r.Errors.CANT_EXTRACT_FILE}var i=sanitize(n,s?e.entryName:o.basename(e.entryName));r.writeFileTo(i,t,a)});return true}var p=c.getData();if(!p)throw r.Errors.CANT_EXTRACT_FILE;if(i.existsSync(f)&&!a){throw r.Errors.CANT_OVERRIDE}r.writeFileTo(f,p,a);return true},test:function(){if(!t){return false}for(var e in t.entries){try{if(e.isDirectory){continue}var n=t.entries[e].getData();if(!n){return false}}catch(e){return false}}return true},extractAllTo:function(e,n){n=n||false;if(!t){throw r.Errors.NO_ZIP}t.entries.forEach(function(t){var o=sanitize(e,t.entryName.toString());if(t.isDirectory){r.makeDir(o);return}var s=t.getData();if(!s){throw r.Errors.CANT_EXTRACT_FILE}r.writeFileTo(o,s,n);try{i.utimesSync(o,t.header.time,t.header.time)}catch(e){throw r.Errors.CANT_EXTRACT_FILE}})},extractAllToAsync:function(e,n,s){if(!s){s=function(){}}n=n||false;if(!t){s(new Error(r.Errors.NO_ZIP));return}var a=t.entries;var c=a.length;a.forEach(function(t){if(c<=0)return;var a=o.normalize(t.entryName.toString());if(t.isDirectory){r.makeDir(sanitize(e,a));if(--c===0)s(undefined);return}t.getDataAsync(function(u,f){if(c<=0)return;if(f){s(new Error(f));return}if(!u){c=0;s(new Error(r.Errors.CANT_EXTRACT_FILE));return}r.writeFileToAsync(sanitize(e,a),u,n,function(n){try{i.utimesSync(o.resolve(e,a),t.header.time,t.header.time)}catch(e){s(new Error("Unable to set utimes"))}if(c<=0)return;if(!n){c=0;s(new Error("Unable to write"));return}if(--c===0)s(undefined)})})})},writeZip:function(e,i){if(arguments.length===1){if(typeof e==="function"){i=e;e=""}}if(!e&&n){e=n}if(!e)return;var o=t.compressToBuffer();if(o){var s=r.writeFileTo(e,o,true);if(typeof i==="function")i(!s?new Error("failed"):null,"")}},toBuffer:function(e,n,r,i){this.valueOf=2;if(typeof e==="function"){t.toAsyncBuffer(e,n,r,i);return null}return t.compressToBuffer()}}}},211:function(e){e.exports=require("https")},213:function(e){e.exports=require("timers")},221:function(e){"use strict";var t;(function(e){e[e["Measurement"]=0]="Measurement";e[e["Aggregation"]=1]="Aggregation"})(t||(t={}));e.exports=t},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(622);var i=n(105);var o=n(282);var s=Object.keys(process.binding("natives"));var a=o.prototype.require;function makePatchingRequire(e){var t={};return function patchedRequire(n){var c=a.apply(this,arguments);if(e[n]){var u=o._resolveFilename(n,this);if(t.hasOwnProperty(u)){return t[u]}var f=void 0;if(s.indexOf(n)<0){try{f=a.call(this,r.join(n,"package.json")).version}catch(e){return c}}else{f=process.version.substring(1)}var l=f.indexOf("-");if(l>=0){f=f.substring(0,l)}var p=c;for(var d=0,h=e[n];d<h.length;d++){var v=h[d];if(i.satisfies(f,v.versionSpecifier)){p=v.patch(p,u)}}return t[u]=p}return c}}t.makePatchingRequire=makePatchingRequire},227:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const s=i(n(602));const a=o(n(622));const c=o(n(669));class MetaMfParser{constructor(e){this.mBasePath=e;this.mfFilePath=a.join(e,"META-INF","MANIFEST.MF");this.mFilesExtensionMap=new Map}parse(){return r(this,void 0,void 0,function*(){var e=c.promisify(s.default.eachLine);return e(this.mfFilePath,e=>{this.parseLine(e)})})}getFiles(e){return this.mFilesExtensionMap.get(e)}parseLine(e){if(!e.startsWith("Name: ")){return}const t=a.join(this.mBasePath,e.split("Name: ",2)[1]);const n=a.extname(t);if(!this.mFilesExtensionMap.has(n)){this.mFilesExtensionMap.set(n,[])}const r=this.mFilesExtensionMap.get(n);if(!c.isUndefined(r)){r.push(t)}}}t.default=MetaMfParser},232:function(e,t,n){"use strict";const r=n(105);if(process&&r.gte(process.versions.node,"8.0.0")){e.exports=n(724)}else{e.exports=n(246)}},243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(222);var i=n(222);t.makePatchingRequire=i.makePatchingRequire;var o=function(e){return true};var s=function(){function ContextPreservingEventEmitter(){this.version=n(325).version;this.subscribers={};this.contextPreservationFunction=function(e){return e};this.knownPatches={};this.currentlyPublishing=false}ContextPreservingEventEmitter.prototype.shouldPublish=function(e){var t=this.subscribers[e];if(t){return t.some(function(e){var t=e.filter;return!t||t(false)})}return false};ContextPreservingEventEmitter.prototype.publish=function(e,t){if(this.currentlyPublishing){return}var n=this.subscribers[e];if(n){var r={timestamp:Date.now(),data:t};this.currentlyPublishing=true;n.forEach(function(e){var t=e.listener,n=e.filter;try{if(n&&n(true)){t(r)}}catch(e){}});this.currentlyPublishing=false}};ContextPreservingEventEmitter.prototype.subscribe=function(e,t,n){if(n===void 0){n=o}if(!this.subscribers[e]){this.subscribers[e]=[]}this.subscribers[e].push({listener:t,filter:n})};ContextPreservingEventEmitter.prototype.unsubscribe=function(e,t,n){if(n===void 0){n=o}var r=this.subscribers[e];if(r){for(var i=0;i<r.length;++i){if(r[i].listener===t&&r[i].filter===n){r.splice(i,1);return true}}}return false};ContextPreservingEventEmitter.prototype.reset=function(){var e=this;this.subscribers={};this.contextPreservationFunction=function(e){return e};Object.getOwnPropertyNames(this.knownPatches).forEach(function(t){return delete e.knownPatches[t]})};ContextPreservingEventEmitter.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)};ContextPreservingEventEmitter.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(t(n))}};ContextPreservingEventEmitter.prototype.registerMonkeyPatch=function(e,t){if(!this.knownPatches[e]){this.knownPatches[e]=[]}this.knownPatches[e].push(t)};ContextPreservingEventEmitter.prototype.getPatchesObject=function(){return this.knownPatches};return ContextPreservingEventEmitter}();if(!global.diagnosticsSource){global.diagnosticsSource=new s;var a=n(282);a.prototype.require=r.makePatchingRequire(global.diagnosticsSource.getPatchesObject())}t.channel=global.diagnosticsSource},246:function(e,t,n){"use strict";const r=n(669);const i=n(357);const o=n(848);const s=n(271);const a="cls@contexts";const c="error@context";const u=[];for(let e in s.providers){u[s.providers[e]]=e}const f=process.env.DEBUG_CLS_HOOKED;let l=-1;e.exports={getNamespace:getNamespace,createNamespace:createNamespace,destroyNamespace:destroyNamespace,reset:reset,ERROR_SYMBOL:c};function Namespace(e){this.name=e;this.active=null;this._set=[];this.id=null;this._contexts=new Map}Namespace.prototype.set=function set(e,t){if(!this.active){throw new Error("No context available. ns.run() or ns.bind() must be called first.")}if(f){debug2("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+l+" active:"+r.inspect(this.active,true))}this.active[e]=t;return t};Namespace.prototype.get=function get(e){if(!this.active){if(f){debug2("    GETTING KEY:"+e+"=undefined"+" "+this.name+" uid:"+l+" active:"+r.inspect(this.active,true))}return undefined}if(f){debug2("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+l+" active:"+r.inspect(this.active,true))}return this.active[e]};Namespace.prototype.createContext=function createContext(){if(f){debug2("   CREATING Context: "+this.name+" uid:"+l+" len:"+this._set.length+" "+" active:"+r.inspect(this.active,true,2,true))}let e=Object.create(this.active?this.active:Object.prototype);e._ns_name=this.name;e.id=l;if(f){debug2("   CREATED Context: "+this.name+" uid:"+l+" len:"+this._set.length+" "+" context:"+r.inspect(e,true,2,true))}return e};Namespace.prototype.run=function run(e){let t=this.createContext();this.enter(t);try{if(f){debug2(" BEFORE RUN: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(t))}e(t);return t}catch(e){if(e){e[c]=t}throw e}finally{if(f){debug2(" AFTER RUN: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(t))}this.exit(t)}};Namespace.prototype.runAndReturn=function runAndReturn(e){var t;this.run(function(n){t=e(n)});return t};Namespace.prototype.runPromise=function runPromise(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch){throw new Error("fn must return a promise.")}if(f){debug2(" BEFORE runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(t))}return n.then(e=>{if(f){debug2(" AFTER runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(t))}this.exit(t);return e}).catch(e=>{e[c]=t;if(f){debug2(" AFTER runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(t))}this.exit(t);throw e})};Namespace.prototype.bind=function bindFactory(e,t){if(!t){if(!this.active){t=this.createContext()}else{t=this.active}}let n=this;return function clsBind(){n.enter(t);try{return e.apply(this,arguments)}catch(e){if(e){e[c]=t}throw e}finally{n.exit(t)}}};Namespace.prototype.enter=function enter(e){i.ok(e,"context must be provided for entering");if(f){debug2("  ENTER "+this.name+" uid:"+l+" len:"+this._set.length+" context: "+r.inspect(e))}this._set.push(this.active);this.active=e};Namespace.prototype.exit=function exit(e){i.ok(e,"context must be provided for exiting");if(f){debug2("  EXIT "+this.name+" uid:"+l+" len:"+this._set.length+" context: "+r.inspect(e))}if(this.active===e){i.ok(this._set.length,"can't remove top context");this.active=this._set.pop();return}let t=this._set.lastIndexOf(e);if(t<0){if(f){debug2("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e))}i.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))}else{i.ok(t,"can't remove top context");this._set.splice(t,1)}};Namespace.prototype.bindEmitter=function bindEmitter(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this;let n="context@"+this.name;function attach(e){if(!e){return}if(!e[a]){e[a]=Object.create(null)}e[a][n]={namespace:t,context:t.active}}function bind(e){if(!(e&&e[a])){return e}let t=e;let n=e[a];Object.keys(n).forEach(function(e){let r=n[e];t=r.namespace.bind(t,r.context)});return t}o(e,attach,bind)};Namespace.prototype.fromException=function fromException(e){return e[c]};function getNamespace(e){return process.namespaces[e]}function createNamespace(e){i.ok(e,"namespace must be given a name.");if(f){debug2("CREATING NAMESPACE "+e)}let t=new Namespace(e);t.id=l;s.addHooks({init(n,i,o,s,a){l=n;if(s){t._contexts.set(n,t._contexts.get(s));if(f){debug2("PARENTID: "+e+" uid:"+n+" parent:"+s+" provider:"+o)}}else{t._contexts.set(l,t.active)}if(f){debug2("INIT "+e+" uid:"+n+" parent:"+s+" provider:"+u[o]+" active:"+r.inspect(t.active,true))}},pre(n,i){l=n;let o=t._contexts.get(n);if(o){if(f){debug2(" PRE "+e+" uid:"+n+" handle:"+getFunctionName(i)+" context:"+r.inspect(o))}t.enter(o)}else{if(f){debug2(" PRE MISSING CONTEXT "+e+" uid:"+n+" handle:"+getFunctionName(i))}}},post(n,i){l=n;let o=t._contexts.get(n);if(o){if(f){debug2(" POST "+e+" uid:"+n+" handle:"+getFunctionName(i)+" context:"+r.inspect(o))}t.exit(o)}else{if(f){debug2(" POST MISSING CONTEXT "+e+" uid:"+n+" handle:"+getFunctionName(i))}}},destroy(n){l=n;if(f){debug2("DESTROY "+e+" uid:"+n+" context:"+r.inspect(t._contexts.get(l))+" active:"+r.inspect(t.active,true))}t._contexts.delete(n)}});process.namespaces[e]=t;return t}function destroyNamespace(e){let t=getNamespace(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"');i.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t));process.namespaces[e]=null}function reset(){if(process.namespaces){Object.keys(process.namespaces).forEach(function(e){destroyNamespace(e)})}process.namespaces=Object.create(null)}process.namespaces={};if(s._state&&!s._state.enabled){s.enable()}function debug2(e){if(process.env.DEBUG){process._rawDebug(e)}}function getFunctionName(e){if(!e){return e}if(typeof e==="function"){if(e.name){return e.name}return(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]}else if(e.constructor&&e.constructor.name){return e.constructor.name}}if(f){var p=n(322);for(var d in p.filter._modifiers){p.filter.deattach(d)}}},271:function(e,t,n){"use strict";const r=n(620);if(global._asyncHook){if(global._asyncHook.version===n(664).version){e.exports=global._asyncHook}else{throw new Error("Conflicting version of async-hook-jl found")}}else{const t=n(322);t.filter.attach(function(e,t){return t.filter(function(e){const t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)})});e.exports=global._asyncHook=new r}},277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(367);function samplingTelemetryProcessor(e,t){var n=e.sampleRate;var i=false;if(n===null||n===undefined||n>=100){return true}else if(e.data&&r.TelemetryType.Metric===r.baseTypeToTelemetryType(e.data.baseType)){return true}else if(t.correlationContext&&t.correlationContext.operation){i=getSamplingHashCode(t.correlationContext.operation.id)<n}else{i=Math.random()*100<n}return i}t.samplingTelemetryProcessor=samplingTelemetryProcessor;function getSamplingHashCode(e){var t=-2147483648;var n=2147483647;var r=5381;if(!e){return 0}while(e.length<8){e=e+e}for(var i=0;i<e.length;i++){r=((r<<5)+r|0)+e.charCodeAt(i)|0}r=r<=t?n:Math.abs(r);return r/n*100}t.getSamplingHashCode=getSamplingHashCode},280:function(e){"use strict";var t=function(){function StackFrame(){}return StackFrame}();e.exports=t},282:function(e){e.exports=require("module")},285:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=i(n(310));const a=o(n(400));const c=n(669);class GithubCiCore{getCiName(){return"GitHub"}getInput(e){const t=s.getInput(e);return c.isUndefined(t)?"":t}setOutput(e,t){return s.setOutput(e,t)}logInfo(e){return s.info(e)}logWarning(e){return s.warning(e)}logError(e){return s.error(e)}markAsFailed(e){return s.setFailed(e)}}t.GithubCiCore=GithubCiCore;class GithubActionRunner{run(){return r(this,void 0,void 0,function*(){try{const e=new GithubCiCore;const t=new a.default(e);yield t.run()}catch(e){s.setFailed(e.message)}})}}t.default=GithubActionRunner},287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(970);var i=n(294);var o=function(){function CorrelationContextManager(){}CorrelationContextManager.getCurrentContext=function(){if(!CorrelationContextManager.enabled){return null}var e=CorrelationContextManager.session.get(CorrelationContextManager.CONTEXT_NAME);if(e===undefined){return null}return e};CorrelationContextManager.generateContextObject=function(e,t,n,r,i,o){t=t||e;if(this.enabled){return{operation:{name:n,id:e,parentId:t,traceparent:i,tracestate:o},customProperties:new s(r)}}return null};CorrelationContextManager.runWithContext=function(e,t){if(CorrelationContextManager.enabled){return CorrelationContextManager.session.bind(t,(n={},n[CorrelationContextManager.CONTEXT_NAME]=e,n))()}else{return t()}var n};CorrelationContextManager.wrapEmitter=function(e){if(CorrelationContextManager.enabled){CorrelationContextManager.session.bindEmitter(e)}};CorrelationContextManager.wrapCallback=function(e){if(CorrelationContextManager.enabled){return CorrelationContextManager.session.bind(e)}return e};CorrelationContextManager.enable=function(e){if(this.enabled){return}if(!this.isNodeVersionCompatible()){this.enabled=false;return}if(!CorrelationContextManager.hasEverEnabled){this.forceClsHooked=e;this.hasEverEnabled=true;if(typeof this.cls==="undefined"){if(CorrelationContextManager.forceClsHooked===true||CorrelationContextManager.forceClsHooked===undefined&&CorrelationContextManager.shouldUseClsHooked()){this.cls=n(232)}else{this.cls=n(508)}}CorrelationContextManager.session=this.cls.createNamespace("AI-CLS-Session");i.registerContextPreservation(function(e){return CorrelationContextManager.session.bind(e)})}this.enabled=true};CorrelationContextManager.disable=function(){this.enabled=false};CorrelationContextManager.reset=function(){if(CorrelationContextManager.hasEverEnabled){CorrelationContextManager.session=null;CorrelationContextManager.session=this.cls.createNamespace("AI-CLS-Session")}};CorrelationContextManager.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2};CorrelationContextManager.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2};CorrelationContextManager.canUseClsHooked=function(){var e=process.versions.node.split(".");var t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0;var n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2;var r=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&n)&&r};CorrelationContextManager.enabled=false;CorrelationContextManager.hasEverEnabled=false;CorrelationContextManager.forceClsHooked=undefined;CorrelationContextManager.CONTEXT_NAME="ApplicationInsights-Context";return CorrelationContextManager}();t.CorrelationContextManager=o;var s=function(){function CustomPropertiesImpl(e){this.props=[];this.addHeaderData(e)}CustomPropertiesImpl.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map(function(e){var t=e.split("=");return{key:t[0],value:t[1]}}).concat(this.props)};CustomPropertiesImpl.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")};CustomPropertiesImpl.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e){return n.value}}return};CustomPropertiesImpl.prototype.setProperty=function(e,t){if(CustomPropertiesImpl.bannedCharacters.test(e)||CustomPropertiesImpl.bannedCharacters.test(t)){r.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+t);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=t;return}}this.props.push({key:e,value:t})};CustomPropertiesImpl.bannedCharacters=/[,=]/;return CustomPropertiesImpl}()},294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IsInitialized=!process.env["APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL"];if(t.IsInitialized){var r=n(504);var i=process.env["APPLICATION_INSIGHTS_NO_PATCH_MODULES"]||"";var o=i.split(",");var s={bunyan:r.bunyan,console:r.console,mongodb:r.mongodb,mongodbCore:r.mongodbCore,mysql:r.mysql,redis:r.redis,pg:r.pg,pgPool:r.pgPool,winston:r.winston};for(var a in s){if(o.indexOf(a)===-1){s[a].enable()}}}function registerContextPreservation(e){if(!t.IsInitialized){return}n(243).channel.addContextPreservation(e)}t.registerContextPreservation=registerContextPreservation},299:function(e){function FormatErrorString(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch(e){return"<error>"}}}e.exports=function FormatStackTrace(e,t){var n=[];n.push(FormatErrorString(e));for(var r=0;r<t.length;r++){var i=t[r];var o;try{o=i.toString()}catch(e){try{o="<error: "+e+">"}catch(e){o="<error>"}}n.push("    at "+o)}return n.join("\n")}},303:function(e){e.exports=require("async_hooks")},304:function(e){e.exports=require("string_decoder")},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=function(e){var t=e.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(e){return e()})}}});var n={};t.on("started",function(e){if(n[e.requestId]){return}n[e.requestId]=e});t.on("succeeded",function(e){var t=n[e.requestId];if(t){delete n[e.requestId]}e.operationId(function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:true})})});t.on("failed",function(e){var t=n[e.requestId];if(t){delete n[e.requestId]}e.operationId(function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:false})})});return e};var o=function(e){var t=e.instrument();var n={};var i={};t.on("started",function(e){if(n[e.requestId]){return}i[e.requestId]=r.channel.bindToContext(function(e){return e()});n[e.requestId]=e});t.on("succeeded",function(e){var t=n[e.requestId];if(t){delete n[e.requestId]}if(typeof e==="object"&&typeof i[e.requestId]==="function"){i[e.requestId](function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:true})});delete i[e.requestId]}});t.on("failed",function(e){var t=n[e.requestId];if(t){delete n[e.requestId]}if(typeof e==="object"&&typeof i[e.requestId]==="function"){i[e.requestId](function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:false})});delete i[e.requestId]}});return e};var s=function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function contextPreservingConnect(){var e=t.apply(this,arguments);var n=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function contextPreservingWrite(){var e=typeof arguments[1]==="function"?1:2;if(typeof arguments[e]==="function"){arguments[e]=r.channel.bindToContext(arguments[e])}return n.apply(this,arguments)};var i=this.s.coreTopology.s.pool.logout;this.s.coreTopology.s.pool.logout=function contextPreservingLogout(){if(typeof arguments[1]==="function"){arguments[1]=r.channel.bindToContext(arguments[1])}return i.apply(this,arguments)};return e};return e};var a=function(e){s(e);var t=e.instrument();var n={};var i={};t.on("started",function(e){if(n[e.requestId]){return}i[e.requestId]=r.channel.bindToContext(function(e){return e()});n[e.requestId]=e});t.on("succeeded",function(e){var t=n[e.requestId];if(t){delete n[e.requestId]}if(typeof e==="object"&&typeof i[e.requestId]==="function"){i[e.requestId](function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:true})});delete i[e.requestId]}});t.on("failed",function(e){var t=n[e.requestId];if(t){delete n[e.requestId]}if(typeof e==="object"&&typeof i[e.requestId]==="function"){i[e.requestId](function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:false})});delete i[e.requestId]}});return e};t.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:i};t.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:o};t.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:a};function enable(){r.channel.registerMonkeyPatch("mongodb",t.mongo2);r.channel.registerMonkeyPatch("mongodb",t.mongo3);r.channel.registerMonkeyPatch("mongodb",t.mongo330)}t.enable=enable},310:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const i=n(997);const o=n(87);const s=n(622);var a;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(a=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){process.env[e]=t;i.issueCommand("set-env",{name:e},t)}t.exportVariable=exportVariable;function setSecret(e){i.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){i.issueCommand("add-path",{},e);process.env["PATH"]=`${e}${s.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n){throw new Error(`Input required and not supplied: ${e}`)}return n.trim()}t.getInput=getInput;function setOutput(e,t){i.issueCommand("set-output",{name:e},t)}t.setOutput=setOutput;function setFailed(e){process.exitCode=a.Failure;error(e)}t.setFailed=setFailed;function debug(e){i.issueCommand("debug",{},e)}t.debug=debug;function error(e){i.issue("error",e)}t.error=error;function warning(e){i.issue("warning",e)}t.warning=warning;function info(e){process.stdout.write(e+o.EOL)}t.info=info;function startGroup(e){i.issue("group",e)}t.startGroup=startGroup;function endGroup(){i.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return r(this,void 0,void 0,function*(){startGroup(e);let n;try{n=yield t()}finally{endGroup()}return n})}t.group=group;function saveState(e,t){i.issueCommand("save-state",{name:e},t)}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState},322:function(e,t,n){if(global._stackChain){if(global._stackChain.version===n(881).version){e.exports=global._stackChain}else{throw new Error("Conflicting version of stack-chain found")}}else{e.exports=global._stackChain=n(350)}},325:function(e){e.exports={_args:[["diagnostic-channel@0.2.0","/Users/chris/Downloads/android-app-size-diff"]],_from:"diagnostic-channel@0.2.0",_id:"diagnostic-channel@0.2.0",_inBundle:false,_integrity:"sha1-zJmvlhLCP7H/8TYSxy8sv6qNWhc=",_location:"/diagnostic-channel",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"diagnostic-channel@0.2.0",name:"diagnostic-channel",escapedName:"diagnostic-channel",rawSpec:"0.2.0",saveSpec:null,fetchSpec:"0.2.0"},_requiredBy:["/applicationinsights"],_resolved:"https://registry.npmjs.org/diagnostic-channel/-/diagnostic-channel-0.2.0.tgz",_spec:"0.2.0",_where:"/Users/chris/Downloads/android-app-size-diff",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},dependencies:{semver:"^5.3.0"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^7.0.12",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"^2.2.1"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],homepage:"https://github.com/Microsoft/node-diagnostic-channel",license:"MIT",main:"./dist/src/channel.js",name:"diagnostic-channel",repository:{type:"git",url:"git+https://github.com/Microsoft/node-diagnostic-channel.git"},scripts:{build:"tsc",clean:"rimraf ./dist",lint:"tslint -c tslint.json -p tsconfig.json",test:"mocha ./dist/tests/**/*.js"},types:"./dist/src/channel.d.ts",version:"0.2.0"}},328:function(e){"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}},350:function(e,t,n){var r=n(299);function stackChain(){this.extend=new TraceModifier;this.filter=new TraceModifier;this.format=new StackFormater;this.version=n(881).version}var i=false;stackChain.prototype.callSite=function collectCallSites(e){if(!e)e={};i=true;var t={};Error.captureStackTrace(t,collectCallSites);var n=t.stack;i=false;n=n.slice(e.slice||0);if(e.extend)n=this.extend._modify(t,n);if(e.filter)n=this.filter._modify(t,n);return n};var o=new stackChain;function TraceModifier(){this._modifiers=[]}TraceModifier.prototype._modify=function(e,t){for(var n=0,r=this._modifiers.length;n<r;n++){t=this._modifiers[n](e,t)}return t};TraceModifier.prototype.attach=function(e){this._modifiers.push(e)};TraceModifier.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);if(t===-1)return false;this._modifiers.splice(t,1);return true};function StackFormater(){this._formater=r;this._previous=undefined}StackFormater.prototype.replace=function(e){if(e){this._formater=e}else{this.restore()}};StackFormater.prototype.restore=function(){this._formater=r;this._previous=undefined};StackFormater.prototype._backup=function(){this._previous=this._formater};StackFormater.prototype._roolback=function(){if(this._previous===r){this.replace(undefined)}else{this.replace(this._previous)}this._previous=undefined};if(Error.prepareStackTrace){o.format.replace(Error.prepareStackTrace)}var s=false;function prepareStackTrace(e,t){if(i)return t;if(s)return r(e,t);var n=t.concat();n=o.extend._modify(e,n);n=o.filter._modify(e,n);n=n.slice(0,Error.stackTraceLimit);if(Object.isExtensible(e)&&Object.getOwnPropertyDescriptor(e,"callSite")===undefined){e.callSite={original:t,mutated:n}}s=true;var a=o.format._formater(e,n);s=false;return a}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return prepareStackTrace},set:function(e){if(e===prepareStackTrace){o.format._roolback()}else{o.format._backup();o.format.replace(e)}}});function callSiteGetter(){this.stack;return this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:callSiteGetter,set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:true,configurable:true})},configurable:true});e.exports=o},351:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=i(n(747));class MarkdownReporter{writeReport(e,t){return r(this,void 0,void 0,function*(){var n="";n+=this.buildRow("Metric",e.baseApkLabel,e.targetApkLabel,"Difference");n+=this.buildRow("---","---","---","---");e.comparisionMetrics.forEach(e=>{n+=this.buildRow(e.metricName,String(e.baseValue),String(e.targetValue),String(e.difference))});return o.writeFileSync(t,n)})}buildRow(...e){return e.join(" | ")+" | \n"}}t.MarkdownReporter=MarkdownReporter},354:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=[];t.subscriber=function(e){i.forEach(function(t){var n=e.data.query||{};var r=n.sql||"Unknown query";var i=!e.data.err;var o=n._connection||{};var s=o.config||{};var a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;t.trackDependency({target:a,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"mysql"})})};function enable(e,n){if(e){if(i.length===0){r.channel.subscribe("mysql",t.subscriber)}i.push(n)}else{i=i.filter(function(e){return e!=n});if(i.length===0){r.channel.unsubscribe("mysql",t.subscriber)}}}t.enable=enable},357:function(e){e.exports=require("assert")},361:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(835);var o=n(367);var s=n(179);var a=n(328);var c=n(928);var u=n(769);var f=function(e){r(HttpDependencyParser,e);function HttpDependencyParser(t,n){var r=e.call(this)||this;if(n&&n.method&&t){r.method=n.method;r.url=HttpDependencyParser._getUrlFromRequestOptions(t,n);r.startTime=+new Date}return r}HttpDependencyParser.prototype.onError=function(e){this._setStatus(undefined,e)};HttpDependencyParser.prototype.onResponse=function(e){this._setStatus(e.statusCode,undefined);this.correlationId=s.getCorrelationContextTarget(e,a.requestContextTargetKey)};HttpDependencyParser.prototype.getDependencyTelemetry=function(e,t){var n=i.parse(this.url);n.search=undefined;n.hash=undefined;var r=this.method.toUpperCase()+" "+n.pathname;var s=o.RemoteDependencyDataConstants.TYPE_HTTP;var a=n.hostname;if(this.correlationId){s=o.RemoteDependencyDataConstants.TYPE_AI;if(this.correlationId!==u.correlationIdPrefix){a=n.hostname+" | "+this.correlationId}}else{s=o.RemoteDependencyDataConstants.TYPE_HTTP}var c={id:t,name:r,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:a};if(e){for(var f in e){if(!c[f]){c[f]=e[f]}}if(e.properties){for(var f in e.properties){c.properties[f]=e.properties[f]}}}return c};HttpDependencyParser._getUrlFromRequestOptions=function(e,t){if(typeof e==="string"){e=i.parse(e)}else{var n=e;e={};if(n){Object.keys(n).forEach(function(t){e[t]=n[t]})}}if(e.path){var r=i.parse(e.path);e.pathname=r.pathname;e.search=r.search}if(e.host&&e.port){var o=i.parse("http://"+e.host);if(!o.port&&e.port){e.hostname=e.host;delete e.host}}e.protocol=e.protocol||t.agent&&t.agent.protocol||undefined;e.hostname=e.hostname||"localhost";return i.format(e)};return HttpDependencyParser}(c);e.exports=f},366:function(e,t,n){"use strict";var r=n(605);var i=n(211);var o=n(970);var s=n(179);var a=n(328);var c=n(361);var u=n(287);var f=n(769);var l=n(14);var p=n(294);var d=function(){function AutoCollectHttpDependencies(e){if(!!AutoCollectHttpDependencies.INSTANCE){throw new Error("Client request tracking should be configured from the applicationInsights object")}AutoCollectHttpDependencies.INSTANCE=this;this._client=e}AutoCollectHttpDependencies.prototype.enable=function(e){this._isEnabled=e;if(this._isEnabled&&!this._isInitialized){this._initialize()}if(p.IsInitialized){n(203).enable(e,this._client);n(354).enable(e,this._client);n(721).enable(e,this._client);n(902).enable(e,this._client)}};AutoCollectHttpDependencies.prototype.isInitialized=function(){return this._isInitialized};AutoCollectHttpDependencies.prototype._initialize=function(){var e=this;this._isInitialized=true;var t=r.get;var n=r.request;var o=i.request;var s=function(t,n){var r=!n[AutoCollectHttpDependencies.disableCollectionRequestOption]&&!t[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];t[AutoCollectHttpDependencies.alreadyAutoCollectedFlag]=true;if(t&&n&&r){u.CorrelationContextManager.wrapEmitter(t);AutoCollectHttpDependencies.trackRequest(e._client,{options:n,request:t})}};r.request=function(e){var t=[];for(var i=1;i<arguments.length;i++){t[i-1]=arguments[i]}var o=n.call.apply(n,[r,e].concat(t));s(o,e);return o};i.request=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var r=o.call.apply(o,[i,e].concat(t));s(r,e);return r};r.get=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var i=(o=r.request).call.apply(o,[r,e].concat(t));i.end();return i;var o};i.get=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var r=(o=i.request).call.apply(o,[i,e].concat(t));r.end();return r;var o}};AutoCollectHttpDependencies.trackRequest=function(e,t){if(!t.options||!t.request||!e){o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!t.options,!t.request,!e);return}var n=new c(t.options,t.request);var r=u.CorrelationContextManager.getCurrentContext();var i;var p;if(r&&r.operation&&r.operation.traceparent&&l.isValidTraceId(r.operation.traceparent.traceId)){r.operation.traceparent.updateSpanId();i=r.operation.traceparent.getBackCompatRequestId()}else if(f.w3cEnabled){var d=new l;p=d.toString();i=d.getBackCompatRequestId()}else{i=r&&r.operation&&r.operation.parentId+AutoCollectHttpDependencies.requestNumber+++"."}if(s.canIncludeCorrelationHeader(e,n.getUrl())&&t.request.getHeader&&t.request.setHeader){if(e.config&&e.config.correlationId){var h=t.request.getHeader(a.requestContextHeader);try{s.safeIncludeCorrelationHeader(e,t.request,h)}catch(e){o.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(r&&r.operation){try{t.request.setHeader(a.requestIdHeader,i);t.request.setHeader(a.parentIdHeader,r.operation.id);t.request.setHeader(a.rootIdHeader,i);if(p||r.operation.traceparent){t.request.setHeader(a.traceparentHeader,p||r.operation.traceparent.toString())}else if(f.w3cEnabled){var d=(new l).toString();t.request.setHeader(a.traceparentHeader,d)}if(r.operation.tracestate){var v=r.operation.tracestate.toString();if(v){t.request.setHeader(a.traceStateHeader,v)}}var y=r.customProperties.serializeToHeader();if(y){t.request.setHeader(a.correlationContextHeader,y)}}catch(e){o.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}}}if(t.request.on){t.request.on("response",function(r){n.onResponse(r);var o=n.getDependencyTelemetry(t,i);o.contextObjects=o.contextObjects||{};o.contextObjects["http.RequestOptions"]=t.options;o.contextObjects["http.ClientRequest"]=t.request;o.contextObjects["http.ClientResponse"]=r;e.trackDependency(o)});t.request.on("error",function(r){n.onError(r);var o=n.getDependencyTelemetry(t,i);o.contextObjects=o.contextObjects||{};o.contextObjects["http.RequestOptions"]=t.options;o.contextObjects["http.ClientRequest"]=t.request;o.contextObjects["Error"]=r;e.trackDependency(o)})}};AutoCollectHttpDependencies.prototype.dispose=function(){AutoCollectHttpDependencies.INSTANCE=null;this.enable(false);this._isInitialized=false};AutoCollectHttpDependencies.disableCollectionRequestOption="disableAppInsightsAutoCollection";AutoCollectHttpDependencies.requestNumber=1;AutoCollectHttpDependencies.alreadyAutoCollectedFlag="_appInsightsAutoCollected";return AutoCollectHttpDependencies}();e.exports=d},367:function(e,t,n){"use strict";function __export(e){for(var n in e)if(!t.hasOwnProperty(n))t[n]=e[n]}Object.defineProperty(t,"__esModule",{value:true});__export(n(824));__export(n(167));__export(n(545))},400:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const s=i(n(916));const a=i(n(615));const c=n(351);const u=i(n(633));const f=o(n(29));class CiRunner{constructor(e){this.ciCore=e;this.thresholdChecker=new u.default(e)}run(){return r(this,void 0,void 0,function*(){const e=Boolean(JSON.parse(this.ciCore.getInput("telemetryEnabled")));if(e){console.log("Running with usage telemetry..");return this.runAppSizeAnalysisWithTelemetry()}else{console.log("Running with telemetry disabled..");return this.runAppSizeAnalysis()}})}runAppSizeAnalysisWithTelemetry(){return r(this,void 0,void 0,function*(){f.setup("0ba004b8-ff05-41fa-a241-3f026d68fc3a").setAutoDependencyCorrelation(true).setAutoCollectRequests(true).setAutoCollectPerformance(true,true).setAutoCollectExceptions(true).setAutoCollectDependencies(true).setAutoCollectConsole(true).setUseDiskRetryCaching(true).setSendLiveMetrics(true).start();const e=f.defaultClient;const t=(new Date).getTime();const n={ciName:this.ciCore.getCiName()};e.trackEvent({name:"RunStarted",properties:n});var r;try{r=yield this.runAppSizeAnalysis();const i=(new Date).getTime();const o=i-t;e.trackEvent({name:"RunSuccess",measurements:{duration:o},properties:n})}catch(t){e.trackEvent({name:"RunFailed",properties:n});e.trackException({exception:t,properties:n});throw t}finally{e.flush()}return r})}runAppSizeAnalysis(){return r(this,void 0,void 0,function*(){const e=this.ciCore.getInput("baseAppPath");const t=this.ciCore.getInput("targetAppPath");const n=this.ciCore.getInput("baseAppLabel");const r=this.ciCore.getInput("targetAppLabel");const i=this.ciCore.getInput("summaryOutputPath");const o=this.ciCore.getInput("metrics");const u=this.ciCore.getInput("thresholds");var f=false;if(!e||!t){this.ciCore.logError("App paths not supplied!");f=true}if(!n||!r){this.ciCore.logError("App labels not supplied!");f=true}if(!i){this.ciCore.logError("Summary path not supplied!");f=true}if(!o){this.ciCore.logError("Must pick at least one metric!");f=true}const l=this.readCsv(o);var p=[];try{p=this.parseThresholdsFromInput(u,l)}catch(e){this.ciCore.logError("Error parsing thresholds! "+e);f=true}if(f){throw"Invalid / illegal task inputs!"}const d=new s.default;const h=new c.MarkdownReporter;const v=new a.default(d,h);const y=yield v.generateComparisionReport(e,t,i,n,r,l,p);if(!this.thresholdChecker.checkThresholds(y)){this.ciCore.markAsFailed("App size increased significantly in at least one metric!")}console.log(y);return y})}parseThresholdsFromInput(e,t){const n=[];if(!e){this.ciCore.logWarning("No thresholds supplied. Drastic changes in app size metrics will not fail this task!");t.forEach(()=>n.push(NaN));return n}const r=this.readCsv(e);if(r.length!=t.length){throw"Thresholds must be set corresponding to each metric in metrics or none!"}t.forEach((e,t)=>{const i=parseInt(r[t]);n.push(i)});return n}readCsv(e){const t=e.split(",");return t.map(e=>e.trim())}}t.default=CiRunner},402:function(e,t,n){e.exports=n(26);e.exports.FileSystem=n(519);e.exports.Constants=n(589);e.exports.Errors=n(799);e.exports.FileAttr=n(718)},413:function(e){e.exports=require("stream")},414:function(e,t,n){"use strict";function __export(e){for(var n in e)if(!t.hasOwnProperty(n))t[n]=e[n]}Object.defineProperty(t,"__esModule",{value:true});__export(n(277));__export(n(876))},417:function(e){e.exports=require("crypto")},431:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=function(e){var t=e.RedisClient.prototype.internal_send_command;e.RedisClient.prototype.internal_send_command=function(e){if(e){var n=e.callback;if(!n||!n.pubsubBound){var i=this.address;var o=process.hrtime();e.callback=r.channel.bindToContext(function(t,s){var a=process.hrtime(o);var c=a[0]*1e3+a[1]/1e6|0;r.channel.publish("redis",{duration:c,address:i,commandObj:e,err:t,result:s});if(typeof n==="function"){n.apply(this,arguments)}});e.callback.pubsubBound=true}}return t.call(this,e)};return e};t.redis={versionSpecifier:">= 2.0.0 < 3.0.0",patch:i};function enable(){r.channel.registerMonkeyPatch("redis",t.redis)}t.enable=enable},459:function(e,t,n){"use strict";var r=n(605);var i=n(211);var o=n(970);var s=n(179);var a=n(328);var c=n(936);var u=n(287);var f=n(466);var l=function(){function AutoCollectHttpRequests(e){if(!!AutoCollectHttpRequests.INSTANCE){throw new Error("Server request tracking should be configured from the applicationInsights object")}AutoCollectHttpRequests.INSTANCE=this;this._client=e}AutoCollectHttpRequests.prototype.enable=function(e){this._isEnabled=e;if((this._isAutoCorrelating||this._isEnabled||f.isEnabled())&&!this._isInitialized){this.useAutoCorrelation(this._isAutoCorrelating);this._initialize()}};AutoCollectHttpRequests.prototype.useAutoCorrelation=function(e,t){if(e&&!this._isAutoCorrelating){u.CorrelationContextManager.enable(t)}else if(!e&&this._isAutoCorrelating){u.CorrelationContextManager.disable()}this._isAutoCorrelating=e};AutoCollectHttpRequests.prototype.isInitialized=function(){return this._isInitialized};AutoCollectHttpRequests.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating};AutoCollectHttpRequests.prototype._generateCorrelationContext=function(e){if(!this._isAutoCorrelating){return}return u.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())};AutoCollectHttpRequests.prototype._initialize=function(){var e=this;this._isInitialized=true;var t=function(t){if(!t){return undefined}if(typeof t!=="function"){throw new Error("onRequest handler must be a function")}return function(n,r){u.CorrelationContextManager.wrapEmitter(n);u.CorrelationContextManager.wrapEmitter(r);var i=n&&!n[AutoCollectHttpRequests.alreadyAutoCollectedFlag];if(n&&i){var o=new c(n);var s=e._generateCorrelationContext(o);u.CorrelationContextManager.runWithContext(s,function(){if(e._isEnabled){n[AutoCollectHttpRequests.alreadyAutoCollectedFlag]=true;AutoCollectHttpRequests.trackRequest(e._client,{request:n,response:r},o)}if(typeof t==="function"){t(n,r)}})}else{if(typeof t==="function"){t(n,r)}}}};var n=function(e){var n=e.addListener.bind(e);e.addListener=function(e,r){switch(e){case"request":case"checkContinue":return n(e,t(r));default:return n(e,r)}};e.on=e.addListener};var o=r.createServer;r.createServer=function(e){var r=o(t(e));n(r);return r};var s=i.createServer;i.createServer=function(e,r){var i=s(e,t(r));n(i);return i}};AutoCollectHttpRequests.trackRequestSync=function(e,t){if(!t.request||!t.response||!e){o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!t.request,!t.response,!e);return}AutoCollectHttpRequests.addResponseCorrelationIdHeader(e,t.response);var n=u.CorrelationContextManager.getCurrentContext();var r=new c(t.request,n&&n.operation.parentId);if(n){n.operation.id=r.getOperationId(e.context.tags)||n.operation.id;n.operation.name=r.getOperationName(e.context.tags)||n.operation.name;n.operation.parentId=r.getRequestId()||n.operation.parentId;n.customProperties.addHeaderData(r.getCorrelationContextHeader())}AutoCollectHttpRequests.endRequest(e,r,t,t.duration,t.error)};AutoCollectHttpRequests.trackRequest=function(e,t,n){if(!t.request||!t.response||!e){o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!t.request,!t.response,!e);return}var r=u.CorrelationContextManager.getCurrentContext();var i=n||new c(t.request,r&&r.operation.parentId);if(s.canIncludeCorrelationHeader(e,i.getUrl())){AutoCollectHttpRequests.addResponseCorrelationIdHeader(e,t.response)}if(r&&!n){r.operation.id=i.getOperationId(e.context.tags)||r.operation.id;r.operation.name=i.getOperationName(e.context.tags)||r.operation.name;r.operation.parentId=i.getOperationParentId(e.context.tags)||r.operation.parentId;r.customProperties.addHeaderData(i.getCorrelationContextHeader())}if(t.response.once){t.response.once("finish",function(){AutoCollectHttpRequests.endRequest(e,i,t,null,null)})}if(t.request.on){t.request.on("error",function(n){AutoCollectHttpRequests.endRequest(e,i,t,null,n)})}};AutoCollectHttpRequests.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(a.requestContextHeader);s.safeIncludeCorrelationHeader(e,t,n)}};AutoCollectHttpRequests.endRequest=function(e,t,n,r,i){if(i){t.onError(i,r)}else{t.onResponse(n.response,r)}var o=t.getRequestTelemetry(n);o.tagOverrides=t.getRequestTags(e.context.tags);if(n.tagOverrides){for(var s in n.tagOverrides){o.tagOverrides[s]=n.tagOverrides[s]}}var a=t.getLegacyRootId();if(a){o.properties["ai_legacyRootId"]=a}o.contextObjects=o.contextObjects||{};o.contextObjects["http.ServerRequest"]=n.request;o.contextObjects["http.ServerResponse"]=n.response;e.trackRequest(o)};AutoCollectHttpRequests.prototype.dispose=function(){AutoCollectHttpRequests.INSTANCE=null;this.enable(false);this._isInitialized=false;u.CorrelationContextManager.disable();this._isAutoCorrelating=false};AutoCollectHttpRequests.alreadyAutoCollectedFlag="_appInsightsAutoCollected";return AutoCollectHttpRequests}();e.exports=l},466:function(e,t,n){"use strict";var r=n(87);var i=n(701);var o=function(){function AutoCollectPerformance(e,t,n){if(t===void 0){t=6e4}if(n===void 0){n=false}this._lastIntervalRequestExecutionTime=0;this._lastIntervalDependencyExecutionTime=0;if(!AutoCollectPerformance.INSTANCE){AutoCollectPerformance.INSTANCE=this}this._isInitialized=false;this._client=e;this._collectionInterval=t;this._enableLiveMetricsCounters=n}AutoCollectPerformance.prototype.enable=function(e,t){var n=this;this._isEnabled=e;if(this._isEnabled&&!this._isInitialized){this._isInitialized=true}if(e){if(!this._handle){this._lastCpus=r.cpus();this._lastRequests={totalRequestCount:AutoCollectPerformance._totalRequestCount,totalFailedRequestCount:AutoCollectPerformance._totalFailedRequestCount,time:+new Date};this._lastDependencies={totalDependencyCount:AutoCollectPerformance._totalDependencyCount,totalFailedDependencyCount:AutoCollectPerformance._totalFailedDependencyCount,time:+new Date};this._lastExceptions={totalExceptionCount:AutoCollectPerformance._totalExceptionCount,time:+new Date};if(typeof process.cpuUsage==="function"){this._lastAppCpuUsage=process.cpuUsage()}this._lastHrtime=process.hrtime();this._collectionInterval=t||this._collectionInterval;this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval);this._handle.unref()}}else{if(this._handle){clearInterval(this._handle);this._handle=undefined}}};AutoCollectPerformance.countRequest=function(e,t){var n;if(!AutoCollectPerformance.isEnabled()){return}if(typeof e==="string"){n=+new Date("1970-01-01T"+e+"Z")}else if(typeof e==="number"){n=e}else{return}AutoCollectPerformance._intervalRequestExecutionTime+=n;if(t===false){AutoCollectPerformance._totalFailedRequestCount++}AutoCollectPerformance._totalRequestCount++};AutoCollectPerformance.countException=function(){AutoCollectPerformance._totalExceptionCount++};AutoCollectPerformance.countDependency=function(e,t){var n;if(!AutoCollectPerformance.isEnabled()){return}if(typeof e==="string"){n=+new Date("1970-01-01T"+e+"Z")}else if(typeof e==="number"){n=e}else{return}AutoCollectPerformance._intervalDependencyExecutionTime+=n;if(t===false){AutoCollectPerformance._totalFailedDependencyCount++}AutoCollectPerformance._totalDependencyCount++};AutoCollectPerformance.prototype.isInitialized=function(){return this._isInitialized};AutoCollectPerformance.isEnabled=function(){return AutoCollectPerformance.INSTANCE&&AutoCollectPerformance.INSTANCE._isEnabled};AutoCollectPerformance.prototype.trackPerformance=function(){this._trackCpu();this._trackMemory();this._trackNetwork();this._trackDependencyRate();this._trackExceptionRate()};AutoCollectPerformance.prototype._trackCpu=function(){var e=r.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){var t=0;var n=0;var o=0;var s=0;var a=0;for(var c=0;!!e&&c<e.length;c++){var u=e[c];var f=this._lastCpus[c];var l="% cpu("+c+") ";var p=u.model;var d=u.speed;var h=u.times;var v=f.times;var y=h.user-v.user||0;t+=y;var g=h.sys-v.sys||0;n+=g;var m=h.nice-v.nice||0;o+=m;var C=h.idle-v.idle||0;s+=C;var E=h.irq-v.irq||0;a+=E}var _=undefined;if(typeof process.cpuUsage==="function"){var T=process.cpuUsage();var I=process.hrtime();var w=T.user-this._lastAppCpuUsage.user+(T.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!=="undefined"&&this._lastHrtime.length===2){var S=(I[0]-this._lastHrtime[0])*1e6+(I[1]-this._lastHrtime[1])/1e3||0;_=100*w/(S*e.length)}this._lastAppCpuUsage=T;this._lastHrtime=I}var A=t+n+o+s+a||1;this._client.trackMetric({name:i.PerformanceCounter.PROCESSOR_TIME,value:(A-s)/A*100});this._client.trackMetric({name:i.PerformanceCounter.PROCESS_TIME,value:_||t/A*100})}this._lastCpus=e};AutoCollectPerformance.prototype._trackMemory=function(){var e=r.freemem();var t=process.memoryUsage().rss;var n=r.totalmem()-e;this._client.trackMetric({name:i.PerformanceCounter.PRIVATE_BYTES,value:t});this._client.trackMetric({name:i.PerformanceCounter.AVAILABLE_BYTES,value:e});if(this._enableLiveMetricsCounters){this._client.trackMetric({name:i.QuickPulseCounter.COMMITTED_BYTES,value:n})}};AutoCollectPerformance.prototype._trackNetwork=function(){var e=this._lastRequests;var t={totalRequestCount:AutoCollectPerformance._totalRequestCount,totalFailedRequestCount:AutoCollectPerformance._totalFailedRequestCount,time:+new Date};var n=t.totalRequestCount-e.totalRequestCount||0;var r=t.totalFailedRequestCount-e.totalFailedRequestCount||0;var o=t.time-e.time;var s=o/1e3;var a=(AutoCollectPerformance._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;this._lastIntervalRequestExecutionTime=AutoCollectPerformance._intervalRequestExecutionTime;if(o>0){var c=n/s;var u=r/s;this._client.trackMetric({name:i.PerformanceCounter.REQUEST_RATE,value:c});if(!this._enableLiveMetricsCounters||n>0){this._client.trackMetric({name:i.PerformanceCounter.REQUEST_DURATION,value:a})}if(this._enableLiveMetricsCounters){this._client.trackMetric({name:i.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}}this._lastRequests=t};AutoCollectPerformance.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies;var t={totalDependencyCount:AutoCollectPerformance._totalDependencyCount,totalFailedDependencyCount:AutoCollectPerformance._totalFailedDependencyCount,time:+new Date};var n=t.totalDependencyCount-e.totalDependencyCount||0;var r=t.totalFailedDependencyCount-e.totalFailedDependencyCount||0;var o=t.time-e.time;var s=o/1e3;var a=(AutoCollectPerformance._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;this._lastIntervalDependencyExecutionTime=AutoCollectPerformance._intervalDependencyExecutionTime;if(o>0){var c=n/s;var u=r/s;this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_RATE,value:c});this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u});if(!this._enableLiveMetricsCounters||n>0){this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}}this._lastDependencies=t}};AutoCollectPerformance.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions;var t={totalExceptionCount:AutoCollectPerformance._totalExceptionCount,time:+new Date};var n=t.totalExceptionCount-e.totalExceptionCount||0;var r=t.time-e.time;var o=r/1e3;if(r>0){var s=n/o;this._client.trackMetric({name:i.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=t}};AutoCollectPerformance.prototype.dispose=function(){AutoCollectPerformance.INSTANCE=null;this.enable(false);this._isInitialized=false};AutoCollectPerformance._totalRequestCount=0;AutoCollectPerformance._totalFailedRequestCount=0;AutoCollectPerformance._lastRequestExecutionTime=0;AutoCollectPerformance._totalDependencyCount=0;AutoCollectPerformance._totalFailedDependencyCount=0;AutoCollectPerformance._lastDependencyExecutionTime=0;AutoCollectPerformance._totalExceptionCount=0;AutoCollectPerformance._intervalDependencyExecutionTime=0;AutoCollectPerformance._intervalRequestExecutionTime=0;return AutoCollectPerformance}();e.exports=o},472:function(e){"use strict";var t=function(){function Domain(){}return Domain}();e.exports=t},485:function(e,t,n){"use strict";var r=n(87);var i=n(747);var o=n(622);var s=n(367);var a=n(970);var c=function(){function Context(e){this.keys=new s.ContextTagKeys;this.tags={};this._loadApplicationContext();this._loadDeviceContext();this._loadInternalContext()}Context.prototype._loadApplicationContext=function(e){e=e||o.resolve(__dirname,"../../../../package.json");if(!Context.appVersion[e]){Context.appVersion[e]="unknown";try{var t=JSON.parse(i.readFileSync(e,"utf8"));if(t&&typeof t.version==="string"){Context.appVersion[e]=t.version}}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=Context.appVersion[e]};Context.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="";this.tags[this.keys.cloudRoleInstance]=r&&r.hostname();this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release();this.tags[this.keys.cloudRole]=Context.DefaultRoleName;this.tags["ai.device.osArchitecture"]=r&&r.arch();this.tags["ai.device.osPlatform"]=r&&r.platform()};Context.prototype._loadInternalContext=function(){var e=n.ab+"package.json";if(!Context.sdkVersion){Context.sdkVersion="unknown";try{var t=JSON.parse(i.readFileSync(n.ab+"package.json","utf8"));if(t&&typeof t.version==="string"){Context.sdkVersion=t.version}}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+Context.sdkVersion};Context.DefaultRoleName="Web";Context.appVersion={};Context.sdkVersion=null;return Context}();e.exports=c},503:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(175);var o=n(459);var s=n(366);var a=n(970);var c=function(e){r(NodeClient,e);function NodeClient(){return e!==null&&e.apply(this,arguments)||this}NodeClient.prototype.trackNodeHttpRequestSync=function(e){if(e&&e.request&&e.response&&e.duration){o.trackRequestSync(this,e)}else{a.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")}};NodeClient.prototype.trackNodeHttpRequest=function(e){if(e.duration||e.error){a.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.")}if(e&&e.request&&e.response){o.trackRequest(this,e)}else{a.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")}};NodeClient.prototype.trackNodeHttpDependency=function(e){if(e&&e.request){s.trackRequest(this,e)}else{a.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")}};return NodeClient}(i);e.exports=c},504:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(942);t.bunyan=r;var i=n(590);t.console=i;var o=n(925);t.mongodbCore=o;var s=n(309);t.mongodb=s;var a=n(944);t.mysql=a;var c=n(514);t.pgPool=c;var u=n(937);t.pg=u;var f=n(431);t.redis=f;var l=n(606);t.winston=l;function enable(){r.enable();i.enable();o.enable();s.enable();a.enable();u.enable();c.enable();f.enable();l.enable()}t.enable=enable},508:function(e,t,n){"use strict";var r=n(357);var i=n(848);var o="cls@contexts";var s="error@context";if(!process.addAsyncListener)n(522);function Namespace(e){this.name=e;this.active=null;this._set=[];this.id=null}Namespace.prototype.set=function(e,t){if(!this.active){throw new Error("No context available. ns.run() or ns.bind() must be called first.")}this.active[e]=t;return t};Namespace.prototype.get=function(e){if(!this.active)return undefined;return this.active[e]};Namespace.prototype.createContext=function(){return Object.create(this.active)};Namespace.prototype.run=function(e){var t=this.createContext();this.enter(t);try{e(t);return t}catch(e){if(e){e[s]=t}throw e}finally{this.exit(t)}};Namespace.prototype.runAndReturn=function(e){var t;this.run(function(n){t=e(n)});return t};Namespace.prototype.bind=function(e,t){if(!t){if(!this.active){t=this.createContext()}else{t=this.active}}var n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){if(e){e[s]=t}throw e}finally{n.exit(t)}}};Namespace.prototype.enter=function(e){r.ok(e,"context must be provided for entering");this._set.push(this.active);this.active=e};Namespace.prototype.exit=function(e){r.ok(e,"context must be provided for exiting");if(this.active===e){r.ok(this._set.length,"can't remove top context");this.active=this._set.pop();return}var t=this._set.lastIndexOf(e);r.ok(t>=0,"context not currently entered; can't exit");r.ok(t,"can't remove top context");this._set.splice(t,1)};Namespace.prototype.bindEmitter=function(e){r.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this;var n="context@"+this.name;function attach(e){if(!e)return;if(!e[o])e[o]=Object.create(null);e[o][n]={namespace:t,context:t.active}}function bind(e){if(!(e&&e[o]))return e;var t=e;var n=e[o];Object.keys(n).forEach(function(e){var r=n[e];t=r.namespace.bind(t,r.context)});return t}i(e,attach,bind)};Namespace.prototype.fromException=function(e){return e[s]};function get(e){return process.namespaces[e]}function create(e){r.ok(e,"namespace must be given a name!");var t=new Namespace(e);t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,n){if(n)t.enter(n)},after:function(e,n){if(n)t.exit(n)},error:function(e){if(e)t.exit(e)}});process.namespaces[e]=t;return t}function destroy(e){var t=get(e);r.ok(t,"can't delete nonexistent namespace!");r.ok(t.id,"don't assign to process.namespaces directly!");process.removeAsyncListener(t.id);process.namespaces[e]=null}function reset(){if(process.namespaces){Object.keys(process.namespaces).forEach(function(e){destroy(e)})}process.namespaces=Object.create(null)}if(!process.namespaces)reset();e.exports={getNamespace:get,createNamespace:create,destroyNamespace:destroy,reset:reset}},513:function(e){"use strict";var t=function(){function AutoCollectExceptions(e){if(!!AutoCollectExceptions.INSTANCE){throw new Error("Exception tracking should be configured from the applicationInsights object")}AutoCollectExceptions.INSTANCE=this;this._client=e}Object.defineProperty(AutoCollectExceptions,"UNCAUGHT_EXCEPTION_HANDLER_NAME",{get:function(){return"uncaughtException"},enumerable:true,configurable:true});Object.defineProperty(AutoCollectExceptions,"UNHANDLED_REJECTION_HANDLER_NAME",{get:function(){return"unhandledRejection"},enumerable:true,configurable:true});AutoCollectExceptions.prototype.isInitialized=function(){return this._isInitialized};AutoCollectExceptions.prototype.enable=function(e){var t=this;if(e){this._isInitialized=true;var n=this;if(!this._exceptionListenerHandle){var r=function(e,n){if(n===void 0){n=new Error(AutoCollectExceptions._FALLBACK_ERROR_MESSAGE)}t._client.trackException({exception:n});t._client.flush({isAppCrashing:true});if(e){var r=n;throw r}};this._exceptionListenerHandle=r.bind(this,true);this._rejectionListenerHandle=r.bind(this,false);process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle);process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)}}else{if(this._exceptionListenerHandle){process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle);process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle);this._exceptionListenerHandle=undefined;this._rejectionListenerHandle=undefined;delete this._exceptionListenerHandle;delete this._rejectionListenerHandle}}};AutoCollectExceptions.prototype.dispose=function(){AutoCollectExceptions.INSTANCE=null;this.enable(false);this._isInitialized=false};AutoCollectExceptions.INSTANCE=null;AutoCollectExceptions._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.";return AutoCollectExceptions}();e.exports=t},514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);function postgresPool1PatchFunction(e){var t=e.prototype.connect;e.prototype.connect=function connect(e){if(e){arguments[0]=r.channel.bindToContext(e)}return t.apply(this,arguments)};return e}t.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:postgresPool1PatchFunction};function enable(){r.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}t.enable=enable},519:function(e,t,n){t.require=function(){var e=n(747);if(process.versions["electron"]){try{originalFs=n(533);if(Object.keys(originalFs).length>0){e=originalFs}}catch(e){}}return e}},522:function(e,t,n){"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var r=n(858),i=n(105),o=r.wrap,s=r.massWrap,a=n(934),c=n(669);var u=i.gte(process.version,"6.0.0");var f=i.gte(process.version,"7.0.0");var l=i.gte(process.version,"8.0.0");var p=i.gte(process.version,"11.0.0");var d=n(631);if(f&&!d._normalizeArgs){d._normalizeArgs=function(e){if(e.length===0){return[{},null]}var t=e[0];var n={};if(typeof t==="object"&&t!==null){n=t}else if(isPipeName(t)){n.path=t}else{n.port=t;if(e.length>1&&typeof e[1]==="string"){n.host=e[1]}}var r=e[e.length-1];if(typeof r!=="function")return[n,null];else return[n,r]}}else if(!f&&!d._normalizeConnectArgs){d._normalizeConnectArgs=function(e){var t={};function toNumber(e){return(e=Number(e))>=0?e:false}if(typeof e[0]==="object"&&e[0]!==null){t=e[0]}else if(typeof e[0]==="string"&&toNumber(e[0])===false){t.path=e[0]}else{t.port=e[0];if(typeof e[1]==="string"){t.host=e[1]}}var n=e[e.length-1];return typeof n==="function"?[t,n]:[t]}}if("_setUpListenHandle"in d.Server.prototype){o(d.Server.prototype,"_setUpListenHandle",wrapSetUpListenHandle)}else{o(d.Server.prototype,"_listen2",wrapSetUpListenHandle)}function wrapSetUpListenHandle(e){return function(){this.on("connection",function(e){if(e._handle){e._handle.onread=a(e._handle.onread)}});try{return e.apply(this,arguments)}finally{if(this._handle&&this._handle.onconnection){this._handle.onconnection=a(this._handle.onconnection)}}}}function patchOnRead(e){if(e&&e._handle){var t=e._handle;if(!t._originalOnread){t._originalOnread=t.onread}t.onread=a(t._originalOnread)}}o(d.Socket.prototype,"connect",function(e){return function(){var t;if(l&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0){t=arguments[0]}else{t=f?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments)}if(t[1])t[1]=a(t[1]);var n=e.apply(this,t);patchOnRead(this);return n}});var h=n(605);o(h.Agent.prototype,"addRequest",function(e){return function(t){var n=t.onSocket;t.onSocket=a(function(e){patchOnRead(e);return n.apply(this,arguments)});return e.apply(this,arguments)}});var v=n(129);function wrapChildProcess(e){if(Array.isArray(e.stdio)){e.stdio.forEach(function(e){if(e&&e._handle){e._handle.onread=a(e._handle.onread);o(e._handle,"close",activatorFirst)}})}if(e._handle){e._handle.onexit=a(e._handle.onexit)}}if(v.ChildProcess){o(v.ChildProcess.prototype,"spawn",function(e){return function(){var t=e.apply(this,arguments);wrapChildProcess(this);return t}})}else{s(v,["execFile","fork","spawn"],function(e){return function(){var t=e.apply(this,arguments);wrapChildProcess(t);return t}})}if(!process._fatalException){process._originalNextTick=process.nextTick}var y=[];if(process._nextDomainTick)y.push("_nextDomainTick");if(process._tickDomainCallback)y.push("_tickDomainCallback");s(process,y,activator);o(process,"nextTick",activatorFirst);var g=["setTimeout","setInterval"];if(global.setImmediate)g.push("setImmediate");var m=n(213);var C=global.setTimeout===m.setTimeout;s(m,g,activatorFirst);if(C){s(global,g,activatorFirst)}var E=n(819);s(E,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],activator);if(E.resolveNaptr)o(E,"resolveNaptr",activator);var _=n(747);s(_,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],activator);if(_.lchown)o(_,"lchown",activator);if(_.lchmod)o(_,"lchmod",activator);if(_.ftruncate)o(_,"ftruncate",activator);var T;try{T=n(761)}catch(e){}if(T&&T.Deflate&&T.Deflate.prototype){var I=Object.getPrototypeOf(T.Deflate.prototype);if(I._transform){o(I,"_transform",activator)}else if(I.write&&I.flush&&I.end){s(I,["write","flush","end"],activator)}}var w;try{w=n(417)}catch(e){}if(w){var S=["pbkdf2","randomBytes"];if(!p){S.push("pseudoRandomBytes")}s(w,S,activator)}var A=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";if(A){var b=process.addAsyncListener({create:function create(){A=false}});global.Promise.resolve(true).then(function notSync(){A=false});process.removeAsyncListener(b)}if(A){wrapPromise()}function wrapPromise(){var e=global.Promise;function wrappedPromise(t){if(!(this instanceof wrappedPromise)){return e(t)}if(typeof t!=="function"){return new e(t)}var n,r;var i=new e(wrappedExecutor);i.__proto__=wrappedPromise.prototype;try{t.apply(n,r)}catch(e){r[1](e)}return i;function wrappedExecutor(e,t){n=this;r=[wrappedResolve,wrappedReject];function wrappedResolve(t){ensureAslWrapper(i,false);return e(t)}function wrappedReject(e){ensureAslWrapper(i,false);return t(e)}}}c.inherits(wrappedPromise,e);o(e.prototype,"then",wrapThen);if(e.prototype.chain){o(e.prototype,"chain",wrapThen)}if(u){global.Promise=n(36)(e,ensureAslWrapper)}else{var t=["all","race","reject","resolve","accept","defer"];t.forEach(function(t){if(typeof e[t]==="function"){wrappedPromise[t]=e[t]}});global.Promise=wrappedPromise}function ensureAslWrapper(e,t){if(!e.__asl_wrapper||t){e.__asl_wrapper=a(propagateAslWrapper)}}function propagateAslWrapper(t,n,r,i){var o;try{o=n.call(t,r);return{returnVal:o,error:false}}catch(e){return{errorVal:e,error:true}}finally{if(o instanceof e){i.__asl_wrapper=function proxyWrapper(){var e=o.__asl_wrapper||propagateAslWrapper;return e.apply(this,arguments)}}else{ensureAslWrapper(i,true)}}}function wrapThen(e){return function wrappedThen(){var t=this;var n=e.apply(t,Array.prototype.map.call(arguments,bind));n.__asl_wrapper=function proxyWrapper(e,r,i,o){if(t.__asl_wrapper){t.__asl_wrapper(e,function(){},null,n);return n.__asl_wrapper(e,r,i,o)}return propagateAslWrapper(e,r,i,o)};return n;function bind(e){if(typeof e!=="function")return e;return a(function(r){var i=(t.__asl_wrapper||propagateAslWrapper)(this,e,r,n);if(i.error){throw i.errorVal}else{return i.returnVal}})}}}}function activator(e){var t=function(){var t;var n=arguments.length-1;if(typeof arguments[n]==="function"){t=Array(arguments.length);for(var r=0;r<arguments.length-1;r++){t[r]=arguments[r]}t[n]=a(arguments[n])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){if(arguments.length!==1)return t.apply(this,arguments);if(typeof n==="function")n=a(n);return e.call(this,n)};case 2:return function(n,r){if(arguments.length!==2)return t.apply(this,arguments);if(typeof r==="function")r=a(r);return e.call(this,n,r)};case 3:return function(n,r,i){if(arguments.length!==3)return t.apply(this,arguments);if(typeof i==="function")i=a(i);return e.call(this,n,r,i)};case 4:return function(n,r,i,o){if(arguments.length!==4)return t.apply(this,arguments);if(typeof o==="function")o=a(o);return e.call(this,n,r,i,o)};case 5:return function(n,r,i,o,s){if(arguments.length!==5)return t.apply(this,arguments);if(typeof s==="function")s=a(s);return e.call(this,n,r,i,o,s)};case 6:return function(n,r,i,o,s,c){if(arguments.length!==6)return t.apply(this,arguments);if(typeof c==="function")c=a(c);return e.call(this,n,r,i,o,s,c)};default:return t}}function activatorFirst(e){var t=function(){var t;if(typeof arguments[0]==="function"){t=Array(arguments.length);t[0]=a(arguments[0]);for(var n=1;n<arguments.length;n++){t[n]=arguments[n]}}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){if(arguments.length!==1)return t.apply(this,arguments);if(typeof n==="function")n=a(n);return e.call(this,n)};case 2:return function(n,r){if(arguments.length!==2)return t.apply(this,arguments);if(typeof n==="function")n=a(n);return e.call(this,n,r)};case 3:return function(n,r,i){if(arguments.length!==3)return t.apply(this,arguments);if(typeof n==="function")n=a(n);return e.call(this,n,r,i)};case 4:return function(n,r,i,o){if(arguments.length!==4)return t.apply(this,arguments);if(typeof n==="function")n=a(n);return e.call(this,n,r,i,o)};case 5:return function(n,r,i,o,s){if(arguments.length!==5)return t.apply(this,arguments);if(typeof n==="function")n=a(n);return e.call(this,n,r,i,o,s)};case 6:return function(n,r,i,o,s,c){if(arguments.length!==6)return t.apply(this,arguments);if(typeof n==="function")n=a(n);return e.call(this,n,r,i,o,s,c)};default:return t}}function toNumber(e){return(e=Number(e))>=0?e:false}function isPipeName(e){return typeof e==="string"&&toNumber(e)===false}},528:function(e,t,n){"use strict";var r=n(970);var i=function(){function Channel(e,t,n,r){this._buffer=[];this._lastSend=0;this._isDisabled=e;this._getBatchSize=t;this._getBatchIntervalMs=n;this._sender=r}Channel.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)};Channel.prototype.send=function(e){var t=this;if(this._isDisabled()){return}if(!e){r.warn("Cannot send null/undefined telemetry");return}var n=this._stringify(e);if(typeof n!=="string"){return}this._buffer.push(n);if(this._buffer.length>=this._getBatchSize()){this.triggerSend(false);return}if(!this._timeoutHandle&&this._buffer.length>0){this._timeoutHandle=setTimeout(function(){t._timeoutHandle=null;t.triggerSend(false)},this._getBatchIntervalMs())}};Channel.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;if(!n){var r=this._buffer.join("\n");if(e){this._sender.saveOnCrash(r);if(typeof t==="function"){t("data saved on crash")}}else{this._sender.send(Buffer.from?Buffer.from(r):new Buffer(r),t)}}this._lastSend=+new Date;this._buffer.length=0;clearTimeout(this._timeoutHandle);this._timeoutHandle=null;if(n&&typeof t==="function"){t("no data to send")}};Channel.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){r.warn("Failed to serialize payload",t,e)}};return Channel}();e.exports=i},533:function(module){module.exports=eval("require")("original-fs")},543:function(e,t,n){var r=n(402),i=r.Constants;e.exports=function(){var e=0,t=0,n=0,o=0,s=0;return{get diskEntries(){return e},set diskEntries(n){e=t=n},get totalEntries(){return t},set totalEntries(n){t=e=n},get size(){return n},set size(e){n=e},get offset(){return o},set offset(e){o=e},get commentLength(){return s},set commentLength(e){s=e},get mainHeaderSize(){return i.ENDHDR+s},loadFromBinary:function(a){if(a.length!==i.ENDHDR||a.readUInt32LE(0)!==i.ENDSIG)throw r.Errors.INVALID_END;e=a.readUInt16LE(i.ENDSUB);t=a.readUInt16LE(i.ENDTOT);n=a.readUInt32LE(i.ENDSIZ);o=a.readUInt32LE(i.ENDOFF);s=a.readUInt16LE(i.ENDCOM)},toBinary:function(){var r=Buffer.alloc(i.ENDHDR+s);r.writeUInt32LE(i.ENDSIG,0);r.writeUInt32LE(0,4);r.writeUInt16LE(e,i.ENDSUB);r.writeUInt16LE(t,i.ENDTOT);r.writeUInt32LE(n,i.ENDSIZ);r.writeUInt32LE(o,i.ENDOFF);r.writeUInt16LE(s,i.ENDCOM);r.fill(" ",i.ENDHDR);return r},toString:function(){return"{\n"+'\t"diskEntries" : '+e+",\n"+'\t"totalEntries" : '+t+",\n"+'\t"size" : '+n+" bytes,\n"+'\t"offset" : 0x'+o.toString(16).toUpperCase()+",\n"+'\t"commentLength" : 0x'+s+"\n"+"}"}}}},545:function(e,t,n){"use strict";function __export(e){for(var n in e)if(!t.hasOwnProperty(n))t[n]=e[n]}Object.defineProperty(t,"__esModule",{value:true});__export(n(583))},555:function(e,t,n){"use strict";var r=n(367);var i=n(179);var o=n(287);var s=function(){function EnvelopeFactory(){}EnvelopeFactory.createEnvelope=function(e,t,n,o,s){var a=null;switch(t){case r.TelemetryType.Trace:a=EnvelopeFactory.createTraceData(e);break;case r.TelemetryType.Dependency:a=EnvelopeFactory.createDependencyData(e);break;case r.TelemetryType.Event:a=EnvelopeFactory.createEventData(e);break;case r.TelemetryType.Exception:a=EnvelopeFactory.createExceptionData(e);break;case r.TelemetryType.Request:a=EnvelopeFactory.createRequestData(e);break;case r.TelemetryType.Metric:a=EnvelopeFactory.createMetricData(e);break;case r.TelemetryType.Availability:a=EnvelopeFactory.createAvailabilityData(e);break}if(n&&r.domainSupportsProperties(a.baseData)){if(a&&a.baseData){if(!a.baseData.properties){a.baseData.properties=n}else{for(var c in n){if(!a.baseData.properties[c]){a.baseData.properties[c]=n[c]}}}}a.baseData.properties=i.validateStringMap(a.baseData.properties)}var u=s?s.instrumentationKey||"":"";var f=new r.Envelope;f.data=a;f.iKey=u;f.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+a.baseType.substr(0,a.baseType.length-4);f.tags=this.getTags(o,e.tagOverrides);f.time=(new Date).toISOString();f.ver=1;f.sampleRate=s?s.samplingPercentage:100;if(t===r.TelemetryType.Metric){f.sampleRate=100}return f};EnvelopeFactory.createTraceData=function(e){var t=new r.MessageData;t.message=e.message;t.properties=e.properties;if(!isNaN(e.severity)){t.severityLevel=e.severity}else{t.severityLevel=r.SeverityLevel.Information}var n=new r.Data;n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace);n.baseData=t;return n};EnvelopeFactory.createDependencyData=function(e){var t=new r.RemoteDependencyData;t.name=e.name;t.data=e.data;t.target=e.target;t.duration=i.msToTimeSpan(e.duration);t.success=e.success;t.type=e.dependencyTypeName;t.properties=e.properties;t.resultCode=e.resultCode?e.resultCode+"":"";if(e.id){t.id=e.id}else{t.id=i.w3cTraceId()}var n=new r.Data;n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency);n.baseData=t;return n};EnvelopeFactory.createEventData=function(e){var t=new r.EventData;t.name=e.name;t.properties=e.properties;t.measurements=e.measurements;var n=new r.Data;n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event);n.baseData=t;return n};EnvelopeFactory.createExceptionData=function(e){var t=new r.ExceptionData;t.properties=e.properties;if(!isNaN(e.severity)){t.severityLevel=e.severity}else{t.severityLevel=r.SeverityLevel.Error}t.measurements=e.measurements;t.exceptions=[];var n=e.exception["stack"];var o=new r.ExceptionDetails;o.message=e.exception.message;o.typeName=e.exception.name;o.parsedStack=this.parseStack(n);o.hasFullStack=i.isArray(o.parsedStack)&&o.parsedStack.length>0;t.exceptions.push(o);var s=new r.Data;s.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception);s.baseData=t;return s};EnvelopeFactory.createRequestData=function(e){var t=new r.RequestData;if(e.id){t.id=e.id}else{t.id=i.w3cTraceId()}t.name=e.name;t.url=e.url;t.source=e.source;t.duration=i.msToTimeSpan(e.duration);t.responseCode=e.resultCode?e.resultCode+"":"";t.success=e.success;t.properties=e.properties;var n=new r.Data;n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request);n.baseData=t;return n};EnvelopeFactory.createMetricData=function(e){var t=new r.MetricData;t.metrics=[];var n=new r.DataPoint;n.count=!isNaN(e.count)?e.count:1;n.kind=r.DataPointType.Aggregation;n.max=!isNaN(e.max)?e.max:e.value;n.min=!isNaN(e.min)?e.min:e.value;n.name=e.name;n.stdDev=!isNaN(e.stdDev)?e.stdDev:0;n.value=e.value;t.metrics.push(n);t.properties=e.properties;var i=new r.Data;i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric);i.baseData=t;return i};EnvelopeFactory.createAvailabilityData=function(e){var t=new r.AvailabilityData;if(e.id){t.id=e.id}else{t.id=i.w3cTraceId()}t.name=e.name;t.duration=i.msToTimeSpan(e.duration);t.success=e.success;t.runLocation=e.runLocation;t.message=e.message;t.measurements=e.measurements;t.properties=e.properties;var n=new r.Data;n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability);n.baseData=t;return n};EnvelopeFactory.getTags=function(e,t){var n=o.CorrelationContextManager.getCurrentContext();var r={};if(e&&e.tags){for(var i in e.tags){r[i]=e.tags[i]}}if(t){for(var i in t){r[i]=t[i]}}if(n){r[e.keys.operationId]=r[e.keys.operationId]||n.operation.id;r[e.keys.operationName]=r[e.keys.operationName]||n.operation.name;r[e.keys.operationParentId]=r[e.keys.operationParentId]||n.operation.parentId}return r};EnvelopeFactory.parseStack=function(e){var t=undefined;if(typeof e==="string"){var n=e.split("\n");t=[];var r=0;var i=0;for(var o=0;o<=n.length;o++){var s=n[o];if(a.regex.test(s)){var c=new a(n[o],r++);i+=c.sizeInBytes;t.push(c)}}var u=32*1024;if(i>u){var f=0;var l=t.length-1;var p=0;var d=f;var h=l;while(f<l){var v=t[f].sizeInBytes;var y=t[l].sizeInBytes;p+=v+y;if(p>u){var g=h-d+1;t.splice(d,g);break}d=f;h=l;f++;l--}}}return t};return EnvelopeFactory}();var a=function(){function _StackFrame(e,t){this.sizeInBytes=0;this.level=t;this.method="<no_method>";this.assembly=i.trim(e);var n=e.match(_StackFrame.regex);if(n&&n.length>=5){this.method=i.trim(n[2])||this.method;this.fileName=i.trim(n[4])||"<no_filename>";this.line=parseInt(n[5])||0}this.sizeInBytes+=this.method.length;this.sizeInBytes+=this.fileName.length;this.sizeInBytes+=this.assembly.length;this.sizeInBytes+=_StackFrame.baseSize;this.sizeInBytes+=this.level.toString().length;this.sizeInBytes+=this.line.toString().length}_StackFrame.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/;_StackFrame.baseSize=58;return _StackFrame}();e.exports=s},566:function(e,t,n){e.exports=function(e){var t=n(761);return{inflate:function(){return t.inflateRawSync(e)},inflateAsync:function(n){var r=t.createInflateRaw(),i=[],o=0;r.on("data",function(e){i.push(e);o+=e.length});r.on("end",function(){var e=Buffer.alloc(o),t=0;e.fill(0);for(var r=0;r<i.length;r++){var s=i[r];s.copy(e,t);t+=s.length}n&&n(e)});r.end(e)}}}},571:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class ApkSizeSummary{constructor(){this.apkLabel="";this.sizeMetrics={}}}t.default=ApkSizeSummary},583:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function telemetryTypeToBaseType(e){switch(e){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData"}return undefined}t.telemetryTypeToBaseType=telemetryTypeToBaseType;function baseTypeToTelemetryType(e){switch(e){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability}return undefined}t.baseTypeToTelemetryType=baseTypeToTelemetryType;t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData"};var n;(function(e){e[e["Event"]=0]="Event";e[e["Exception"]=1]="Exception";e[e["Trace"]=2]="Trace";e[e["Metric"]=3]="Metric";e[e["Request"]=4]="Request";e[e["Dependency"]=5]="Dependency";e[e["Availability"]=6]="Availability"})(n=t.TelemetryType||(t.TelemetryType={}))},589:function(e){e.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,FLG_ENC:0,FLG_COMP1:1,FLG_COMP2:2,FLG_DESC:4,FLG_ENH:8,FLG_STR:16,FLG_LNG:1024,FLG_MSK:4096,FILE:0,BUFFER:1,NONE:2,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}},590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=n(413);var o=function(e){var t=new i.Writable;var n=new i.Writable;t.write=function(e){if(!e){return true}var t=e.toString();r.channel.publish("console",{message:t});return true};n.write=function(e){if(!e){return true}var t=e.toString();r.channel.publish("console",{message:t,stderr:true});return true};var o=new e.Console(t,n);var s=["log","info","warn","error","dir","time","timeEnd","trace","assert"];var a=function(t){var n=e[t];if(n){e[t]=function(){if(o[t]){try{o[t].apply(o,arguments)}catch(e){}}return n.apply(e,arguments)}}};for(var c=0,u=s;c<u.length;c++){var f=u[c];a(f)}return e};t.console={versionSpecifier:">= 4.0.0",patch:o};function enable(){r.channel.registerMonkeyPatch("console",t.console);n(82)}t.enable=enable},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(367);var i=n(243);var o=[];var s=function(e){var t=e.data.message;o.forEach(function(n){if(t instanceof Error){n.trackException({exception:t})}else{if(t.lastIndexOf("\n")==t.length-1){t=t.substring(0,t.length-1)}n.trackTrace({message:t,severity:e.data.stderr?r.SeverityLevel.Warning:r.SeverityLevel.Information})}})};function enable(e,t){if(e){if(o.length===0){i.channel.subscribe("console",s)}o.push(t)}else{o=o.filter(function(e){return e!=t});if(o.length===0){i.channel.unsubscribe("console",s)}}}t.enable=enable;function dispose(){i.channel.unsubscribe("console",s);o=[]}t.dispose=dispose},602:function(e,t,n){"use strict";var r=n(747),i=n(304).StringDecoder;function createLineReader(e,t,n){if(t instanceof Function){n=t;t=undefined}if(!t)t={};var r=t.encoding||"utf8",o=t.separator||/\r\n?|\n/,s=t.bufferSize||1024,a="",c=new i(r),u=false,f=false,l=-1,p,d,h=false,v;if(o instanceof RegExp){v=function(){var e=o.exec(a);if(e&&(e.index+e[0].length<a.length||f)){l=e.index;p=e[0].length}else{l=-1;p=0}}}else{p=o.length;v=function(){l=a.indexOf(o)}}function getReadStream(){return e}function close(t){if(!u){u=true;if(typeof e.close=="function"){e.close()}setImmediate(t)}}function onFailure(e){close(function(t){return n(e||t)})}function isOpen(){return!u}function isClosed(){return u}function waitForMoreToRead(e){if(h){e()}else{d=e}}function resumeDeferredRead(){if(d){d();d=null}}function read(t){waitForMoreToRead(function(){var n;try{n=e.read(s)}catch(e){t(e)}if(n){a+=c.write(n.slice(0,n.length))}else{h=false}t()})}function onStreamReadable(){h=true;resumeDeferredRead()}function onStreamEnd(){f=true;resumeDeferredRead()}e.on("readable",onStreamReadable);e.on("end",onStreamEnd);e.on("error",onFailure);function shouldReadMore(){v();return l<0&&!f}function callWhile(e,t,n){if(e()){t(function(r){if(r){n(r)}else{setImmediate(callWhile,e,t,n)}})}else{n()}}function readToSeparator(e){callWhile(shouldReadMore,read,e)}function hasNextLine(){return a.length>0||!f}function nextLine(e){if(u){return e(new Error("LineReader has been closed"))}function getLine(t){if(t){return e(t)}if(l<0&&f){l=a.length}var n=a.substring(0,l);a=a.substring(l+p);l=-1;e(undefined,n)}v();if(l<0){if(f){if(hasNextLine()){l=a.length;getLine()}else{return e(new Error("No more lines to read."))}}else{readToSeparator(getLine)}}else{getLine()}}readToSeparator(function(e){if(e){onFailure(e)}else{return n(undefined,{hasNextLine:hasNextLine,nextLine:nextLine,close:close,isOpen:isOpen,isClosed:isClosed,getReadStream:getReadStream})}})}function open(e,t,n){if(t instanceof Function){n=t;t=undefined}var i;if(typeof e.read=="function"){i=e}else if(typeof e==="string"||e instanceof String){i=r.createReadStream(e)}else{n(new Error("Invalid file argument for LineReader.open.  Must be filename or stream."));return}i.pause();createLineReader(i,t,n)}function eachLine(e,t,n,r){if(t instanceof Function){r=n;n=t;t=undefined}var i=n.length===3;var o;var s;open(e,t,function(e,t){o=t;if(s){s(t)}if(e){if(r)r(e);return}function finish(e){t.close(function(t){if(r)r(e||t)})}function newRead(){if(t.hasNextLine()){setImmediate(readNext)}else{finish()}}function continueCb(e){if(e!==false){newRead()}else{finish()}}function readNext(){t.nextLine(function(e,r){if(e){finish(e)}var o=!t.hasNextLine();if(i){n(r,o,continueCb)}else{if(n(r,o)!==false){newRead()}else{finish()}}})}newRead()});return{getReader:function(e){if(o){e(o)}else{s=e}}}}e.exports.open=open;e.exports.eachLine=eachLine},603:function(e){"use strict";var t=function(){function ContextTagKeys(){this.applicationVersion="ai.application.ver";this.deviceId="ai.device.id";this.deviceLocale="ai.device.locale";this.deviceModel="ai.device.model";this.deviceOEMName="ai.device.oemName";this.deviceOSVersion="ai.device.osVersion";this.deviceType="ai.device.type";this.locationIp="ai.location.ip";this.operationId="ai.operation.id";this.operationName="ai.operation.name";this.operationParentId="ai.operation.parentId";this.operationSyntheticSource="ai.operation.syntheticSource";this.operationCorrelationVector="ai.operation.correlationVector";this.sessionId="ai.session.id";this.sessionIsFirst="ai.session.isFirst";this.userAccountId="ai.user.accountId";this.userId="ai.user.id";this.userAuthUserId="ai.user.authUserId";this.cloudRole="ai.cloud.role";this.cloudRoleInstance="ai.cloud.roleInstance";this.internalSdkVersion="ai.internal.sdkVersion";this.internalAgentVersion="ai.internal.agentVersion";this.internalNodeName="ai.internal.nodeName"}return ContextTagKeys}();e.exports=t},605:function(e){e.exports=require("http")},606:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=this&&this.__rest||function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)if(t.indexOf(r[i])<0)n[r[i]]=e[r[i]];return n};Object.defineProperty(t,"__esModule",{value:true});var o=n(243);var s=function(e){var t=e.Logger.prototype.log;var n;var r=function(t,r,i){var s;if(n===e.config.npm.levels){s="npm"}else if(n===e.config.syslog.levels){s="syslog"}else{s="unknown"}o.channel.publish("winston",{level:t,message:r,meta:i,levelKind:s});return r};e.Logger.prototype.log=function log(){n=this.levels;if(!this.filters||this.filters.length===0){this.filters=[r]}else if(this.filters[this.filters.length-1]!==r){this.filters=this.filters.filter(function(e){return e!==r});this.filters.push(r)}return t.apply(this,arguments)};return e};var a=function(e){var t=function(e,t){var n;if(e.config.npm.levels[t]!=null){n="npm"}else if(e.config.syslog.levels[t]!=null){n="syslog"}else{n="unknown"}return n};var n=function(e){r(AppInsightsTransport,e);function AppInsightsTransport(t,n){var r=e.call(this,n)||this;r.winston=t;return r}AppInsightsTransport.prototype.log=function(e,n){var r=e.message,s=e.level,a=e.meta,c=i(e,["message","level","meta"]);s=typeof Symbol["for"]==="function"?e[Symbol["for"]("level")]:s;var u=t(this.winston,s);a=a||{};for(var f in c){if(c.hasOwnProperty(f)){a[f]=c[f]}}o.channel.publish("winston",{message:r,level:s,levelKind:u,meta:a});n()};return AppInsightsTransport}(e.Transport);function patchedConfigure(){var t=arguments[0].levels||e.config.npm.levels;var r;for(var i in t){if(t.hasOwnProperty(i)){r=r===undefined||t[i]>t[r]?i:r}}this.add(new n(e,{level:r}))}var s=e.createLogger;e.createLogger=function patchedCreate(){var t=arguments[0].levels||e.config.npm.levels;var r;for(var i in t){if(t.hasOwnProperty(i)){r=r===undefined||t[i]>t[r]?i:r}}var o=s.apply(this,arguments);o.add(new n(e,{level:r}));var a=o.configure;o.configure=function(){a.apply(this,arguments);patchedConfigure.apply(this,arguments)};return o};var a=e.createLogger;e.configure=function(){a.apply(this,arguments);patchedConfigure.apply(this,arguments)};e.add(new n(e));return e};t.winston3={versionSpecifier:"3.x",patch:a};t.winston2={versionSpecifier:"2.x",patch:s};function enable(){o.channel.registerMonkeyPatch("winston",t.winston2);o.channel.registerMonkeyPatch("winston",t.winston3)}t.enable=enable},614:function(e){e.exports=require("events")},615:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const o=i(n(771));class ComparisionReportGenerator{constructor(e,t){this.apkAnalyser=e;this.reporter=t}generateComparisionReport(e,t,n,i,s,a,c){return r(this,void 0,void 0,function*(){const r=yield this.apkAnalyser.analyse(e,i);const u=yield this.apkAnalyser.analyse(t,s);const f=new o.default;f.baseApkLabel=r.apkLabel;f.targetApkLabel=u.apkLabel;a.forEach((e,t)=>{const n=r.sizeMetrics[e];const i=u.sizeMetrics[e];const o=i-n;f.comparisionMetrics.push({metricName:e,baseValue:n,targetValue:i,difference:o,threshold:c[t]})});this.reporter.writeReport(f,n);return f})}}t.default=ComparisionReportGenerator},619:function(e){e.exports=require("constants")},620:function(e,t,n){"use strict";const r=process.binding("async_wrap");const i=r.Providers.TIMERWRAP;const o={nextTick:n(764),promise:n(37),timers:n(737)};const s=new Set;function State(){this.enabled=false;this.counter=0}function Hooks(){const e=this.initFns=[];const t=this.preFns=[];const n=this.postFns=[];const r=this.destroyFns=[];this.init=function(t,n,r,o){if(n===i){s.add(t);return}for(const i of e){i(t,this,n,r,o)}};this.pre=function(e){if(s.has(e))return;for(const n of t){n(e,this)}};this.post=function(e,t){if(s.has(e))return;for(const r of n){r(e,this,t)}};this.destroy=function(e){if(s.has(e)){s.delete(e);return}for(const t of r){t(e)}}}Hooks.prototype.add=function(e){if(e.init)this.initFns.push(e.init);if(e.pre)this.preFns.push(e.pre);if(e.post)this.postFns.push(e.post);if(e.destroy)this.destroyFns.push(e.destroy)};function removeElement(e,t){const n=e.indexOf(t);if(n===-1)return;e.splice(n,1)}Hooks.prototype.remove=function(e){if(e.init)removeElement(this.initFns,e.init);if(e.pre)removeElement(this.preFns,e.pre);if(e.post)removeElement(this.postFns,e.post);if(e.destroy)removeElement(this.destroyFns,e.destroy)};function AsyncHook(){this._state=new State;this._hooks=new Hooks;this.version=n(664).version;this.providers=r.Providers;for(const e of Object.keys(o)){o[e].call(this)}if(process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")){console.warn("warning: you are using async-hook-jl which is unstable.")}r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}e.exports=AsyncHook;AsyncHook.prototype.addHooks=function(e){this._hooks.add(e)};AsyncHook.prototype.removeHooks=function(e){this._hooks.remove(e)};AsyncHook.prototype.enable=function(){this._state.enabled=true;r.enable()};AsyncHook.prototype.disable=function(){this._state.enabled=false;r.disable()}},622:function(e){e.exports=require("path")},631:function(e){e.exports=require("net")},633:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class ThresholdChecker{constructor(e){this.ciCore=e}checkThresholds(e){var t=true;e.comparisionMetrics.forEach(e=>{if(e.threshold==NaN){this.ciCore.logInfo(e.metricName+": ignoring threshold for metric!");return}if(e.difference>e.threshold){this.ciCore.logError(e.metricName+" increased more than threshold!");t=false}});return t}}t.default=ThresholdChecker},635:function(e,t,n){"use strict";var r=n(211);var i=n(366);var o=n(970);var s={method:"POST",time:"x-ms-qps-transmission-time",subscribed:"x-ms-qps-subscribed"};var a=function(){function QuickPulseSender(e){this._config=e;this._consecutiveErrors=0}QuickPulseSender.prototype.ping=function(e,t){this._submitData(e,t,"ping")};QuickPulseSender.prototype.post=function(e,t){this._submitData([e],t,"post")};QuickPulseSender.prototype._submitData=function(e,t,n){var a=this;var c=JSON.stringify(e);var u=(l={},l[i.disableCollectionRequestOption]=true,l.host=this._config.quickPulseHost,l.method=s.method,l.path="/QuickPulseService.svc/"+n+"?ikey="+this._config.instrumentationKey,l.headers=(p={Expect:"100-continue"},p[s.time]=1e4*Date.now(),p["Content-Type"]="application/json",p["Content-Length"]=Buffer.byteLength(c),p),l);var f=r.request(u,function(e){var n=e.headers[s.subscribed]==="true";a._consecutiveErrors=0;t(n,e)});f.on("error",function(e){a._consecutiveErrors++;var n="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";if(a._consecutiveErrors%QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN===0){n="Live Metrics endpoint could not be reached "+a._consecutiveErrors+" consecutive times. Most recent error:";o.warn(QuickPulseSender.TAG,n,e)}else{o.info(QuickPulseSender.TAG,n,e)}t()});f.write(c);f.end();var l,p};QuickPulseSender.TAG="QuickPulseSender";QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN=25;return QuickPulseSender}();e.exports=a},645:function(e){"use strict";var t=function(){function Base(){}return Base}();e.exports=t},660:function(module){module.exports=eval("require")("applicationinsights-native-metrics")},664:function(e){e.exports={_args:[["async-hook-jl@1.7.6","/Users/chris/Downloads/android-app-size-diff"]],_from:"async-hook-jl@1.7.6",_id:"async-hook-jl@1.7.6",_inBundle:false,_integrity:"sha512-gFaHkFfSxTjvoxDMYqDuGHlcRyUuamF8s+ZTtJdDzqjws4mCt7v0vuV79/E2Wr2/riMQgtG4/yUtXWs1gZ7JMg==",_location:"/async-hook-jl",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"async-hook-jl@1.7.6",name:"async-hook-jl",escapedName:"async-hook-jl",rawSpec:"1.7.6",saveSpec:null,fetchSpec:"1.7.6"},_requiredBy:["/cls-hooked"],_resolved:"https://registry.npmjs.org/async-hook-jl/-/async-hook-jl-1.7.6.tgz",_spec:"1.7.6",_where:"/Users/chris/Downloads/android-app-size-diff",author:{name:"Andreas Madsen",email:"amwebdk@gmail.com"},bugs:{url:"https://github.com/jeff-lewis/async-hook-jl/issues"},dependencies:{"stack-chain":"^1.3.7"},description:"Inspect the life of handle objects in node",devDependencies:{async:"1.5.x","cli-color":"1.1.x",endpoint:"0.4.x",eslint:"^3.4.0"},engines:{node:"^4.7 || >=6.9 || >=7.3"},homepage:"https://github.com/jeff-lewis/async-hook-jl#readme",keywords:["async","async hooks","inspect","async wrap"],license:"MIT",main:"./index.js",name:"async-hook-jl",repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},scripts:{test:"node ./test/runner.js && eslint ."},version:"1.7.6"}},669:function(e){e.exports=require("util")},671:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(472);"use strict";var o=function(e){r(RemoteDependencyData,e);function RemoteDependencyData(){var t=e.call(this)||this;t.ver=2;t.success=true;t.properties={};t.measurements={};return t}return RemoteDependencyData}(i);e.exports=o},686:function(e,t,n){"use strict";var r=n(747);var i=n(87);var o=n(622);var s=n(761);var a=n(129);var c=n(970);var u=n(366);var f=n(179);var l=function(){function Sender(e,t,n){this._config=e;this._onSuccess=t;this._onError=n;this._enableDiskRetryMode=false;this._resendInterval=Sender.WAIT_BETWEEN_RESEND;this._maxBytesOnDisk=Sender.MAX_BYTES_ON_DISK;this._numConsecutiveFailures=0;if(!Sender.OS_PROVIDES_FILE_PROTECTION){if(Sender.USE_ICACLS){try{Sender.OS_PROVIDES_FILE_PROTECTION=r.existsSync(Sender.ICACLS_PATH)}catch(e){}if(!Sender.OS_PROVIDES_FILE_PROTECTION){c.warn(Sender.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}}else{Sender.OS_PROVIDES_FILE_PROTECTION=true}}}Sender.prototype.setDiskRetryMode=function(e,t,n){this._enableDiskRetryMode=Sender.OS_PROVIDES_FILE_PROTECTION&&e;if(typeof t==="number"&&t>=0){this._resendInterval=Math.floor(t)}if(typeof n==="number"&&n>=0){this._maxBytesOnDisk=Math.floor(n)}if(e&&!Sender.OS_PROVIDES_FILE_PROTECTION){this._enableDiskRetryMode=false;c.warn(Sender.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")}};Sender.prototype.send=function(e,t){var n=this;var r=this._config.endpointUrl;var i={method:"POST",withCredentials:false,headers:{"Content-Type":"application/x-json-stream"}};s.gzip(e,function(o,s){var a=s;if(o){c.warn(o);a=e;i.headers["Content-Length"]=e.length.toString()}else{i.headers["Content-Encoding"]="gzip";i.headers["Content-Length"]=s.length}c.info(Sender.TAG,i);i[u.disableCollectionRequestOption]=true;var l=function(r){r.setEncoding("utf-8");var i="";r.on("data",function(e){i+=e});r.on("end",function(){n._numConsecutiveFailures=0;c.info(Sender.TAG,i);if(typeof n._onSuccess==="function"){n._onSuccess(i)}if(typeof t==="function"){t(i)}if(n._enableDiskRetryMode){if(r.statusCode===200){setTimeout(function(){return n._sendFirstFileOnDisk()},n._resendInterval).unref()}else if(r.statusCode===408||r.statusCode===429||r.statusCode===439||r.statusCode===500||r.statusCode===503){n._storeToDisk(e)}}})};var p=f.makeRequest(n._config,r,i,l);p.on("error",function(r){n._numConsecutiveFailures++;if(!n._enableDiskRetryMode||n._numConsecutiveFailures>0&&n._numConsecutiveFailures%Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var i="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";if(n._enableDiskRetryMode){i="Ingestion endpoint could not be reached "+n._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"}c.warn(Sender.TAG,i,r)}else{var i="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";c.info(Sender.TAG,i,r)}n._onErrorHelper(r);if(typeof t==="function"){var o="error sending telemetry";if(r&&typeof r.toString==="function"){o=r.toString()}t(o)}if(n._enableDiskRetryMode){n._storeToDisk(e)}});p.write(a);p.end()})};Sender.prototype.saveOnCrash=function(e){if(this._enableDiskRetryMode){this._storeToDiskSync(e)}};Sender.prototype._runICACLS=function(e,t){var n=a.spawn(Sender.ICACLS_PATH,e,{windowsHide:true});n.on("error",function(e){return t(e)});n.on("close",function(e,n){return t(e===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))})};Sender.prototype._runICACLSSync=function(e){if(a.spawnSync){var t=a.spawnSync(Sender.ICACLS_PATH,e,{windowsHide:true});if(t.error){throw t.error}else if(t.status!==0){throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+t.status+")")}}else{throw new Error("Could not synchronously call ICACLS under current version of Node.js")}};Sender.prototype._getACLIdentity=function(e){if(Sender.ACL_IDENTITY){return e(null,Sender.ACL_IDENTITY)}var t=a.spawn(Sender.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:true,stdio:["ignore","pipe","pipe"]});var n="";t.stdout.on("data",function(e){return n+=e});t.on("error",function(t){return e(t,null)});t.on("close",function(t,r){Sender.ACL_IDENTITY=n&&n.trim();return e(t===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+t+")"),Sender.ACL_IDENTITY)})};Sender.prototype._getACLIdentitySync=function(){if(Sender.ACL_IDENTITY){return Sender.ACL_IDENTITY}if(a.spawnSync){var e=a.spawnSync(Sender.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:true,stdio:["ignore","pipe","pipe"]});if(e.error){throw e.error}else if(e.status!==0){throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")")}Sender.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim();return Sender.ACL_IDENTITY}else{throw new Error("Could not synchronously get ACL identity under current version of Node.js")}};Sender.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]};Sender.prototype._applyACLRules=function(e,t){var n=this;if(!Sender.USE_ICACLS){return t(null)}if(Sender.ACLED_DIRECTORIES[e]===undefined){Sender.ACLED_DIRECTORIES[e]=false;this._getACLIdentity(function(r,i){if(r){Sender.ACLED_DIRECTORIES[e]=false;return t(r)}else{n._runICACLS(n._getACLArguments(e,i),function(n){Sender.ACLED_DIRECTORIES[e]=!n;return t(n)})}})}else{return t(Sender.ACLED_DIRECTORIES[e]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))}};Sender.prototype._applyACLRulesSync=function(e){if(Sender.USE_ICACLS){if(Sender.ACLED_DIRECTORIES[e]===undefined){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync()));Sender.ACLED_DIRECTORIES[e]=true;return}else if(!Sender.ACLED_DIRECTORIES[e]){throw new Error("Setting ACL restrictions did not succeed (cached result)")}}};Sender.prototype._confirmDirExists=function(e,t){var n=this;r.lstat(e,function(i,o){if(i&&i.code==="ENOENT"){r.mkdir(e,function(r){if(r&&r.code!=="EEXIST"){t(r)}else{n._applyACLRules(e,t)}})}else if(!i&&o.isDirectory()){n._applyACLRules(e,t)}else{t(i||new Error("Path existed but was not a directory"))}})};Sender.prototype._getShallowDirectorySize=function(e,t){r.readdir(e,function(n,i){if(n){return t(n,-1)}var s=null;var a=0;var c=0;if(i.length===0){t(null,0);return}for(var u=0;u<i.length;u++){r.stat(o.join(e,i[u]),function(e,n){c++;if(e){s=e}else{if(n.isFile()){a+=n.size}}if(c===i.length){if(s){t(s,-1)}else{t(s,a)}}})}})};Sender.prototype._getShallowDirectorySizeSync=function(e){var t=r.readdirSync(e);var n=0;for(var i=0;i<t.length;i++){n+=r.statSync(o.join(e,t[i])).size}return n};Sender.prototype._storeToDisk=function(e){var t=this;var n=o.join(i.tmpdir(),Sender.TEMPDIR_PREFIX+this._config.instrumentationKey);c.info(Sender.TAG,"Checking existance of data storage directory: "+n);this._confirmDirExists(n,function(i){if(i){c.warn(Sender.TAG,"Error while checking/creating directory: "+(i&&i.message));t._onErrorHelper(i);return}t._getShallowDirectorySize(n,function(i,s){if(i||s<0){c.warn(Sender.TAG,"Error while checking directory size: "+(i&&i.message));t._onErrorHelper(i);return}else if(s>t._maxBytesOnDisk){c.warn(Sender.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+s);return}var a=(new Date).getTime()+".ai.json";var u=o.join(n,a);c.info(Sender.TAG,"saving data to disk at: "+u);r.writeFile(u,e,{mode:384},function(e){return t._onErrorHelper(e)})})})};Sender.prototype._storeToDiskSync=function(e){var t=o.join(i.tmpdir(),Sender.TEMPDIR_PREFIX+this._config.instrumentationKey);try{c.info(Sender.TAG,"Checking existance of data storage directory: "+t);if(!r.existsSync(t)){r.mkdirSync(t)}this._applyACLRulesSync(t);var n=this._getShallowDirectorySizeSync(t);if(n>this._maxBytesOnDisk){c.info(Sender.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+n);return}var s=(new Date).getTime()+".ai.json";var a=o.join(t,s);c.info(Sender.TAG,"saving data before crash to disk at: "+a);r.writeFileSync(a,e,{mode:384})}catch(e){c.warn(Sender.TAG,"Error while saving data to disk: "+(e&&e.message));this._onErrorHelper(e)}};Sender.prototype._sendFirstFileOnDisk=function(){var e=this;var t=o.join(i.tmpdir(),Sender.TEMPDIR_PREFIX+this._config.instrumentationKey);r.exists(t,function(n){if(n){r.readdir(t,function(n,i){if(!n){i=i.filter(function(e){return o.basename(e).indexOf(".ai.json")>-1});if(i.length>0){var s=i[0];var a=o.join(t,s);r.readFile(a,function(t,n){if(!t){r.unlink(a,function(t){if(!t){e.send(n)}else{e._onErrorHelper(t)}})}else{e._onErrorHelper(t)}})}}else{e._onErrorHelper(n)}})}})};Sender.prototype._onErrorHelper=function(e){if(typeof this._onError==="function"){this._onError(e)}};Sender.TAG="Sender";Sender.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe";Sender.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe";Sender.ACLED_DIRECTORIES={};Sender.ACL_IDENTITY=null;Sender.WAIT_BETWEEN_RESEND=60*1e3;Sender.MAX_BYTES_ON_DISK=50*1e3*1e3;Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN=5;Sender.TEMPDIR_PREFIX="appInsights-node";Sender.OS_PROVIDES_FILE_PROTECTION=false;Sender.USE_ICACLS=i.type()==="Windows_NT";return Sender}();e.exports=l},701:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var n;(function(e){e["COMMITTED_BYTES"]="\\Memory\\Committed Bytes";e["PROCESSOR_TIME"]="\\Processor(_Total)\\% Processor Time";e["REQUEST_RATE"]="\\ApplicationInsights\\Requests/Sec";e["REQUEST_FAILURE_RATE"]="\\ApplicationInsights\\Requests Failed/Sec";e["REQUEST_DURATION"]="\\ApplicationInsights\\Request Duration";e["DEPENDENCY_RATE"]="\\ApplicationInsights\\Dependency Calls/Sec";e["DEPENDENCY_FAILURE_RATE"]="\\ApplicationInsights\\Dependency Calls Failed/Sec";e["DEPENDENCY_DURATION"]="\\ApplicationInsights\\Dependency Call Duration";e["EXCEPTION_RATE"]="\\ApplicationInsights\\Exceptions/Sec"})(n=t.QuickPulseCounter||(t.QuickPulseCounter={}));var r;(function(e){e["PRIVATE_BYTES"]="\\Process(??APP_WIN32_PROC??)\\Private Bytes";e["AVAILABLE_BYTES"]="\\Memory\\Available Bytes";e["PROCESSOR_TIME"]="\\Processor(_Total)\\% Processor Time";e["PROCESS_TIME"]="\\Process(??APP_WIN32_PROC??)\\% Processor Time";e["REQUEST_RATE"]="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec";e["REQUEST_DURATION"]="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(r=t.PerformanceCounter||(t.PerformanceCounter={}));t.PerformanceToQuickPulseCounter=(i={},i[r.PROCESSOR_TIME]=n.PROCESSOR_TIME,i[r.REQUEST_RATE]=n.REQUEST_RATE,i[r.REQUEST_DURATION]=n.REQUEST_DURATION,i[n.COMMITTED_BYTES]=n.COMMITTED_BYTES,i[n.REQUEST_FAILURE_RATE]=n.REQUEST_FAILURE_RATE,i[n.DEPENDENCY_RATE]=n.DEPENDENCY_RATE,i[n.DEPENDENCY_FAILURE_RATE]=n.DEPENDENCY_FAILURE_RATE,i[n.DEPENDENCY_DURATION]=n.DEPENDENCY_DURATION,i[n.EXCEPTION_RATE]=n.EXCEPTION_RATE,i);t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability"};t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument"};t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability};t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability};var i},708:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const i=r(n(747));const o=r(n(669));class FilesSizeCalculator{getFilesSize(e){var t=0;if(!o.isNullOrUndefined(e)){e.forEach(e=>{t+=this.getFileSize(e)})}return t}getFileSize(e){const t=i.statSync(e);return t["size"]}}t.FilesSizeCalculator=FilesSizeCalculator},716:function(e,t,n){"use strict";var r=n(294);var i=function(){function AutoCollectConsole(e){if(!!AutoCollectConsole.INSTANCE){throw new Error("Console logging adapter tracking should be configured from the applicationInsights object")}this._client=e;AutoCollectConsole.INSTANCE=this}AutoCollectConsole.prototype.enable=function(e,t){if(r.IsInitialized){n(593).enable(e&&t,this._client);n(5).enable(e,this._client);n(151).enable(e,this._client)}};AutoCollectConsole.prototype.isInitialized=function(){return this._isInitialized};AutoCollectConsole.prototype.dispose=function(){AutoCollectConsole.INSTANCE=null;this.enable(false,false)};AutoCollectConsole._methodNames=["debug","info","log","warn","error"];return AutoCollectConsole}();e.exports=i},718:function(e,t,n){var r=n(519).require(),i=n(622);r.existsSync=r.existsSync||i.existsSync;e.exports=function(e){var t=e||"",n=0,o=newAttr(),s=null;function newAttr(){return{directory:false,readonly:false,hidden:false,executable:false,mtime:0,atime:0}}if(t&&r.existsSync(t)){s=r.statSync(t);o.directory=s.isDirectory();o.mtime=s.mtime;o.atime=s.atime;o.executable=!!(1&parseInt((s.mode&parseInt("777",8)).toString(8)[0]));o.readonly=!!(2&parseInt((s.mode&parseInt("777",8)).toString(8)[0]));o.hidden=i.basename(t)[0]==="."}else{console.warn("Invalid path: "+t)}return{get directory(){return o.directory},get readOnly(){return o.readonly},get hidden(){return o.hidden},get mtime(){return o.mtime},get atime(){return o.atime},get executable(){return o.executable},decodeAttributes:function(e){},encodeAttributes:function(e){},toString:function(){return"{\n"+'\t"path" : "'+t+",\n"+'\t"isDirectory" : '+o.directory+",\n"+'\t"isReadOnly" : '+o.readonly+",\n"+'\t"isHidden" : '+o.hidden+",\n"+'\t"isExecutable" : '+o.executable+",\n"+'\t"mTime" : '+o.mtime+"\n"+'\t"aTime" : '+o.atime+"\n"+"}"}}}},721:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=[];t.subscriber=function(e){i.forEach(function(t){if(e.data.commandObj.command==="info"){return}t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",dependencyTypeName:"redis"})})};function enable(e,n){if(e){if(i.length===0){r.channel.subscribe("redis",t.subscriber)}i.push(n)}else{i=i.filter(function(e){return e!=n});if(i.length===0){r.channel.unsubscribe("redis",t.subscriber)}}}t.enable=enable},724:function(e,t,n){"use strict";const r=n(669);const i=n(357);const o=n(848);const s=n(303);const a="cls@contexts";const c="error@context";const u=process.env.DEBUG_CLS_HOOKED;let f=-1;e.exports={getNamespace:getNamespace,createNamespace:createNamespace,destroyNamespace:destroyNamespace,reset:reset,ERROR_SYMBOL:c};function Namespace(e){this.name=e;this.active=null;this._set=[];this.id=null;this._contexts=new Map;this._indent=0}Namespace.prototype.set=function set(e,t){if(!this.active){throw new Error("No context available. ns.run() or ns.bind() must be called first.")}this.active[e]=t;if(u){const n=" ".repeat(this._indent<0?0:this._indent);debug2(n+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+f+" active:"+r.inspect(this.active,{showHidden:true,depth:2,colors:true}))}return t};Namespace.prototype.get=function get(e){if(!this.active){if(u){const t=s.currentId();const n=s.triggerAsyncId();const r=" ".repeat(this._indent<0?0:this._indent);debug2(`${r}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${f} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length}`)}return undefined}if(u){const t=s.executionAsyncId();const n=s.triggerAsyncId();const i=" ".repeat(this._indent<0?0:this._indent);debug2(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+f+" active:"+r.inspect(this.active,{showHidden:true,depth:2,colors:true}));debug2(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${f} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[e]};Namespace.prototype.createContext=function createContext(){let e=Object.create(this.active?this.active:Object.prototype);e._ns_name=this.name;e.id=f;if(u){const t=s.executionAsyncId();const n=s.triggerAsyncId();const i=" ".repeat(this._indent<0?0:this._indent);debug2(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${f} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} context:${r.inspect(e,{showHidden:true,depth:2,colors:true})}`)}return e};Namespace.prototype.run=function run(e){let t=this.createContext();this.enter(t);try{if(u){const e=s.triggerAsyncId();const n=s.executionAsyncId();const i=" ".repeat(this._indent<0?0:this._indent);debug2(`${i}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${f} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} context:${r.inspect(t)}`)}e(t);return t}catch(e){if(e){e[c]=t}throw e}finally{if(u){const e=s.triggerAsyncId();const n=s.executionAsyncId();const i=" ".repeat(this._indent<0?0:this._indent);debug2(`${i}CONTEXT-RUN END: (${this.name}) currentUid:${f} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} ${r.inspect(t)}`)}this.exit(t)}};Namespace.prototype.runAndReturn=function runAndReturn(e){let t;this.run(function(n){t=e(n)});return t};Namespace.prototype.runPromise=function runPromise(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch){throw new Error("fn must return a promise.")}if(u){debug2("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+f+" len:"+this._set.length+" "+r.inspect(t))}return n.then(e=>{if(u){debug2("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+f+" len:"+this._set.length+" "+r.inspect(t))}this.exit(t);return e}).catch(e=>{e[c]=t;if(u){debug2("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+f+" len:"+this._set.length+" "+r.inspect(t))}this.exit(t);throw e})};Namespace.prototype.bind=function bindFactory(e,t){if(!t){if(!this.active){t=this.createContext()}else{t=this.active}}let n=this;return function clsBind(){n.enter(t);try{return e.apply(this,arguments)}catch(e){if(e){e[c]=t}throw e}finally{n.exit(t)}}};Namespace.prototype.enter=function enter(e){i.ok(e,"context must be provided for entering");if(u){const t=s.executionAsyncId();const n=s.triggerAsyncId();const i=" ".repeat(this._indent<0?0:this._indent);debug2(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${f} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}this._set.push(this.active);this.active=e};Namespace.prototype.exit=function exit(e){i.ok(e,"context must be provided for exiting");if(u){const t=s.executionAsyncId();const n=s.triggerAsyncId();const i=" ".repeat(this._indent<0?0:this._indent);debug2(`${i}CONTEXT-EXIT: (${this.name}) currentUid:${f} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}if(this.active===e){i.ok(this._set.length,"can't remove top context");this.active=this._set.pop();return}let t=this._set.lastIndexOf(e);if(t<0){if(u){debug2("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e))}i.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))}else{i.ok(t,"can't remove top context");this._set.splice(t,1)}};Namespace.prototype.bindEmitter=function bindEmitter(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this;let n="context@"+this.name;function attach(e){if(!e){return}if(!e[a]){e[a]=Object.create(null)}e[a][n]={namespace:t,context:t.active}}function bind(e){if(!(e&&e[a])){return e}let t=e;let n=e[a];Object.keys(n).forEach(function(e){let r=n[e];t=r.namespace.bind(t,r.context)});return t}o(e,attach,bind)};Namespace.prototype.fromException=function fromException(e){return e[c]};function getNamespace(e){return process.namespaces[e]}function createNamespace(e){i.ok(e,"namespace must be given a name.");if(u){debug2(`NS-CREATING NAMESPACE (${e})`)}let t=new Namespace(e);t.id=f;const n=s.createHook({init(n,i,o,a){f=s.executionAsyncId();if(t.active){t._contexts.set(n,t.active);if(u){const s=" ".repeat(t._indent<0?0:t._indent);debug2(`${s}INIT [${i}] (${e}) asyncId:${n} currentUid:${f} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} resource:${a}`)}}else if(f===0){const o=s.triggerAsyncId();const c=t._contexts.get(o);if(c){t._contexts.set(n,c);if(u){const s=" ".repeat(t._indent<0?0:t._indent);debug2(`${s}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${n} currentUid:${f} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} resource:${a}`)}}else if(u){const s=" ".repeat(t._indent<0?0:t._indent);debug2(`${s}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${n} currentUid:${f} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} resource:${a}`)}}if(u&&i==="PROMISE"){debug2(r.inspect(a,{showHidden:true}));const s=a.parentId;const c=" ".repeat(t._indent<0?0:t._indent);debug2(`${c}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${s} asyncId:${n} currentUid:${f} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} resource:${a}`)}},before(n){f=s.executionAsyncId();let i;i=t._contexts.get(n)||t._contexts.get(f);if(i){if(u){const o=s.triggerAsyncId();const a=" ".repeat(t._indent<0?0:t._indent);debug2(`${a}BEFORE (${e}) asyncId:${n} currentUid:${f} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} context:${r.inspect(i)}`);t._indent+=2}t.enter(i)}else if(u){const i=s.triggerAsyncId();const o=" ".repeat(t._indent<0?0:t._indent);debug2(`${o}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${f} triggerId:${i} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} namespace._contexts:${r.inspect(t._contexts,{showHidden:true,depth:2,colors:true})}`);t._indent+=2}},after(n){f=s.executionAsyncId();let i;i=t._contexts.get(n)||t._contexts.get(f);if(i){if(u){const o=s.triggerAsyncId();t._indent-=2;const a=" ".repeat(t._indent<0?0:t._indent);debug2(`${a}AFTER (${e}) asyncId:${n} currentUid:${f} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} context:${r.inspect(i)}`)}t.exit(i)}else if(u){const o=s.triggerAsyncId();t._indent-=2;const a=" ".repeat(t._indent<0?0:t._indent);debug2(`${a}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${f} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} context:${r.inspect(i)}`)}},destroy(n){f=s.executionAsyncId();if(u){const i=s.triggerAsyncId();const o=" ".repeat(t._indent<0?0:t._indent);debug2(`${o}DESTROY (${e}) currentUid:${f} asyncId:${n} triggerId:${i} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} context:${r.inspect(t._contexts.get(f))}`)}t._contexts.delete(n)}});n.enable();process.namespaces[e]=t;return t}function destroyNamespace(e){let t=getNamespace(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"');i.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t));process.namespaces[e]=null}function reset(){if(process.namespaces){Object.keys(process.namespaces).forEach(function(e){destroyNamespace(e)})}process.namespaces=Object.create(null)}process.namespaces={};function debug2(...e){if(u){process._rawDebug(`${r.format(...e)}`)}}},733:function(e,t,n){"use strict";var r=n(970);var i=n(39);var o=n(8);var s=n(635);var a=n(701);var c=n(485);var u=function(){function QuickPulseStateManager(e,t){this._isCollectingData=false;this._lastSuccessTime=Date.now();this._lastSendSucceeded=true;this._metrics={};this._documents=[];this._collectors=[];this.config=new i(e);this.context=t||new c;this._sender=new s(this.config);this._isEnabled=false}QuickPulseStateManager.prototype.addCollector=function(e){this._collectors.push(e)};QuickPulseStateManager.prototype.trackMetric=function(e){this._addMetric(e)};QuickPulseStateManager.prototype.addDocument=function(e){var t=o.telemetryEnvelopeToQuickPulseDocument(e);if(t){this._documents.push(t)}};QuickPulseStateManager.prototype.enable=function(e){if(e&&!this._isEnabled){this._isEnabled=true;this._goQuickPulse()}else if(!e&&this._isEnabled){this._isEnabled=false;clearTimeout(this._handle);this._handle=undefined}};QuickPulseStateManager.prototype.enableCollectors=function(e){this._collectors.forEach(function(t){t.enable(e)})};QuickPulseStateManager.prototype._addMetric=function(e){var t=e.value;var n=e.count||1;var r=a.PerformanceToQuickPulseCounter[e.name];if(r){if(this._metrics[r]){this._metrics[r].Value=(this._metrics[r].Value*this._metrics[r].Weight+t*n)/(this._metrics[r].Weight+n);this._metrics[r].Weight+=n}else{this._metrics[r]=o.createQuickPulseMetric(e);this._metrics[r].Name=r;this._metrics[r].Weight=1}}};QuickPulseStateManager.prototype._resetQuickPulseBuffer=function(){delete this._metrics;this._metrics={};this._documents.length=0};QuickPulseStateManager.prototype._goQuickPulse=function(){var e=this;var t=Object.keys(this._metrics).map(function(t){return e._metrics[t]});var n=o.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context);this._resetQuickPulseBuffer();if(this._isCollectingData){this._post(n)}else{this._ping(n)}var r=this._isCollectingData?QuickPulseStateManager.POST_INTERVAL:QuickPulseStateManager.PING_INTERVAL;if(this._isCollectingData&&Date.now()-this._lastSuccessTime>=QuickPulseStateManager.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded){this._isCollectingData=false;r=QuickPulseStateManager.FALLBACK_INTERVAL}else if(!this._isCollectingData&&Date.now()-this._lastSuccessTime>=QuickPulseStateManager.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded){r=QuickPulseStateManager.FALLBACK_INTERVAL}this._lastSendSucceeded=null;this._handle=setTimeout(this._goQuickPulse.bind(this),r);this._handle.unref()};QuickPulseStateManager.prototype._ping=function(e){this._sender.ping(e,this._quickPulseDone.bind(this))};QuickPulseStateManager.prototype._post=function(e){this._sender.post(e,this._quickPulseDone.bind(this))};QuickPulseStateManager.prototype._quickPulseDone=function(e,t){if(e!=undefined){if(this._isCollectingData!==e){r.info("Live Metrics sending data",e);this.enableCollectors(e)}this._isCollectingData=e;if(t&&t.statusCode<300&&t.statusCode>=200){this._lastSuccessTime=Date.now();this._lastSendSucceeded=true}else{this._lastSendSucceeded=false}}else{this._lastSendSucceeded=false}};QuickPulseStateManager.MAX_POST_WAIT_TIME=2e4;QuickPulseStateManager.MAX_PING_WAIT_TIME=6e4;QuickPulseStateManager.FALLBACK_INTERVAL=6e4;QuickPulseStateManager.PING_INTERVAL=5e3;QuickPulseStateManager.POST_INTERVAL=1e3;return QuickPulseStateManager}();e.exports=u},737:function(e,t,n){"use strict";const r=n(213);function TimeoutWrap(){}function IntervalWrap(){}function ImmediateWrap(){}const i=new Map;const o=new Map;const s=new Map;let a=null;let c=false;e.exports=function patch(){patchTimer(this._hooks,this._state,"setTimeout","clearTimeout",TimeoutWrap,i,true);patchTimer(this._hooks,this._state,"setInterval","clearInterval",IntervalWrap,o,false);patchTimer(this._hooks,this._state,"setImmediate","clearImmediate",ImmediateWrap,s,true);global.setTimeout=r.setTimeout;global.setInterval=r.setInterval;global.setImmediate=r.setImmediate;global.clearTimeout=r.clearTimeout;global.clearInterval=r.clearInterval;global.clearImmediate=r.clearImmediate};function patchTimer(e,t,n,i,o,s,u){const f=r[n];const l=r[i];r[n]=function(){if(!t.enabled)return f.apply(r,arguments);const n=new Array(arguments.length);for(let e=0;e<arguments.length;e++){n[e]=arguments[e]}const i=n[0];if(typeof i!=="function"){throw new TypeError('"callback" argument must be a function')}const l=new o;const p=--t.counter;let d=undefined;e.init.call(l,p,0,null,null);n[0]=function(){a=d;e.pre.call(l,p);let t=true;try{i.apply(this,arguments);t=false}finally{if(t&&process.listenerCount("uncaughtException")>0){process.once("uncaughtException",function(){e.post.call(l,p,true);s.delete(d);e.destroy.call(null,p)})}}e.post.call(l,p,false);a=null;if(u||c){c=false;s.delete(d);e.destroy.call(null,p)}};d=f.apply(r,n);s.set(d,p);return d};r[i]=function(t){if(a===t&&t!==null){c=true}else if(s.has(t)){const n=s.get(t);s.delete(t);e.destroy.call(null,n)}l.apply(r,arguments)}}},747:function(e){e.exports=require("fs")},753:function(e,t,n){"use strict";var r=n(701);var i=function(){function ConnectionStringParser(){}ConnectionStringParser.parse=function(e){if(!e){return{}}var t=e.split(ConnectionStringParser._FIELDS_SEPARATOR);var n=t.reduce(function(e,t){var n=t.split(ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR);if(n.length===2){var r=n[0].toLowerCase();var i=n[1];e[r]=i}return e},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix;n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT;n.liveendpoint=n.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return n};ConnectionStringParser._FIELDS_SEPARATOR=";";ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR="=";return ConnectionStringParser}();e.exports=i},761:function(e){e.exports=require("zlib")},764:function(e){"use strict";function NextTickWrap(){}e.exports=function patch(){const e=this._hooks;const t=this._state;const n=process.nextTick;process.nextTick=function(){if(!t.enabled)return n.apply(process,arguments);const r=new Array(arguments.length);for(let e=0;e<arguments.length;e++){r[e]=arguments[e]}const i=r[0];if(typeof i!=="function"){throw new TypeError("callback is not a function")}const o=new NextTickWrap;const s=--t.counter;e.init.call(o,s,0,null,null);r[0]=function(){e.pre.call(o,s);let t=true;try{i.apply(this,arguments);t=false}finally{if(t&&process.listenerCount("uncaughtException")>0){process.once("uncaughtException",function(){e.post.call(o,s,true);e.destroy.call(null,s)})}}e.post.call(o,s,false);e.destroy.call(null,s)};return n.apply(process,r)}}},769:function(e,t,n){"use strict";var r=n(179);var i=n(970);var o=function(){function CorrelationIdManager(){}CorrelationIdManager.queryCorrelationId=function(e,t){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId";if(CorrelationIdManager.completedLookups.hasOwnProperty(n)){t(CorrelationIdManager.completedLookups[n]);return}else if(CorrelationIdManager.pendingLookups[n]){CorrelationIdManager.pendingLookups[n].push(t);return}CorrelationIdManager.pendingLookups[n]=[t];var o=function(){if(!CorrelationIdManager.pendingLookups[n]){return}var t={method:"GET",disableAppInsightsAutoCollection:true};i.info(CorrelationIdManager.TAG,t);var s=r.makeRequest(e,n,t,function(t){if(t.statusCode===200){var r="";t.setEncoding("utf-8");t.on("data",function(e){r+=e});t.on("end",function(){i.info(CorrelationIdManager.TAG,r);var e=CorrelationIdManager.correlationIdPrefix+r;CorrelationIdManager.completedLookups[n]=e;if(CorrelationIdManager.pendingLookups[n]){CorrelationIdManager.pendingLookups[n].forEach(function(t){return t(e)})}delete CorrelationIdManager.pendingLookups[n]})}else if(t.statusCode>=400&&t.statusCode<500){CorrelationIdManager.completedLookups[n]=undefined;delete CorrelationIdManager.pendingLookups[n]}else{setTimeout(o,e.correlationIdRetryIntervalMs)}});if(s){s.on("error",function(e){i.warn(CorrelationIdManager.TAG,e)});s.end()}};setTimeout(o,0)};CorrelationIdManager.cancelCorrelationIdQuery=function(e,t){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId";var r=CorrelationIdManager.pendingLookups[n];if(r){CorrelationIdManager.pendingLookups[n]=r.filter(function(e){return e!=t});if(CorrelationIdManager.pendingLookups[n].length==0){delete CorrelationIdManager.pendingLookups[n]}}};CorrelationIdManager.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e;if(e[e.length-1]!=="."){e+="."}var t=(CorrelationIdManager.currentRootId++).toString(16);return CorrelationIdManager.appendSuffix(e,t,"_")}else{return CorrelationIdManager.generateRootId()}};CorrelationIdManager.getRootId=function(e){var t=e.indexOf(".");if(t<0){t=e.length}var n=e[0]==="|"?1:0;return e.substring(n,t)};CorrelationIdManager.generateRootId=function(){return"|"+r.w3cTraceId()+"."};CorrelationIdManager.appendSuffix=function(e,t,n){if(e.length+t.length<CorrelationIdManager.requestIdMaxLength){return e+t+n}var i=CorrelationIdManager.requestIdMaxLength-9;if(e.length>i){for(;i>1;--i){var o=e[i-1];if(o==="."||o==="_"){break}}}if(i<=1){return CorrelationIdManager.generateRootId()}t=r.randomu32().toString(16);while(t.length<8){t="0"+t}return e.substring(0,i)+t+"#"};CorrelationIdManager.TAG="CorrelationIdManager";CorrelationIdManager.correlationIdPrefix="cid-v1:";CorrelationIdManager.w3cEnabled=false;CorrelationIdManager.pendingLookups={};CorrelationIdManager.completedLookups={};CorrelationIdManager.requestIdMaxLength=1024;CorrelationIdManager.currentRootId=r.randomu32();return CorrelationIdManager}();e.exports=o},771:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class ComparisionReport{constructor(){this.baseApkLabel="";this.targetApkLabel="";this.comparisionMetrics=[]}}t.default=ComparisionReport},790:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(472);"use strict";var o=function(e){r(ExceptionData,e);function ExceptionData(){var t=e.call(this)||this;t.ver=2;t.exceptions=[];t.properties={};t.measurements={};return t}return ExceptionData}(i);e.exports=o},799:function(e){e.exports={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"}},802:function(e,t,n){var r=n(967),i=n(864),o=n(402);e.exports=function(e,t){var n=[],s={},a=Buffer.alloc(0),c="",u=o.FileSystem.require(),f=null,l=new i.MainHeader;if(t===o.Constants.FILE){c=e;f=u.readFileSync(c);readMainHeader()}else if(t===o.Constants.BUFFER){f=e;readMainHeader()}else{}function readEntries(){s={};n=new Array(l.diskEntries);var e=l.offset;for(var t=0;t<n.length;t++){var i=e,a=new r(f);a.header=f.slice(i,i+=o.Constants.CENHDR);a.entryName=f.slice(i,i+=a.header.fileNameLength);if(a.header.extraLength){a.extra=f.slice(i,i+=a.header.extraLength)}if(a.header.commentLength)a.comment=f.slice(i,i+a.header.commentLength);e+=a.header.entryHeaderSize;n[t]=a;s[a.entryName]=a}}function readMainHeader(){var e=f.length-o.Constants.ENDHDR,t=Math.max(0,e-65535),n=-1;for(e;e>=t;e--){if(f[e]!==80)continue;if(f.readUInt32LE(e)===o.Constants.ENDSIG){n=e;break}}if(!~n)throw o.Errors.INVALID_FORMAT;l.loadFromBinary(f.slice(n,n+o.Constants.ENDHDR));if(l.commentLength){a=f.slice(n+o.Constants.ENDHDR)}readEntries()}return{get entries(){return n},get comment(){return a.toString()},set comment(e){l.commentLength=e.length;a=e},getEntry:function(e){return s[e]||null},setEntry:function(e){n.push(e);s[e.entryName]=e;l.totalEntries=n.length},deleteEntry:function(e){var t=s[e];if(t&&t.isDirectory){var r=this;this.getEntryChildren(t).forEach(function(t){if(t.entryName!==e){r.deleteEntry(t.entryName)}})}n.splice(n.indexOf(t),1);delete s[e];l.totalEntries=n.length},getEntryChildren:function(e){if(e.isDirectory){var t=[],r=e.entryName,i=r.length;n.forEach(function(e){if(e.entryName.substr(0,i)===r){t.push(e)}});return t}return[]},compressToBuffer:function(){if(n.length>1){n.sort(function(e,t){var n=e.entryName.toLowerCase();var r=t.entryName.toLowerCase();if(n<r){return-1}if(n>r){return 1}return 0})}var e=0,t=[],r=[],i=0;l.size=0;l.offset=0;n.forEach(function(n){var o=n.getCompressedData();n.header.offset=i;var s=n.header.dataHeaderToBinary();var a=n.rawEntryName.length;var c=n.extra.toString();var u=Buffer.alloc(a+c.length);n.rawEntryName.copy(u,0);u.fill(c,a);var f=s.length+u.length+o.length;i+=f;t.push(s);t.push(u);t.push(o);var p=n.packHeader();r.push(p);l.size+=p.length;e+=f+p.length});e+=l.mainHeaderSize;l.offset=i;i=0;var s=Buffer.alloc(e);t.forEach(function(e){e.copy(s,i);i+=e.length});r.forEach(function(e){e.copy(s,i);i+=e.length});var c=l.toBinary();if(a){a.copy(c,o.Constants.ENDHDR)}c.copy(s,i);return s},toAsyncBuffer:function(e,t,r,i){if(n.length>1){n.sort(function(e,t){var n=e.entryName.toLowerCase();var r=t.entryName.toLowerCase();if(n>r){return-1}if(n<r){return 1}return 0})}var s=0,c=[],u=[],f=0;l.size=0;l.offset=0;var p=function(t){var n=arguments.callee;if(t.length){var p=t.pop();var d=p.entryName+p.extra.toString();if(r)r(d);p.getCompressedDataAsync(function(r){if(i)i(d);p.header.offset=f;var h=p.header.dataHeaderToBinary();var v;try{v=Buffer.alloc(d.length,d)}catch(e){v=new Buffer(d)}var y=h.length+v.length+r.length;f+=y;c.push(h);c.push(v);c.push(r);var g=p.packHeader();u.push(g);l.size+=g.length;s+=y+g.length;if(t.length){n(t)}else{s+=l.mainHeaderSize;l.offset=f;f=0;var m=Buffer.alloc(s);c.forEach(function(e){e.copy(m,f);f+=e.length});u.forEach(function(e){e.copy(m,f);f+=e.length});var C=l.toBinary();if(a){a.copy(C,o.Constants.ENDHDR)}C.copy(m,f);e(m)}})}};p(n)}}}},818:function(e,t,n){t.Deflater=n(4);t.Inflater=n(566)},819:function(e){e.exports=require("dns")},824:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(167);var i=function(){function RemoteDependencyDataConstants(){}RemoteDependencyDataConstants.TYPE_HTTP="Http";RemoteDependencyDataConstants.TYPE_AI="Http (tracked component)";return RemoteDependencyDataConstants}();t.RemoteDependencyDataConstants=i;function domainSupportsProperties(e){return"properties"in e||e instanceof r.EventData||e instanceof r.ExceptionData||e instanceof r.MessageData||e instanceof r.MetricData||e instanceof r.PageViewData||e instanceof r.RemoteDependencyData||e instanceof r.RequestData}t.domainSupportsProperties=domainSupportsProperties},835:function(e){e.exports=require("url")},848:function(e,t,n){"use strict";var r=n(858);var i=r.wrap;var o=r.unwrap;var s="wrap@before";function defineProperty(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:true,enumerable:r,writable:true,value:n})}function _process(e,t){var n=t.length;for(var r=0;r<n;r++){var i=t[r];var o=e[s];if(typeof o==="function"){o(i)}else if(Array.isArray(o)){var a=o.length;for(var c=0;c<a;c++)o[c](i)}}}function _listeners(e,t){var n;n=e._events&&e._events[t];if(!Array.isArray(n)){if(n){n=[n]}else{n=[]}}return n}function _findAndProcess(e,t,n){var r=_listeners(e,t);var i=r.filter(function(e){return n.indexOf(e)===-1});if(i.length>0)_process(e,i)}function _wrap(e,t){if(!e)return;var n=e;if(typeof e==="function"){n=t(e)}else if(Array.isArray(e)){n=[];for(var r=0;r<e.length;r++){n[r]=t(e[r])}}return n}e.exports=function wrapEmitter(e,t,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit){throw new Error("can only wrap real EEs")}if(!t)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function adding(e){return function added(t,n){var r=_listeners(this,t).slice();try{var o=e.call(this,t,n);_findAndProcess(this,t,r);return o}finally{if(!this.on.__wrapped)i(this,"on",adding);if(!this.addListener.__wrapped)i(this,"addListener",adding)}}}function emitting(e){return function emitted(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var r=this._events[t];function remover(e){return function removed(){this._events[t]=r;try{return e.apply(this,arguments)}finally{r=this._events[t];this._events[t]=_wrap(r,n)}}}i(this,"removeListener",remover);try{this._events[t]=_wrap(r,n);return e.apply(this,arguments)}finally{o(this,"removeListener");this._events[t]=r}}}if(!e[s]){defineProperty(e,s,t)}else if(typeof e[s]==="function"){defineProperty(e,s,[e[s],t])}else if(Array.isArray(e[s])){e[s].push(t)}if(!e.__wrapped){i(e,"addListener",adding);i(e,"on",adding);i(e,"emit",emitting);defineProperty(e,"__unwrap",function(){o(e,"addListener");o(e,"on");o(e,"emit");delete e[s];delete e.__wrapped});defineProperty(e,"__wrapped",true)}}},850:function(e){"use strict";var t=function(){function Tracestate(e){this.fieldmap=[];if(!e){return}this.fieldmap=this.parseHeader(e)}Tracestate.prototype.toString=function(){var e=this.fieldmap;if(!e||e.length==0){return null}return e.join(", ")};Tracestate.validateKeyChars=function(e){var t=e.split("@");if(t.length==2){var n=t[0].trim();var r=t[1].trim();var i=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/));var o=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return i&&o}else if(t.length==1){return Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))}return false};Tracestate.prototype.parseHeader=function(e){var t=[];var n={};var r=e.split(",");if(r.length>32)return null;for(var i=0,o=r;i<o.length;i++){var s=o[i];var a=s.trim();if(a.length===0){continue}var c=a.split("=");if(c.length!==2){return null}if(!Tracestate.validateKeyChars(c[0])){return null}if(n[c[0]]){return null}else{n[c[0]]=true}t.push(a)}return t};Tracestate.strict=true;return Tracestate}();e.exports=t},858:function(e){"use strict";function isFunction(e){return typeof e==="function"}var t=console.error.bind(console);function defineProperty(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:true,enumerable:r,writable:true,value:n})}function shimmer(e){if(e&&e.logger){if(!isFunction(e.logger))t("new logger isn't a function, not replacing");else t=e.logger}}function wrap(e,n,r){if(!e||!e[n]){t("no original function "+n+" to wrap");return}if(!r){t("no wrapper function");t((new Error).stack);return}if(!isFunction(e[n])||!isFunction(r)){t("original object and wrapper must be functions");return}var i=e[n];var o=r(i,n);defineProperty(o,"__original",i);defineProperty(o,"__unwrap",function(){if(e[n]===o)defineProperty(e,n,i)});defineProperty(o,"__wrapped",true);defineProperty(e,n,o);return o}function massWrap(e,n,r){if(!e){t("must provide one or more modules to patch");t((new Error).stack);return}else if(!Array.isArray(e)){e=[e]}if(!(n&&Array.isArray(n))){t("must provide one or more functions to wrap on modules");return}e.forEach(function(e){n.forEach(function(t){wrap(e,t,r)})})}function unwrap(e,n){if(!e||!e[n]){t("no function to unwrap.");t((new Error).stack);return}if(!e[n].__unwrap){t("no original to unwrap to -- has "+n+" already been unwrapped?")}else{return e[n].__unwrap()}}function massUnwrap(e,n){if(!e){t("must provide one or more modules to patch");t((new Error).stack);return}else if(!Array.isArray(e)){e=[e]}if(!(n&&Array.isArray(n))){t("must provide one or more functions to unwrap on modules");return}e.forEach(function(e){n.forEach(function(t){unwrap(e,t)})})}shimmer.wrap=wrap;shimmer.massWrap=massWrap;shimmer.unwrap=unwrap;shimmer.massUnwrap=massUnwrap;e.exports=shimmer},860:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const i=r(n(285));(new i.default).run()},864:function(e,t,n){t.EntryHeader=n(899);t.MainHeader=n(543)},876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(466);var i=n(367);function performanceMetricsTelemetryProcessor(e,t){if(t){t.addDocument(e)}switch(e.data.baseType){case i.TelemetryTypeString.Exception:r.countException();break;case i.TelemetryTypeString.Request:var n=e.data.baseData;r.countRequest(n.duration,n.success);break;case i.TelemetryTypeString.Dependency:var o=e.data.baseData;r.countDependency(o.duration,o.success);break}return true}t.performanceMetricsTelemetryProcessor=performanceMetricsTelemetryProcessor},881:function(e){e.exports={_args:[["stack-chain@1.3.7","/Users/chris/Downloads/android-app-size-diff"]],_from:"stack-chain@1.3.7",_id:"stack-chain@1.3.7",_inBundle:false,_integrity:"sha1-0ZLJ/06moiyUxN1FkXHj8AzqEoU=",_location:"/stack-chain",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"stack-chain@1.3.7",name:"stack-chain",escapedName:"stack-chain",rawSpec:"1.3.7",saveSpec:null,fetchSpec:"1.3.7"},_requiredBy:["/async-hook-jl"],_resolved:"https://registry.npmjs.org/stack-chain/-/stack-chain-1.3.7.tgz",_spec:"1.3.7",_where:"/Users/chris/Downloads/android-app-size-diff",author:{name:"Andreas Madsen",email:"amwebdk@gmail.com"},bugs:{url:"https://github.com/AndreasMadsen/stack-chain/issues"},description:"API for combining call site modifiers",devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},homepage:"https://github.com/AndreasMadsen/stack-chain#readme",keywords:["stack","chain","trace","call site","concat","format"],license:"MIT",name:"stack-chain",repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},scripts:{test:"tap ./test/simple"},version:"1.3.7"}},899:function(e,t,n){var r=n(402),i=r.Constants;e.exports=function(){var e=10,t=10,n=0,o=0,s=0,a=0,c=0,u=0,f=0,l=0,p=0,d=0,h=0,v=0,y=0;var g={};function setTime(e){e=new Date(e);s=(e.getFullYear()-1980&127)<<25|e.getMonth()+1<<21|e.getDate()<<16|e.getHours()<<11|e.getMinutes()<<5|e.getSeconds()>>1}setTime(+new Date);return{get made(){return e},set made(t){e=t},get version(){return t},set version(e){t=e},get flags(){return n},set flags(e){n=e},get method(){return o},set method(e){o=e},get time(){return new Date((s>>25&127)+1980,(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(s&31)<<1)},set time(e){setTime(e)},get crc(){return a},set crc(e){a=e},get compressedSize(){return c},set compressedSize(e){c=e},get size(){return u},set size(e){u=e},get fileNameLength(){return f},set fileNameLength(e){f=e},get extraLength(){return l},set extraLength(e){l=e},get commentLength(){return p},set commentLength(e){p=e},get diskNumStart(){return d},set diskNumStart(e){d=e},get inAttr(){return h},set inAttr(e){h=e},get attr(){return v},set attr(e){v=e},get offset(){return y},set offset(e){y=e},get encripted(){return(n&1)===1},get entryHeaderSize(){return i.CENHDR+f+l+p},get realDataOffset(){return y+i.LOCHDR+g.fnameLen+g.extraLen},get dataHeader(){return g},loadDataHeaderFromBinary:function(e){var t=e.slice(y,y+i.LOCHDR);if(t.readUInt32LE(0)!==i.LOCSIG){throw r.Errors.INVALID_LOC}g={version:t.readUInt16LE(i.LOCVER),flags:t.readUInt16LE(i.LOCFLG),method:t.readUInt16LE(i.LOCHOW),time:t.readUInt32LE(i.LOCTIM),crc:t.readUInt32LE(i.LOCCRC),compressedSize:t.readUInt32LE(i.LOCSIZ),size:t.readUInt32LE(i.LOCLEN),fnameLen:t.readUInt16LE(i.LOCNAM),extraLen:t.readUInt16LE(i.LOCEXT)}},loadFromBinary:function(g){if(g.length!==i.CENHDR||g.readUInt32LE(0)!==i.CENSIG){throw r.Errors.INVALID_CEN}e=g.readUInt16LE(i.CENVEM);t=g.readUInt16LE(i.CENVER);n=g.readUInt16LE(i.CENFLG);o=g.readUInt16LE(i.CENHOW);s=g.readUInt32LE(i.CENTIM);a=g.readUInt32LE(i.CENCRC);c=g.readUInt32LE(i.CENSIZ);u=g.readUInt32LE(i.CENLEN);f=g.readUInt16LE(i.CENNAM);l=g.readUInt16LE(i.CENEXT);p=g.readUInt16LE(i.CENCOM);d=g.readUInt16LE(i.CENDSK);h=g.readUInt16LE(i.CENATT);v=g.readUInt32LE(i.CENATX);y=g.readUInt32LE(i.CENOFF)},dataHeaderToBinary:function(){var e=Buffer.alloc(i.LOCHDR);e.writeUInt32LE(i.LOCSIG,0);e.writeUInt16LE(t,i.LOCVER);e.writeUInt16LE(n,i.LOCFLG);e.writeUInt16LE(o,i.LOCHOW);e.writeUInt32LE(s,i.LOCTIM);e.writeUInt32LE(a,i.LOCCRC);e.writeUInt32LE(c,i.LOCSIZ);e.writeUInt32LE(u,i.LOCLEN);e.writeUInt16LE(f,i.LOCNAM);e.writeUInt16LE(l,i.LOCEXT);return e},entryHeaderToBinary:function(){var r=Buffer.alloc(i.CENHDR+f+l+p);r.writeUInt32LE(i.CENSIG,0);r.writeUInt16LE(e,i.CENVEM);r.writeUInt16LE(t,i.CENVER);r.writeUInt16LE(n,i.CENFLG);r.writeUInt16LE(o,i.CENHOW);r.writeUInt32LE(s,i.CENTIM);r.writeInt32LE(a&65535,i.CENCRC,true);r.writeUInt32LE(c,i.CENSIZ);r.writeUInt32LE(u,i.CENLEN);r.writeUInt16LE(f,i.CENNAM);r.writeUInt16LE(l,i.CENEXT);r.writeUInt16LE(p,i.CENCOM);r.writeUInt16LE(d,i.CENDSK);r.writeUInt16LE(h,i.CENATT);r.writeUInt32LE(v,i.CENATX);r.writeUInt32LE(y,i.CENOFF);r.fill(0,i.CENHDR);return r},toString:function(){return"{\n"+'\t"made" : '+e+",\n"+'\t"version" : '+t+",\n"+'\t"flags" : '+n+",\n"+'\t"method" : '+r.methodToString(o)+",\n"+'\t"time" : '+this.time+",\n"+'\t"crc" : 0x'+a.toString(16).toUpperCase()+",\n"+'\t"compressedSize" : '+c+" bytes,\n"+'\t"size" : '+u+" bytes,\n"+'\t"fileNameLength" : '+f+",\n"+'\t"extraLength" : '+l+" bytes,\n"+'\t"commentLength" : '+p+" bytes,\n"+'\t"diskNumStart" : '+d+",\n"+'\t"inAttr" : '+h+",\n"+'\t"attr" : '+v+",\n"+'\t"offset" : '+y+",\n"+'\t"entryHeaderSize" : '+(i.CENHDR+f+l+p)+" bytes\n"+"}"}}}},902:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=[];t.subscriber=function(e){i.forEach(function(t){var n=e.data.query;var r=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query";var i=!e.data.error;var o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"postgres"})})};function enable(e,n){if(e){if(i.length===0){r.channel.subscribe("postgres",t.subscriber)}i.push(n)}else{i=i.filter(function(e){return e!=n});if(i.length===0){r.channel.unsubscribe("postgres",t.subscriber)}}}t.enable=enable},916:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const s=i(n(208));const a=o(n(622));const c=o(n(669));const u=i(n(227));const f=i(n(571));const l=n(708);class ApkAnalyzer{analyse(e,t,n){return r(this,void 0,void 0,function*(){if(c.isUndefined(n)){n=a.join(a.dirname(e),"extracted")}const r=new s.default(e);console.log("Extracting APK file to "+n);r.extractAllTo(n,true);const i=new u.default(n);yield i.parse();const o=new l.FilesSizeCalculator;const p=new f.default;p.apkLabel=t;p.sizeMetrics["apkSize"]=o.getFileSize(e);p.sizeMetrics["arscFile"]=o.getFilesSize(i.getFiles(".arsc"));p.sizeMetrics["dexFiles"]=o.getFilesSize(i.getFiles(".dex"));p.sizeMetrics["nativeLibs"]=o.getFilesSize(i.getFiles(".so"));p.sizeMetrics["installSize"]=p.sizeMetrics["apkSize"]+p.sizeMetrics["dexFiles"];return p})}}t.default=ApkAnalyzer},919:function(e){"use strict";var t=function(){function ExceptionDetails(){this.hasFullStack=true;this.parsedStack=[]}return ExceptionDetails}();e.exports=t},925:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function contextPreservingConnect(){var e=t.apply(this,arguments);var n=this.s.pool.write;this.s.pool.write=function contextPreservingWrite(){var e=typeof arguments[1]==="function"?1:2;if(typeof arguments[e]==="function"){arguments[e]=r.channel.bindToContext(arguments[e])}return n.apply(this,arguments)};var i=this.s.pool.logout;this.s.pool.logout=function contextPreservingLogout(){if(typeof arguments[1]==="function"){arguments[1]=r.channel.bindToContext(arguments[1])}return i.apply(this,arguments)};return e};return e};t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:i};function enable(){r.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}t.enable=enable},928:function(e){"use strict";var t=function(){function RequestParser(){}RequestParser.prototype.getUrl=function(){return this.url};RequestParser.prototype.RequestParser=function(){this.startTime=+new Date};RequestParser.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime;this.statusCode=e;var r=this.properties||{};if(t){if(typeof t==="string"){r["error"]=t}else if(t instanceof Error){r["error"]=t.message}else if(typeof t==="object"){for(var i in t){r[i]=t[i]&&t[i].toString&&t[i].toString()}}}this.properties=r};RequestParser.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400};return RequestParser}();e.exports=t},930:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(645);"use strict";var o=function(e){r(Data,e);function Data(){return e.call(this)||this}return Data}(i);e.exports=o},934:function(e,t,n){var r=n(858).wrap;var i=1<<0;var o=1<<1;var s=1<<2;var a=1<<3;var c=[];var u=0;var f=false;var l=[];var p;var d;function union(e,t){var n=e.length;var r=t.length;var i=[];if(n===0&&r===0)return i;for(var o=0;o<n;o++)i[o]=e[o];if(r===0)return i;for(var s=0;s<r;s++){var a=true;for(o=0;o<n;o++){if(e[o].uid===t[s].uid){a=false;break}}if(a)i.push(t[s])}return i}if(process._fatalException){var h=false;var v;p=function asyncCatcher(e){var t=c.length;if(h||t===0)return false;var n=false;h=true;for(var r=0;r<t;++r){var i=c[r];if((i.flags&a)===0)continue;var o=v&&v[i.uid];n=i.error(o,e)||n}h=false;if(l.length>0)c=l.pop();v=undefined;return n&&!f};d=function asyncWrap(e,t,n){var r=[];f=true;for(var a=0;a<n;++a){var u=t[a];r[u.uid]=u.data;if((u.flags&i)===0)continue;var p=u.create(u.data);if(p!==undefined)r[u.uid]=p}f=false;return function(){v=r;l.push(c);c=union(t,c);f=true;for(var i=0;i<n;++i){if((t[i].flags&o)>0){t[i].before(this,r[t[i].uid])}}f=false;var a=e.apply(this,arguments);f=true;for(i=0;i<n;++i){if((t[i].flags&s)>0){t[i].after(this,r[t[i].uid])}}f=false;c=l.pop();v=undefined;return a}};r(process,"_fatalException",function(e){return function _asyncFatalException(t){return p(t)||e(t)}})}else{var y=false;p=function uncaughtCatcher(e){if(y)throw e;var t=false;var n=c.length;for(var r=0;r<n;++r){var i=c[r];if((i.flags&a)===0)continue;t=i.error(null,e)||t}if(!t&&f)throw e};d=function asyncWrap(e,t,n){var r=[];f=true;for(var u=0;u<n;++u){var d=t[u];r[d.uid]=d.data;if((d.flags&i)===0)continue;var h=d.create(d.data);if(h!==undefined)r[d.uid]=h}f=false;return function(){var i=false;var u=false;l.push(c);c=union(t,c);f=true;for(var d=0;d<n;++d){if((t[d].flags&o)>0){t[d].before(this,r[t[d].uid])}}f=false;var h;try{h=e.apply(this,arguments)}catch(e){i=true;for(var d=0;d<n;++d){if((c[d].flags&a)==0)continue;try{u=c[d].error(r[t[d].uid],e)||u}catch(e){y=true;throw e}}if(!u){process.removeListener("uncaughtException",p);process._originalNextTick(function(){process.addListener("uncaughtException",p)});throw e}}finally{if(!i||u){f=true;for(d=0;d<n;++d){if((t[d].flags&s)>0){t[d].after(this,r[t[d].uid])}}f=false}c=l.pop()}return h}};process.addListener("uncaughtException",p)}function simpleWrap(e,t,n){f=true;for(var r=0;r<n;++r){var i=t[r];if(i.create)i.create(i.data)}f=false;return function(){l.push(c);c=union(t,c);var n=e.apply(this,arguments);c=l.pop();return n}}function wrapCallback(e){var t=c.length;if(t===0)return e;var n=c.slice();for(var r=0;r<t;++r){if(n[r].flags>0)return d(e,n,t)}return simpleWrap(e,n,t)}function AsyncListener(e,t){if(typeof e.create==="function"){this.create=e.create;this.flags|=i}if(typeof e.before==="function"){this.before=e.before;this.flags|=o}if(typeof e.after==="function"){this.after=e.after;this.flags|=s}if(typeof e.error==="function"){this.error=e.error;this.flags|=a}this.uid=++u;this.data=t===undefined?null:t}AsyncListener.prototype.create=undefined;AsyncListener.prototype.before=undefined;AsyncListener.prototype.after=undefined;AsyncListener.prototype.error=undefined;AsyncListener.prototype.data=undefined;AsyncListener.prototype.uid=0;AsyncListener.prototype.flags=0;function createAsyncListener(e,t){if(typeof e!=="object"||!e){throw new TypeError("callbacks argument must be an object")}if(e instanceof AsyncListener){return e}else{return new AsyncListener(e,t)}}function addAsyncListener(e,t){var n;if(!(e instanceof AsyncListener)){n=createAsyncListener(e,t)}else{n=e}var r=false;for(var i=0;i<c.length;i++){if(n===c[i]){r=true;break}}if(!r)c.push(n);return n}function removeAsyncListener(e){for(var t=0;t<c.length;t++){if(e===c[t]){c.splice(t,1);break}}}process.createAsyncListener=createAsyncListener;process.addAsyncListener=addAsyncListener;process.removeAsyncListener=removeAsyncListener;e.exports=wrapCallback},936:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(835);var o=n(367);var s=n(179);var a=n(328);var c=n(928);var u=n(769);var f=n(850);var l=n(14);var p=function(e){r(HttpRequestParser,e);function HttpRequestParser(t,n){var r=e.call(this)||this;if(t){r.method=t.method;r.url=r._getAbsoluteUrl(t);r.startTime=+new Date;r.socketRemoteAddress=t.socket&&t.socket.remoteAddress;r.parseHeaders(t,n);if(t.connection){r.connectionRemoteAddress=t.connection.remoteAddress;r.legacySocketRemoteAddress=t.connection["socket"]&&t.connection["socket"].remoteAddress}}return r}HttpRequestParser.prototype.onError=function(e,t){this._setStatus(undefined,e);if(t){this.duration=t}};HttpRequestParser.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,undefined);if(t){this.duration=t}};HttpRequestParser.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+i.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e){for(var n in e){if(!t[n]){t[n]=e[n]}}if(e.properties){for(var n in e.properties){t.properties[n]=e.properties[n]}}}return t};HttpRequestParser.prototype.getRequestTags=function(e){var t={};for(var n in e){t[n]=e[n]}t[HttpRequestParser.keys.locationIp]=e[HttpRequestParser.keys.locationIp]||this._getIp();t[HttpRequestParser.keys.sessionId]=e[HttpRequestParser.keys.sessionId]||this._getId("ai_session");t[HttpRequestParser.keys.userId]=e[HttpRequestParser.keys.userId]||this._getId("ai_user");t[HttpRequestParser.keys.userAuthUserId]=e[HttpRequestParser.keys.userAuthUserId]||this._getId("ai_authUser");t[HttpRequestParser.keys.operationName]=this.getOperationName(e);t[HttpRequestParser.keys.operationParentId]=this.getOperationParentId(e);t[HttpRequestParser.keys.operationId]=this.getOperationId(e);return t};HttpRequestParser.prototype.getOperationId=function(e){return e[HttpRequestParser.keys.operationId]||this.operationId};HttpRequestParser.prototype.getOperationParentId=function(e){return e[HttpRequestParser.keys.operationParentId]||this.parentId||this.getOperationId(e)};HttpRequestParser.prototype.getOperationName=function(e){return e[HttpRequestParser.keys.operationName]||this.method+" "+i.parse(this.url).pathname};HttpRequestParser.prototype.getRequestId=function(){return this.requestId};HttpRequestParser.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader};HttpRequestParser.prototype.getTraceparent=function(){return this.traceparent};HttpRequestParser.prototype.getTracestate=function(){return this.tracestate};HttpRequestParser.prototype.getLegacyRootId=function(){return this.legacyRootId};HttpRequestParser.prototype._getAbsoluteUrl=function(e){if(!e.headers){return e.url}var t=e.connection?e.connection.encrypted:null;var n=i.parse(e.url);var r=n.pathname;var o=n.search;var s=i.format({protocol:t?"https":"http",host:e.headers.host,pathname:r,search:o});return s};HttpRequestParser.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/;var t=function(t){var n=e.exec(t);if(n){return n[0]}};var n=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);if(!n&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"){n="127.0.0.1"}return n};HttpRequestParser.prototype._getId=function(e){var t=this.rawHeaders&&this.rawHeaders["cookie"]&&typeof this.rawHeaders["cookie"]==="string"&&this.rawHeaders["cookie"]||"";var n=HttpRequestParser.parseId(s.getCookie(e,t));return n};HttpRequestParser.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId;if(this.traceparent.legacyRootId){this.legacyRootId=this.traceparent.legacyRootId}this.parentId=this.traceparent.parentId;this.traceparent.updateSpanId();this.requestId=this.traceparent.getBackCompatRequestId()};HttpRequestParser.prototype.parseHeaders=function(e,t){this.rawHeaders=e.headers||e.rawHeaders;this.userAgent=e.headers&&e.headers["user-agent"];this.sourceCorrelationId=s.getCorrelationContextTarget(e,a.requestContextSourceKey);if(e.headers){var n=e.headers[a.traceStateHeader];var r=e.headers[a.traceparentHeader];var i=e.headers[a.requestIdHeader];var o=e.headers[a.parentIdHeader];var c=e.headers[a.rootIdHeader];this.correlationContextHeader=e.headers[a.correlationContextHeader];if(u.w3cEnabled&&(r||n)){this.traceparent=new l(r);this.tracestate=r&&n&&new f(n);this.setBackCompatFromThisTraceContext()}else if(i){if(u.w3cEnabled){this.traceparent=new l(null,i);this.setBackCompatFromThisTraceContext()}else{this.parentId=i;this.requestId=u.generateRequestId(this.parentId);this.operationId=u.getRootId(this.requestId)}}else{if(u.w3cEnabled){this.traceparent=new l;this.traceparent.parentId=o;this.traceparent.legacyRootId=c||o;this.setBackCompatFromThisTraceContext()}else{this.parentId=o;this.requestId=u.generateRequestId(c||this.parentId);this.correlationContextHeader=null;this.operationId=u.getRootId(this.requestId)}}if(t){this.requestId=t;this.operationId=u.getRootId(this.requestId)}}};HttpRequestParser.parseId=function(e){var t=e.split("|");if(t.length>0){return t[0]}return""};HttpRequestParser.keys=new o.ContextTagKeys;return HttpRequestParser}(c);e.exports=p},937:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=n(614);function postgres6PatchFunction(e,t){var n=e.Client.prototype.query;var o="__diagnosticOriginalFunc";e.Client.prototype.query=function query(e,t,s){var a={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0};var c=process.hrtime();var u;function patchCallback(e){if(e&&e[o]){e=e[o]}var t=r.channel.bindToContext(function(t,n){var o=process.hrtime(c);a.result=n&&{rowCount:n.rowCount,command:n.command};a.error=t;a.duration=Math.ceil(o[0]*1e3+o[1]/1e6);r.channel.publish("postgres",a);if(t){if(e){return e.apply(this,arguments)}else if(u&&u instanceof i.EventEmitter){u.emit("error",t)}}else if(e){e.apply(this,arguments)}});try{Object.defineProperty(t,o,{value:e});return t}catch(t){return e}}try{if(typeof e==="string"){if(t instanceof Array){a.query.preparable={text:e,args:t};s=patchCallback(s)}else{a.query.text=e;if(s){s=patchCallback(s)}else{t=patchCallback(t)}}}else{if(typeof e.name==="string"){a.query.plan=e.name}else if(e.values instanceof Array){a.query.preparable={text:e.text,args:e.values}}else{a.query.text=e.text}if(s){s=patchCallback(s)}else if(t){t=patchCallback(t)}else{e.callback=patchCallback(e.callback)}}}catch(e){return n.apply(this,arguments)}arguments[0]=e;arguments[1]=t;arguments[2]=s;arguments.length=arguments.length>3?arguments.length:3;u=n.apply(this,arguments);return u};return e}function postgres7PatchFunction(e,t){var n=e.Client.prototype.query;var o="__diagnosticOriginalFunc";e.Client.prototype.query=function query(e,t,s){var a=this;var c=!!s;var u={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0};var f=process.hrtime();var l;function patchCallback(e){if(e&&e[o]){e=e[o]}var t=r.channel.bindToContext(function(t,n){var o=process.hrtime(f);u.result=n&&{rowCount:n.rowCount,command:n.command};u.error=t;u.duration=Math.ceil(o[0]*1e3+o[1]/1e6);r.channel.publish("postgres",u);if(t){if(e){return e.apply(this,arguments)}else if(l&&l instanceof i.EventEmitter){l.emit("error",t)}}else if(e){e.apply(this,arguments)}});try{Object.defineProperty(t,o,{value:e});return t}catch(t){return e}}try{if(typeof e==="string"){if(t instanceof Array){u.query.preparable={text:e,args:t};c=typeof s==="function";s=s?patchCallback(s):s}else{u.query.text=e;if(s){c=typeof s==="function";s=c?patchCallback(s):s}else{c=typeof t==="function";t=c?patchCallback(t):t}}}else{if(typeof e.name==="string"){u.query.plan=e.name}else if(e.values instanceof Array){u.query.preparable={text:e.text,args:e.values}}else{u.query.text=e.text}if(s){c=typeof s==="function";s=patchCallback(s)}else if(t){c=typeof t==="function";t=c?patchCallback(t):t}else{c=typeof e.callback==="function";e.callback=c?patchCallback(e.callback):e.callback}}}catch(e){return n.apply(this,arguments)}arguments[0]=e;arguments[1]=t;arguments[2]=s;arguments.length=arguments.length>3?arguments.length:3;l=n.apply(this,arguments);if(!c){return l.then(function(e){patchCallback()(undefined,e);return new a._Promise(function(t,n){t(e)})}).catch(function(e){patchCallback()(e,undefined);return new a._Promise(function(t,n){n(e)})})}return l};return e}t.postgres6={versionSpecifier:"6.*",patch:postgres6PatchFunction};t.postgres7={versionSpecifier:"7.*",patch:postgres7PatchFunction};function enable(){r.channel.registerMonkeyPatch("pg",t.postgres6);r.channel.registerMonkeyPatch("pg",t.postgres7)}t.enable=enable},941:function(e,t,n){"use strict";var r=n(221);"use strict";var i=function(){function DataPoint(){this.kind=r.Measurement}return DataPoint}();e.exports=i},942:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=function(e){var t=e.prototype._emit;e.prototype._emit=function(e,n){var i=t.apply(this,arguments);if(!n){var o=i;if(!o){o=t.call(this,e,true)}r.channel.publish("bunyan",{level:e.level,result:o})}return i};return e};t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:i};function enable(){r.channel.registerMonkeyPatch("bunyan",t.bunyan)}t.enable=enable},944:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(243);var i=n(622);var o=function(e,t){var n=function(e,t){return function(t,n){var i=e[t];if(i){e[t]=function mysqlContextPreserver(){var e=arguments.length-1;for(var t=arguments.length-1;t>=0;--t){if(typeof arguments[t]==="function"){e=t;break}else if(typeof arguments[t]!=="undefined"){break}}var o=arguments[e];var s={result:null,startTime:null};if(typeof o==="function"){if(n){s.startTime=process.hrtime();arguments[e]=r.channel.bindToContext(n(s,o))}else{arguments[e]=r.channel.bindToContext(o)}}var a=i.apply(this,arguments);s.result=a;return a}}}};var o=function(e,t){return n(e.prototype,t+".prototype")};var s=["connect","changeUser","ping","statistics","end"];var a=require(i.dirname(t)+"/lib/Connection");s.forEach(function(e){return o(a,"Connection")(e)});n(a,"Connection")("createQuery",function(e,t){return function(n){var i=process.hrtime(e.startTime);var o=i[0]*1e3+i[1]/1e6|0;r.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:n,duration:o});t.apply(this,arguments)}});var c=["_enqueueCallback"];var u=require(i.dirname(t)+"/lib/Pool");c.forEach(function(e){return o(u,"Pool")(e)});return e};t.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:o};function enable(){r.channel.registerMonkeyPatch("mysql",t.mysql)}t.enable=enable},950:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(472);"use strict";var o=function(e){r(RequestData,e);function RequestData(){var t=e.call(this)||this;t.ver=2;t.properties={};t.measurements={};return t}return RequestData}(i);e.exports=o},953:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(472);"use strict";var o=function(e){r(EventData,e);function EventData(){var t=e.call(this)||this;t.ver=2;t.properties={};t.measurements={};return t}return EventData}(i);e.exports=o},967:function(e,t,n){var r=n(402),i=n(864),o=r.Constants,s=n(818);e.exports=function(e){var t=new i.EntryHeader,n=Buffer.alloc(0),a=Buffer.alloc(0),c=false,u=null,f=Buffer.alloc(0);function getCompressedDataFromZip(){if(!e||!Buffer.isBuffer(e)){return Buffer.alloc(0)}t.loadDataHeaderFromBinary(e);return e.slice(t.realDataOffset,t.realDataOffset+t.compressedSize)}function crc32OK(e){if((t.flags&8)!==8){if(r.crc32(e)!==t.dataHeader.crc){return false}}else{}return true}function decompress(e,i,o){if(typeof i==="undefined"&&typeof e==="string"){o=e;e=void 0}if(c){if(e&&i){i(Buffer.alloc(0),r.Errors.DIRECTORY_CONTENT_ERROR)}return Buffer.alloc(0)}var a=getCompressedDataFromZip();if(a.length===0){if(e&&i)i(a,r.Errors.NO_DATA);return a}var u=Buffer.alloc(t.size);switch(t.method){case r.Constants.STORED:a.copy(u);if(!crc32OK(u)){if(e&&i)i(u,r.Errors.BAD_CRC);return r.Errors.BAD_CRC}else{if(e&&i)i(u);return u}case r.Constants.DEFLATED:var f=new s.Inflater(a);if(!e){var l=f.inflate(u);l.copy(u,0);if(!crc32OK(u)){console.warn(r.Errors.BAD_CRC+" "+n.toString())}return u}else{f.inflateAsync(function(e){e.copy(u,0);if(!crc32OK(u)){if(i)i(u,r.Errors.BAD_CRC)}else{if(i)i(u)}})}break;default:if(e&&i)i(Buffer.alloc(0),r.Errors.UNKNOWN_METHOD);return r.Errors.UNKNOWN_METHOD}}function compress(n,i){if((!u||!u.length)&&Buffer.isBuffer(e)){if(n&&i)i(getCompressedDataFromZip());return getCompressedDataFromZip()}if(u.length&&!c){var o;switch(t.method){case r.Constants.STORED:t.compressedSize=t.size;o=Buffer.alloc(u.length);u.copy(o);if(n&&i)i(o);return o;default:case r.Constants.DEFLATED:var a=new s.Deflater(u);if(!n){var f=a.deflate();t.compressedSize=f.length;return f}else{a.deflateAsync(function(e){o=Buffer.alloc(e.length);t.compressedSize=e.length;e.copy(o);i&&i(o)})}a=null;break}}else{if(n&&i){i(Buffer.alloc(0))}else{return Buffer.alloc(0)}}}function readUInt64LE(e,t){return(e.readUInt32LE(t+4)<<4)+e.readUInt32LE(t)}function parseExtra(e){var t=0;var n,r,i;while(t<e.length){n=e.readUInt16LE(t);t+=2;r=e.readUInt16LE(t);t+=2;i=e.slice(t,t+r);t+=r;if(o.ID_ZIP64===n){parseZip64ExtendedInformation(i)}}}function parseZip64ExtendedInformation(e){var n,r,i,s;if(e.length>=o.EF_ZIP64_SCOMP){n=readUInt64LE(e,o.EF_ZIP64_SUNCOMP);if(t.size===o.EF_ZIP64_OR_32){t.size=n}}if(e.length>=o.EF_ZIP64_RHO){r=readUInt64LE(e,o.EF_ZIP64_SCOMP);if(t.compressedSize===o.EF_ZIP64_OR_32){t.compressedSize=r}}if(e.length>=o.EF_ZIP64_DSN){i=readUInt64LE(e,o.EF_ZIP64_RHO);if(t.offset===o.EF_ZIP64_OR_32){t.offset=i}}if(e.length>=o.EF_ZIP64_DSN+4){s=e.readUInt32LE(o.EF_ZIP64_DSN);if(t.diskNumStart===o.EF_ZIP64_OR_16){t.diskNumStart=s}}}return{get entryName(){return n.toString()},get rawEntryName(){return n},set entryName(e){n=r.toBuffer(e);var i=n[n.length-1];c=i===47||i===92;t.fileNameLength=n.length},get extra(){return f},set extra(e){f=e;t.extraLength=e.length;parseExtra(e)},get comment(){return a.toString()},set comment(e){a=r.toBuffer(e);t.commentLength=a.length},get name(){var e=n.toString();return c?e.substr(e.length-1).split("/").pop():e.split("/").pop()},get isDirectory(){return c},getCompressedData:function(){return compress(false,null)},getCompressedDataAsync:function(e){compress(true,e)},setData:function(e){u=r.toBuffer(e);if(!c&&u.length){t.size=u.length;t.method=r.Constants.DEFLATED;t.crc=r.crc32(e);t.changed=true}else{t.method=r.Constants.STORED}},getData:function(e){if(t.changed){return u}else{return decompress(false,null,e)}},getDataAsync:function(e,n){if(t.changed){e(u)}else{decompress(true,e,n)}},set attr(e){t.attr=e},get attr(){return t.attr},set header(e){t.loadFromBinary(e)},get header(){return t},packHeader:function(){var e=t.entryHeaderToBinary();n.copy(e,r.Constants.CENHDR);if(t.extraLength){f.copy(e,r.Constants.CENHDR+n.length)}if(t.commentLength){a.copy(e,r.Constants.CENHDR+n.length+t.extraLength,a.length)}return e},toString:function(){return"{\n"+'\t"entryName" : "'+n.toString()+'",\n'+'\t"name" : "'+(c?n.toString().replace(/\/$/,"").split("/").pop():n.toString().split("/").pop())+'",\n'+'\t"comment" : "'+a.toString()+'",\n'+'\t"isDirectory" : '+c+",\n"+'\t"header" : '+t.toString().replace(/\t/gm,"\t\t").replace(/}/gm,"\t}")+",\n"+'\t"compressedData" : <'+(e&&e.length+" bytes buffer"||"null")+">\n"+'\t"data" : <'+(u&&u.length+" bytes buffer"||"null")+">\n"+"}"}}}},970:function(e){"use strict";var t=function(){function Logging(){}Logging.info=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}if(Logging.enableDebug){console.info(Logging.TAG+e,t)}};Logging.warn=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}if(!Logging.disableWarnings){console.warn(Logging.TAG+e,t)}};Logging.enableDebug=false;Logging.disableWarnings=false;Logging.TAG="ApplicationInsights:";return Logging}();e.exports=t},989:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return function(t,n){e(t,n);function __(){this.constructor=t}t.prototype=n===null?Object.create(n):(__.prototype=n.prototype,new __)}}();var i=n(472);"use strict";var o=function(e){r(MetricData,e);function MetricData(){var t=e.call(this)||this;t.ver=2;t.metrics=[];t.properties={};return t}return MetricData}(i);e.exports=o},997:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(87);function issueCommand(e,t,n){const i=new Command(e,t,n);process.stdout.write(i.toString()+r.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const i="::";class Command{constructor(e,t,n){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=n}toString(){let e=i+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";for(const t in this.properties){if(this.properties.hasOwnProperty(t)){const n=this.properties[t];if(n){e+=`${t}=${escape(`${n||""}`)},`}}}}e+=i;const t=`${this.message||""}`;e+=escapeData(t);return e}}function escapeData(e){return e.replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escape(e){return e.replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/]/g,"%5D").replace(/;/g,"%3B")}}});